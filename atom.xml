<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Alien</title>
  <subtitle>有梦不觉人生寒,有爱不觉天涯远</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://aliennever.github.io/"/>
  <updated>2018-03-12T00:50:46.290Z</updated>
  <id>https://aliennever.github.io/</id>
  
  <author>
    <name>LG</name>
    <email>76229074@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Oracle11g最小静默安装</title>
    <link href="https://aliennever.github.io/2018/03/05/04-20180305/"/>
    <id>https://aliennever.github.io/2018/03/05/04-20180305/</id>
    <published>2018-03-05T04:00:00.000Z</published>
    <updated>2018-03-12T00:50:46.290Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h1><hr>
<ol>
<li>软件环境：<ul>
<li>VM虚拟机：redhat Linux </li>
<li>oracle11g安装包</li>
<li>单机环境需要准备所需依赖包packages</li>
</ul>
</li>
<li>单机环境安装net-tools和unzip：<ul>
<li>配置本地yum源<ol>
<li>打开VMware,在CD/DVD设置选项中，将Redhat7镜像文件放入CD/DVD中</li>
<li>将虚拟光驱挂载到 /mnt 文件夹下 （确保虚拟光驱处于链接状态）<code>mount /dev/sr0 /mnt</code></li>
<li>/mnt/Packages下安装net-tools和unzip包 <code>rpm -ivh net-tools</code></li>
</ol>
</li>
</ul>
</li>
<li><p>若修改主机名则在在/etc/hosts文件中添加主机名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">vi /etc/sysconfig/network</div><div class="line">HOSTNAME=Alien</div><div class="line">vi /etc/hosts</div><div class="line">127.0.0.1      localhost.localdomain localhost linuxhostname Alien</div></pre></td></tr></table></figure>
</li>
<li><p>修改内核参数文件/etc/sysctl.conf:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">fs.aio-max-nr = 1048576</div><div class="line">fs.file-max = 6815744</div><div class="line">kernel.shmall = 2097152</div><div class="line">kernel.shmmax = 536870912</div><div class="line">kernel.shmmni = 4096</div><div class="line">kernel.sem = 250 32000 100 128</div><div class="line">net.ipv4.ip_local_port_range = 9000 65500</div><div class="line">net.core.rmem_default = 262144</div><div class="line">net.core.rmem_max = 4194304</div><div class="line">net.core.wmem_default = 262144</div><div class="line">net.core.wmem_max = 1048586</div></pre></td></tr></table></figure>
</li>
<li><p>修改用户的限制文件/etc/security/limits.conf:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">oracle    soft    nproc    2047</div><div class="line">oracle    hard    nproc    16384</div><div class="line">oracle    soft    nofile    1024</div><div class="line">oracle    hard    nofile    65536</div><div class="line">oracle    soft    stack    10240</div></pre></td></tr></table></figure>
</li>
<li><p>单机环境通过FTP工具上传并安装依赖包packages <code>rpm -Uvh * --nodeps</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y install binutils compat-libcap1 compat-libstdc++-33  elfutils-libelf elfutils-libelf-devel gcc gcc-c++ glibc glibc-common glibc-devel glibc-headers ksh libaio libaio-devel libgcc libstdc++ libstdc++-devel libXi libXtst make sysstat unixODBC unixODBC-devel</div></pre></td></tr></table></figure>
</li>
<li><p>创建Oracle用户和相应的属组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">groupadd oinstall</div><div class="line">groupadd dba</div><div class="line">useradd -g oinstall -G dba oracle</div><div class="line">passwd oracle</div></pre></td></tr></table></figure>
</li>
<li><p>切换到oracle用户创建目录修改属组和权限</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir -p /home/oracle/oracle11g/base         #基目录</div><div class="line">mkdir -p /home/oracle/oracle11g/base/home    #家目录</div><div class="line">mkdir -p /home/oracle/oracle11g/oraInventory    #清单目录</div></pre></td></tr></table></figure>
</li>
<li><p>配置oracle用户的环境变量，编辑  ~/.bash_profile：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">export ORACLE_BASE=/home/oracle/oracle11g/base</div><div class="line">export ORACLE_HOME=$ORACLE_BASE/home </div><div class="line">export ORACLE_SID=orcl</div><div class="line">export PATH=$ORACLE_HOME/bin:$PATH:$HOME/bin </div><div class="line">export TNS_ADMIN=$ORACLE_HOME/network/admin </div><div class="line">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ORACLE_HOME/lib</div></pre></td></tr></table></figure>
</li>
<li><p>上传oracle11g安装包并解压</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">unzip p13390677_112040_Linux-x86-64_1of7.zip </div><div class="line">unzip p13390677_112040_Linux-x86-64_2of7.zip</div></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h1 id="安装数据库"><a href="#安装数据库" class="headerlink" title="安装数据库"></a>安装数据库</h1><hr>
<ol>
<li><p>修改静默安装响应文件/home/oracle/database/response/db_install.rsp:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">oracle.install.option=INSTALL_DB_SWONLY </div><div class="line">ORACLE_HOSTNAME=Alien</div><div class="line">UNIX_GROUP_NAME=oinstall</div><div class="line">INVENTORY_LOCATION=/home/oracle/oracle11g/oraInventory</div><div class="line">SELECTED_LANGUAGES=en,zh_CN</div><div class="line">ORACLE_HOME=/home/oracle/oracle11g/base/home</div><div class="line">ORACLE_BASE=/home/oracle/oracle11g/base</div><div class="line">oracle.install.db.InstallEdition=EE</div><div class="line">oracle.install.db.isCustomInstall=false</div><div class="line">oracle.install.db.DBA_GROUP=dba</div><div class="line">oracle.install.db.OPER_GROUP=oinstall</div><div class="line">DECLINE_SECURITY_UPDATES=true</div></pre></td></tr></table></figure>
</li>
<li><p>启动静默安装程序<br><code>./runInstaller -silent -ignorePrereq -responseFile /home/oracle/database/response/db_install.rsp</code></p>
</li>
<li><p>配置oracle监听<br><code>./netca /silent /responsefile /home/oracle/database/response/netca.rsp</code></p>
<ul>
<li><p>若启动报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Oracle Net Services 配置:</div><div class="line"> An unexpected error has been detected by HotSpot Virtual Machine:</div><div class="line"> SIGSEGV (0xb) at pc=0x00007f2ad35f0b9d, pid=22693, tid=139822952867648</div><div class="line"> Java VM: Java HotSpot(TM) 64-Bit Server VM (1.5.0_17-b03 mixed mode)</div><div class="line"> Problematic frame:</div><div class="line"> C  [libclntsh.so.11.1+0x62ab9d]  snlinGetAddrInfo+0x1b1</div><div class="line"> An error report file with more information is saved as hs_err_pid22693.log</div><div class="line"> If you would like to submit a bug report, please visit:</div><div class="line"> http://java.sun.com/webapps/bugreport/crash.jsp</div><div class="line"> ./netca: 行 178: 22693 已放弃          $JRE $JRE_OPTIONS -classpath $CLASSPATH oracle.net.ca.NetCA $*</div></pre></td></tr></table></figure>
</li>
<li><p>尝试修改主机名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">vi /etc/sysconfig/network</div><div class="line">HOSTNAME=Alien</div><div class="line">vi /etc/hosts</div><div class="line">127.0.0.1      localhost.localdomain localhost linuxhostname Alien</div></pre></td></tr></table></figure>
</li>
<li><p>查看监听器状态：<code>lsnrctl status</code></p>
</li>
</ul>
</li>
<li><p>静默创建数据库:<br><code>./dbca -silent -responseFile /home/oracle/database/response/dbca.rsp</code><br>建库后实例检查：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ps -ef | grep ora_ | grep -v grep | wc -l</div><div class="line">ps -ef | grep ora_ | grep -v grep</div></pre></td></tr></table></figure></li>
</ol>
]]></content>
    
    <summary type="html">
    
      oracle学习
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="oracle" scheme="https://aliennever.github.io/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>Linux虚拟机安装</title>
    <link href="https://aliennever.github.io/2018/03/01/03-20180301/"/>
    <id>https://aliennever.github.io/2018/03/01/03-20180301/</id>
    <published>2018-03-01T04:00:00.000Z</published>
    <updated>2018-03-01T07:33:16.921Z</updated>
    
    <content type="html"><![CDATA[<h1 id="系统安装："><a href="#系统安装：" class="headerlink" title="系统安装："></a>系统安装：</h1><hr>
<ul>
<li>最小化安装：<ol>
<li>打开VMware，新建虚拟机&gt;典型配置&gt;稍后安装操作系统&gt;Linux&gt;选择存储文件夹&gt;设置虚拟机磁盘容量&gt;完成</li>
<li>CD/DVD选择Linux系统镜像文件&gt;开启虚拟机&gt;Install Linux&gt;安装语言选择简体中文&gt;设定时间、配置分区(规划可以如下图)、配置网络&gt;网络和主机名选择连接&gt;设置root用户密码<br><img src="http://wx4.sinaimg.cn/mw690/5a56e9c9ly1foxb7ijnx6j20m80gljsw.jpg" alt="系统分区"></li>
</ol>
</li>
</ul>
<h1 id="安装桌面环境："><a href="#安装桌面环境：" class="headerlink" title="安装桌面环境："></a>安装桌面环境：</h1><hr>
<ol>
<li>打开VMware,在CD/DVD设置选项中，将Redhat7镜像文件放入CD/DVD中</li>
<li><p>root用户下将虚拟光驱挂载到 /mnt 文件夹下 （确保虚拟光驱处于链接状态）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# mount /dev/sr0 /mnt</div><div class="line">mount: /dev/sr0 is write-protected, mounting read-only</div></pre></td></tr></table></figure>
</li>
<li><p>配置光盘为本地yum源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# vi /etc/yum.repos.d/local.repo</div><div class="line">[local]</div><div class="line">name=local</div><div class="line">baseurl=file:///mnt</div><div class="line">enabled=1</div><div class="line">gpgcheck=0</div></pre></td></tr></table></figure>
</li>
<li><p>查看组yum包\安装桌面环境组件\切换到图形化界面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# yum grouplist</div><div class="line">[root@localhost ~]# yum groupinstall -y &quot;Server with GUI&quot;</div><div class="line">[root@localhost ~]# startx</div></pre></td></tr></table></figure>
</li>
<li><p>默认启动模式查看与切换</p>
<ul>
<li>查看当前启动模式： <code>systemctl get-default</code></li>
<li>桌面启动：<code>systemctl set-default graphical.target</code></li>
<li>命令行启动：<code>systemctl set-default multi-user.target</code></li>
</ul>
</li>
</ol>
<h1 id="安装VMware-tools"><a href="#安装VMware-tools" class="headerlink" title="安装VMware tools:"></a>安装VMware tools:</h1><hr>
<ol>
<li>虚拟机 &gt;&gt;客户机 &gt;&gt; 安装/升级 VMware Tools</li>
<li><p>挂载解压资源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost /]# cd /media/</div><div class="line">[root@localhost media]# mount /dev/cdrom /media</div><div class="line">  mount: /dev/sr0 is write-protected, mounting read-only</div><div class="line">[root@localhost media]# cp VMwareTools-10.0.10-4301679.tar.gz /tmp</div><div class="line">[root@localhost media]# cd /tmp</div><div class="line">[root@localhost tmp]# chmod +x VMwareTools-10.0.10-4301679.tar.gz</div><div class="line">[root@localhost tmp]# tar zxf VMwareTools-10.0.10-4301679.tar.gz</div></pre></td></tr></table></figure>
</li>
<li><p>安装并卸载CD-ROM</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost tmp]# cd vmware-tools-distrib/</div><div class="line">[root@localhost vmware-tools-distrib]# ./vmware-install.pl</div><div class="line">[root@localhost vmware-tools-distrib]# cd /</div><div class="line">[root@localhost /]# umount /media</div></pre></td></tr></table></figure></li>
</ol>
]]></content>
    
    <summary type="html">
    
      Linux学习
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Linux" scheme="https://aliennever.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>weblogic集群配置</title>
    <link href="https://aliennever.github.io/2018/02/26/02-20180226/"/>
    <id>https://aliennever.github.io/2018/02/26/02-20180226/</id>
    <published>2018-02-26T04:00:00.000Z</published>
    <updated>2018-03-01T00:45:24.983Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、相关概念"><a href="#一、相关概念" class="headerlink" title="一、相关概念"></a>一、相关概念</h1><hr>
<ul>
<li><p>服务器(Server):</p>
<ol>
<li>AdminServer：主要用于管理，包括应用部署，动态创建server，以及各种服务配置.所以集群环境下不会将应用、数据源等服务部署到AdminServer上面，因为AdminServer仅仅是充当管理者角色而已。运维过程中，还起到监控其它服务器状态的作用。</li>
<li>PorxyServer：主要受理各种外部请求，做负载均衡，将具体工作交给具体的服务器。所以集群环境下，也不会将应用部署到ProxyServer上。除weblogic自带负载均衡方式外，也可用Apache\Nginx软负载或者F5硬负载等方式部署。</li>
<li>Server: 实际处理业务请求的服务器，把前段代理服务器上接受到的任务进行实际处理，处理完了反馈给客户端。</li>
</ol>
<p>AdminServer只负责管理、ProxyServer负责受理分配、而普通的Server就负责处理业务请求。</p>
</li>
<li><p>集群(cluster):<br>控制台里面配置的集群，仅仅用于设置server之间的多播通信。server之间使用多播通信，互相告诉自己状态是否可用。</p>
</li>
<li><p>计算机(machine):<br>可选配置：控制台里面配置的计算机，仅仅用于配置“节点管理器”信息（地址、端口）。然后根据配置信息向节点管理器发送操作命令。</p>
</li>
<li><p>节点管理器(nodemanager):<br>可选服务：节点管理器在集群架构中，不是必须的。它的作用是用来管理server的生命周期，如果没有使用节点管理器，那么集群中的所有server的启动、关闭等常用的操作，必须通过运行startManagedWebLogic.cmd\stopManagedWebloigc.cmd脚本来完成(脚本路径：D:\Oracle\Middleware\user_projects\domains\base_domain\bin)。例如启动server1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">startManagedWebLogic server1 127.0.0.1:7001</div><div class="line">server1 启动的受管服务器的名称   </div><div class="line">address 该域的管理服务器的IP地址   </div><div class="line">port    该域的管理服务器的监听端口</div></pre></td></tr></table></figure>
<p>所以有些集群环境下，你能看到有多少个server，就有多少个启动脚本，实际上就是执行上面这个命令。如果集群中的server分布在多台主机上面，那每次启动服务非常不方便，所以这时候，节点管理器就派上用场了，节点管理器负责管理本机server的启动、关闭等生命周期。</p>
</li>
</ul>
<hr>
<h1 id="二、单机单域集群部署实例"><a href="#二、单机单域集群部署实例" class="headerlink" title="二、单机单域集群部署实例:"></a>二、单机单域集群部署实例:</h1><hr>
<ul>
<li>部署规划：</li>
</ul>
<table>
<thead>
<tr>
<th>运行Server</th>
<th>主机Ip</th>
<th>访问port</th>
</tr>
</thead>
<tbody>
<tr>
<td>AdminServer</td>
<td>172.16.92.41</td>
<td>7001</td>
</tr>
<tr>
<td>PorxyServer</td>
<td>172.16.92.41</td>
<td>17000</td>
</tr>
<tr>
<td>Server1</td>
<td>172.16.92.41</td>
<td>17001</td>
</tr>
<tr>
<td>Server2</td>
<td>172.16.92.41</td>
<td>17002</td>
</tr>
</tbody>
</table>
<p>  其中AdminServer是总控制端，ProxyServer为负载分发代理服务器，server1、server2是集群中的两个服务节点。</p>
<ul>
<li>创建服务器\集群\计算机:<ol>
<li>登录weblogic控制台:<br>通过域目录下startWebLogic脚本启动weblogic服务，浏览器localhost:7001/console进入weblogic控制台。</li>
<li>建立服务器(Sever):<br>域结构&gt;环境&gt;服务器：分别输入ip\port建立Server1\Server2\PorxyServer</li>
<li>建立集群(cluster)<br>域结构&gt;环境&gt;集群：建立Cluster1，消息传送模式选多点传送，传送地址和端口默认。建好后点击Cluster1超链接&gt;服务器选项卡将Sever1\Sever2加入到集群中。</li>
<li>建立计算机(machine):<br>域结构&gt;环境&gt;计算机：建立Machine1,默认配置，建好后点击Machine1超链接&gt;服务器选项卡将Sever1\Sever2\PorxyServer加入到集群中。</li>
</ol>
</li>
<li><p>部署服务：<br>域结构&gt;部署：分别选择相应的项目路径部署Proxy项目和MyProject项目，MyProject项目为自建测试项目(若有数据源需要在域结构&gt;服务&gt;数据源中配置数据源)，Proxy项目为weblogic自带负载分发项目，只在WEB-INF目录下包含web.xml和weblogic.xml，相应代码如下：</p>
<ul>
<li><p>web.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">  xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;</div><div class="line">  xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</div><div class="line">  id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;</div><div class="line">  &lt;display-name&gt;WeblogicProxy&lt;/display-name&gt;</div><div class="line">  &lt;!-- 配置web的servlet，拦截所有的请求，proxy内部会检测server的状态、负载情况，然后根据算法再将请求转发给具体的server处理 --&gt;</div><div class="line">  &lt;servlet&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;servlet-class&gt;weblogic.servlet.proxy.HttpClusterServlet&lt;/servlet-class&gt;</div><div class="line">    &lt;init-param&gt;</div><div class="line">      &lt;param-name&gt;WebLogicCluster&lt;/param-name&gt;</div><div class="line">      &lt;param-value&gt;172.16.92.41:17001|172.16.92.41:17002&lt;/param-value&gt;</div><div class="line">    &lt;/init-param&gt;</div><div class="line">    &lt;init-param&gt;</div><div class="line">      &lt;param-name&gt;DebugConfigInfo&lt;/param-name&gt;</div><div class="line">      &lt;param-value&gt;ON&lt;/param-value&gt;</div><div class="line">    &lt;/init-param&gt;</div><div class="line">    &lt;init-param&gt;</div><div class="line">      &lt;param-name&gt;verbose&lt;/param-name&gt;</div><div class="line">      &lt;param-value&gt;true&lt;/param-value&gt;</div><div class="line">    &lt;/init-param&gt;</div><div class="line">  &lt;/servlet&gt;</div><div class="line"></div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;/&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.jspx&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.htm&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.jpd&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.jcx&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.dtf&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.jws&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">&lt;/web-app&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>weblogic.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;wls:weblogic-web-app xmlns:wls=&quot;http://xmlns.oracle.com/weblogic/weblogic-web-app&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.3/weblogic-web-app.xsd&quot;&gt;</div><div class="line">    &lt;wls:weblogic-version&gt;10.3.6&lt;/wls:weblogic-version&gt;</div><div class="line">    &lt;wls:context-root&gt;/&lt;/wls:context-root&gt;</div><div class="line">&lt;/wls:weblogic-web-app&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>启动服务器节点</p>
<ol>
<li>修改D:\Oracle\Middleware\wlserver_10.3\common\nodemanager目录下nodemanager.properties 字段，将默认的ListenAddress=localhost</li>
<li>D:\Oracle\Middleware\wlserver_10.3\server\bin目录下的脚本installNodeMgrSvc.cmd，然后在计算机&gt;管理&gt;服务启动Oracle WebLogic NodeManager (D_Oracle_Middleware_wlserver_10.3)服务</li>
<li>进入weblogic控制台界面，选择服务器&gt;控制选项卡，勾选对应的托管服务器，就可以进行启动关闭等操作。</li>
</ol>
</li>
</ul>
<hr>
<h1 id="三、双机集群部署实例："><a href="#三、双机集群部署实例：" class="headerlink" title="三、双机集群部署实例："></a>三、双机集群部署实例：</h1><hr>
<ul>
<li>前期注意：<ol>
<li>集群中的所有Server必须位于同一网段，并且必须是IP广播(UDP)可到达的;</li>
<li>集群中的所有Server必须使用相同的版本,包括 Service Pack;</li>
<li>集群中的Server必须使用永久的静态IP地址。动态IP 地址分配不能用于集群环境。如果服务器位于防火墙后面，而客户机位于防火墙外面，那么服务器必须有公共的静态IP地址，只有这样，客户端才能访问服务器;</li>
</ol>
</li>
<li>部署规划：</li>
</ul>
<table>
<thead>
<tr>
<th>运行Server</th>
<th>主机Ip</th>
<th>访问port</th>
</tr>
</thead>
<tbody>
<tr>
<td>AdminServer</td>
<td>172.16.92.41</td>
<td>7001</td>
</tr>
<tr>
<td>ProxyServer</td>
<td>172.16.92.41</td>
<td>17000</td>
</tr>
<tr>
<td>Server1</td>
<td>172.16.92.41</td>
<td>17001</td>
</tr>
<tr>
<td>Server2</td>
<td>172.16.92.42</td>
<td>17001</td>
</tr>
</tbody>
</table>
<ul>
<li>创建域：<ul>
<li>172.16.92.41:</li>
</ul>
<ol>
<li>启动weblogic配置向导，创建weblogic域，选择可选配置选项卡选择’管理服务器’和’受管理服务器，集群和计算机’两个选项，依照上述规划进行建立。</li>
<li>启动weblogic控制台，登录管理服务，安装部署应用及代理服务.配置Jndi数据源。<br>以上步骤注意地址一定输入准确的IP地址不要使用localhost！<br>管理服务AdminServer监听地址为空！<br>若本机有虚拟网卡需要禁用！</li>
</ol>
<ul>
<li>172.16.92.42：<br>启动weblogic配置向导，创建weblogic域，选择可选配置选项卡选择’管理服务器’和’受管理服务器，集群和计算机’两个选项，管理服务器IP选择172.16.92.41服务器名建立要与172.16.92.41上建立的相匹配(即Server2)，集群和计算机不用配置。</li>
</ul>
</li>
<li>部署服务：<br>分别选择相应的项目路径部署Proxy项目和MyProject项目，程序中调用Jndi时也需要使用准确的IP地址！</li>
</ul>
]]></content>
    
    <summary type="html">
    
      weblgoic学习
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="weblogic" scheme="https://aliennever.github.io/tags/weblogic/"/>
    
  </entry>
  
  <entry>
    <title>weblogic删除域</title>
    <link href="https://aliennever.github.io/2018/02/26/01-20180226/"/>
    <id>https://aliennever.github.io/2018/02/26/01-20180226/</id>
    <published>2018-02-26T04:00:00.000Z</published>
    <updated>2018-03-01T00:47:14.778Z</updated>
    
    <content type="html"><![CDATA[<p>以weblogic主目录路径为：D:\Oracle\Middleware，删除域名为base_domain的域为例</p>
<ol>
<li>删除D:\Oracle\Middleware\user_projects\domains下的base_domain整个文件夹</li>
<li>删除开始菜单中Oracle Welogic\User Projects下的base_domain整个文件夹</li>
<li><p>删除D:\Oracle\Middleware\wlserver_10.3\common\nodemanager\nodemanager.domains里的base_domain域内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#Domains and directories created by Configuration Wizard</div><div class="line">#Sat Feb 24 08:48:09 CST 2018</div><div class="line">deve_domain=D\:\\Oracle\\Middleware\\user_projects\\domains\\deve_domain</div><div class="line">base_domain=D\:\\Oracle\\Middleware\\user_projects\\domains\\base_domain</div></pre></td></tr></table></figure>
<p>删除以上base_domain一行</p>
</li>
<li><p>删除 D:\Oracle\Middleware\domain-registry.xml 里的base_domain域内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;domain-registry xmlns=&quot;http://xmlns.oracle.com/weblogic/domain-registry&quot;&gt;</div><div class="line">&lt;domain location=&quot;D:\Oracle\Middleware\user_projects\domains\deve_domain&quot;/&gt;</div><div class="line">&lt;domain location=&quot;D:\Oracle\Middleware\user_projects\domains\base_domain&quot;/&gt;</div><div class="line">&lt;/domain-registry&gt;</div></pre></td></tr></table></figure>
<p>删除以上base_domain一行</p>
</li>
</ol>
<p>附一个删除脚本：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">import os</div><div class="line">import shutil</div><div class="line">import re</div><div class="line">def deleteDomain(domainName):</div><div class="line">	domainPath=r&apos;D:\Oracle\Middleware\user_projects\domains&apos;</div><div class="line">	startMenuPath=r&apos;C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Oracle WebLogic\User Projects&apos;</div><div class="line">	nodemanagerPath=r&apos;D:\Oracle\Middleware\wlserver_10.3\common\nodemanager\nodemanager.domains&apos;</div><div class="line">	nodemanagerPathNew=r&apos;D:\Oracle\Middleware\wlserver_10.3\common\nodemanager\nodemanagertemp.domains&apos;</div><div class="line">	domainRegistryPath=r&apos;D:\Oracle\Middleware\domain-registry.xml&apos;</div><div class="line">	domainRegistryPathNew=r&apos;D:\Oracle\Middleware\domain-registrytemp.xml&apos;</div><div class="line">    </div><div class="line">	if domainName.strip()!=&apos;&apos;:</div><div class="line">		try:</div><div class="line">			deleteDomainPath=os.path.join(domainPath,domainName)</div><div class="line">			deleteStartMenuPath=os.path.join(startMenuPath,domainName)</div><div class="line">			if os.path.isdir(deleteDomainPath):</div><div class="line">				shutil.rmtree(deleteDomainPath)</div><div class="line">				print (&quot;删除域目录成功！&quot;)</div><div class="line">			else:</div><div class="line">				print (&quot;域目录不存在！&quot;)</div><div class="line">			if os.path.isdir(deleteStartMenuPath):</div><div class="line">				shutil.rmtree(deleteStartMenuPath)</div><div class="line">				print (&quot;删除域开始菜单成功！&quot;)</div><div class="line">			else:</div><div class="line">				print (&quot;域开始菜单目录不存在！&quot;)		</div><div class="line">			with open(nodemanagerPath, &apos;r&apos;) as f:</div><div class="line">				with open(nodemanagerPathNew, &apos;w&apos;) as g:</div><div class="line">					for line in f.readlines():</div><div class="line">						if not re.match(domainName,line):</div><div class="line">							g.write(line)</div><div class="line">			os.remove(nodemanagerPath)</div><div class="line">			os.rename(nodemanagerPathNew,nodemanagerPath)</div><div class="line">			with open(domainRegistryPath, &apos;r&apos;) as f:</div><div class="line">				with open(domainRegistryPathNew, &apos;w&apos;) as g:</div><div class="line">					for line in f.readlines():</div><div class="line">						if not re.search(domainName,line):</div><div class="line">							g.write(line)</div><div class="line">			os.remove(domainRegistryPath)</div><div class="line">			os.rename(domainRegistryPathNew,domainRegistryPath)</div><div class="line">		except Exception as err:</div><div class="line">			print (&quot;删除域失败：&#123;0&#125;&quot;.format(err))    </div><div class="line">	else:</div><div class="line">		print (&quot;域名输入有误！&quot;)</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      weblgoic学习
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="weblogic" scheme="https://aliennever.github.io/tags/weblogic/"/>
    
  </entry>
  
</feed>
