<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Alien</title>
  <subtitle>有梦不觉人生寒,有爱不觉天涯远</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://aliennever.github.io/"/>
  <updated>2018-11-17T13:02:29.074Z</updated>
  <id>https://aliennever.github.io/</id>
  
  <author>
    <name>LG</name>
    <email>76229074@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>11gOCM-Skillset6</title>
    <link href="https://aliennever.github.io/2018/11/06/20181113OCM%20Skillset6/"/>
    <id>https://aliennever.github.io/2018/11/06/20181113OCM Skillset6/</id>
    <published>2018-11-06T04:00:00.000Z</published>
    <updated>2018-11-17T13:02:29.074Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Skillset-6"><a href="#Skillset-6" class="headerlink" title="Skillset 6"></a>Skillset 6</h1><h2 id="TASKS"><a href="#TASKS" class="headerlink" title="TASKS:"></a>TASKS:</h2><h3 id="1-Grid-Control-Installation"><a href="#1-Grid-Control-Installation" class="headerlink" title="1. Grid Control Installation"></a><strong>1. Grid Control Installation</strong></h3><h4 id="1-1-Deploy-an-Oracle-Management-Agent-on-your-Database-Server-management-password-is-Oracle123"><a href="#1-1-Deploy-an-Oracle-Management-Agent-on-your-Database-Server-management-password-is-Oracle123" class="headerlink" title="1.1 Deploy an Oracle Management Agent on your Database Server,management password is Oracle123."></a>1.1 Deploy an Oracle Management Agent on your Database Server,management password is Oracle123.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">[oracle@edbjr2p2 linux]$ </div><div class="line">lsnrctl status</div><div class="line">export ORACLE_SID=PROD2</div><div class="line">sqlplus / as sysdba</div><div class="line">alter user dbsnmp identified by oracle account unlock;</div><div class="line">cd /u01/app/oracle/product/middleware/oms11g/bin</div><div class="line">./emctl status oms</div><div class="line">./emctl start oms</div><div class="line">cd /u01/app/oracle/product/middleware/oms11g/sysman/agent_download/11.1.0.1.0/linux</div><div class="line">scp agentDownload.linux edbjr2p1:~</div><div class="line">[oracle@edbjr2p1 ~]$ </div><div class="line">chmod 755 agentDownload.linux</div><div class="line">./agentDownload.linux -yb /u01/app/oracle</div><div class="line">su root</div><div class="line">/u01/app/oracle/agent11g/root.sh</div><div class="line">cd /u01/app/oracle/agent11g/bin</div><div class="line">./emctl status agent </div><div class="line">https://localhost:7799/em </div><div class="line">sys Oracle123</div></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/4738223.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<h4 id="1-2-Create-a-Grid-Control-super-user-called-EMADMIN-with-the-password-EMADMIN"><a href="#1-2-Create-a-Grid-Control-super-user-called-EMADMIN-with-the-password-EMADMIN" class="headerlink" title="1.2 Create a Grid Control super user called EMADMIN with the password EMADMIN."></a>1.2 Create a Grid Control super user called EMADMIN with the password EMADMIN.</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/55262249.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/14181965.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/45396944.jpg" alt="3" title="">
                </div>
                <div class="image-caption">3</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/22682146.jpg" alt="4" title="">
                </div>
                <div class="image-caption">4</div>
            </figure>
<h3 id="2-Using-Grid-Control"><a href="#2-Using-Grid-Control" class="headerlink" title="2. Using Grid Control"></a><strong>2. Using Grid Control</strong></h3><h4 id="2-1-Using-Grid-Control-change-the-PGA-AGGREGATE-TARGET-on-your-PROD1-server-to-500MB-so-that-it-will-persistant-when-the-instance-is-restarted"><a href="#2-1-Using-Grid-Control-change-the-PGA-AGGREGATE-TARGET-on-your-PROD1-server-to-500MB-so-that-it-will-persistant-when-the-instance-is-restarted" class="headerlink" title="2.1 Using Grid Control, change the PGA_AGGREGATE_TARGET on your PROD1 server to 500MB so that it will persistant when the instance is restarted."></a>2.1 Using Grid Control, change the PGA_AGGREGATE_TARGET on your PROD1 server to 500MB so that it will persistant when the instance is restarted.</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/1024386.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/63169320.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/73653376.jpg" alt="3" title="">
                </div>
                <div class="image-caption">3</div>
            </figure>
<h4 id="2-2-Using-Grid-Control-configure-the-instance-to-ensure-that-it-will-take-up-to-five-5-minutes-to-recover-your-instance-following-an-instance-failure"><a href="#2-2-Using-Grid-Control-configure-the-instance-to-ensure-that-it-will-take-up-to-five-5-minutes-to-recover-your-instance-following-an-instance-failure" class="headerlink" title="2.2 Using Grid Control, configure the instance to ensure that it will take up to five(5) minutes to recover your instance following an instance failure."></a>2.2 Using Grid Control, configure the instance to ensure that it will take up to five(5) minutes to recover your instance following an instance failure.</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/1018682.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<h4 id="2-3-Configure-an-alert-on-the-SYSTEM-tablespace-of-the-PROD1-database-The-alert-should-register-as-a-warning-at-87-and-critical-at-95-full"><a href="#2-3-Configure-an-alert-on-the-SYSTEM-tablespace-of-the-PROD1-database-The-alert-should-register-as-a-warning-at-87-and-critical-at-95-full" class="headerlink" title="2.3 Configure an alert on the SYSTEM tablespace of the PROD1 database. The alert should register as a warning at 87% and critical at 95% full."></a>2.3 Configure an alert on the SYSTEM tablespace of the PROD1 database. The alert should register as a warning at 87% and critical at 95% full.</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/82999998.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<h4 id="2-4-Setup-notifications-to-be-sent-to-the-email-address-‘dba-ocm-com’-Notification-messages-should-be-sent-to-this-address-at-anytime"><a href="#2-4-Setup-notifications-to-be-sent-to-the-email-address-‘dba-ocm-com’-Notification-messages-should-be-sent-to-this-address-at-anytime" class="headerlink" title="2.4 Setup notifications to be sent to the email address ‘dba@ocm.com’ Notification messages should be sent to this address at anytime."></a>2.4 Setup notifications to be sent to the email address ‘dba@ocm.com’ Notification messages should be sent to this address at anytime.</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/57151310.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/4766986.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/87671534.jpg" alt="3" title="">
                </div>
                <div class="image-caption">3</div>
            </figure>
<h4 id="2-5-Create-a-permanent-tablespace-REGISTRATION-local-management-tablespace-automatic-segment-space-management-Initial-datafile-size-of-90M-with-the-file-expected-to-grow-to-120M"><a href="#2-5-Create-a-permanent-tablespace-REGISTRATION-local-management-tablespace-automatic-segment-space-management-Initial-datafile-size-of-90M-with-the-file-expected-to-grow-to-120M" class="headerlink" title="2.5 Create a permanent tablespace REGISTRATION,local management tablespace,automatic segment space management Initial datafile size of 90M with the file expected to grow to 120M."></a>2.5 Create a permanent tablespace REGISTRATION,local management tablespace,automatic segment space management Initial datafile size of 90M with the file expected to grow to 120M.</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/79613922.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/97282603.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/25359295.jpg" alt="3" title="">
                </div>
                <div class="image-caption">3</div>
            </figure>
<h3 id="3-Implementing-Schedules-and-Jobs"><a href="#3-Implementing-Schedules-and-Jobs" class="headerlink" title="3. Implementing Schedules and Jobs"></a><strong>3. Implementing Schedules and Jobs</strong></h3><h4 id="3-1-Using-Grid-Control-create-a-schedule-for-the-PROD1-database"><a href="#3-1-Using-Grid-Control-create-a-schedule-for-the-PROD1-database" class="headerlink" title="3.1 Using Grid Control, create a schedule for the PROD1 database."></a>3.1 Using Grid Control, create a schedule for the PROD1 database.</h4><h5 id="3-1-1-Call-this-schedule-DAILYREBUILD"><a href="#3-1-1-Call-this-schedule-DAILYREBUILD" class="headerlink" title="3.1.1 Call this schedule DAILYREBUILD"></a>3.1.1 Call this schedule DAILYREBUILD</h5><h5 id="3-1-2-Configure-it-to-run-at-2PM-every-day"><a href="#3-1-2-Configure-it-to-run-at-2PM-every-day" class="headerlink" title="3.1.2 Configure it to run at 2PM every day"></a>3.1.2 Configure it to run at 2PM every day</h5><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/57383994.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/97716427.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/4241396.jpg" alt="3" title="">
                </div>
                <div class="image-caption">3</div>
            </figure>
<h4 id="3-2-Create-a-program-for-the-PROD1-database-called-EMP-IND-REBUILD-that-rebuilds-all-indexes-on-the-HR-EMPLOYEES-table"><a href="#3-2-Create-a-program-for-the-PROD1-database-called-EMP-IND-REBUILD-that-rebuilds-all-indexes-on-the-HR-EMPLOYEES-table" class="headerlink" title="3.2 Create a program for the PROD1 database called EMP_IND_REBUILD that rebuilds all indexes on the HR.EMPLOYEES table."></a>3.2 Create a program for the PROD1 database called EMP_IND_REBUILD that rebuilds all indexes on the HR.EMPLOYEES table.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">BEGIN</div><div class="line">  FOR i IN (SELECT TABLE_OWNER,INDEX_NAME from user_indexes where TABLE_NAME=&apos;EMPLOYEES&apos;)</div><div class="line">LOOP</div><div class="line">  EXECUTE IMMEDIATE &quot;ALTER INDEX&quot;||i.TABLE_OWNER||&quot;.&quot;||i.INDEX.NAME||&quot;REBUILD&quot;;</div><div class="line">END LOOP;</div><div class="line">END;</div></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/72338021.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<h4 id="3-3-Create-a-window-that-utilizes-the-DAILYREBUILD-schedule-and-SYSTEM-PLAN-resource-manager-plan"><a href="#3-3-Create-a-window-that-utilizes-the-DAILYREBUILD-schedule-and-SYSTEM-PLAN-resource-manager-plan" class="headerlink" title="3.3 Create a window that utilizes the DAILYREBUILD schedule and SYSTEM_PLAN resource manager plan."></a>3.3 Create a window that utilizes the DAILYREBUILD schedule and SYSTEM_PLAN resource manager plan.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">系统中无 SYSTEM_PLAN,可重新创建一个，或任选一个已有计划</div></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/13009085.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/86952674.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/18579278.jpg" alt="3" title="">
                </div>
                <div class="image-caption">3</div>
            </figure>
<h4 id="3-4-Create-a-job-called-REBUILD-JOB-that-uses-the-DAILYREBUILD-schedule-and-EMP-IND-REBUILD-program"><a href="#3-4-Create-a-job-called-REBUILD-JOB-that-uses-the-DAILYREBUILD-schedule-and-EMP-IND-REBUILD-program" class="headerlink" title="3.4 Create a job called REBUILD_JOB that uses the DAILYREBUILD schedule and EMP_IND_REBUILD program."></a>3.4 Create a job called REBUILD_JOB that uses the DAILYREBUILD schedule and EMP_IND_REBUILD program.</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/26729977.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/39155363.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/60277183.jpg" alt="3" title="">
                </div>
                <div class="image-caption">3</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/17091791.jpg" alt="4" title="">
                </div>
                <div class="image-caption">4</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/9386928.jpg" alt="5" title="">
                </div>
                <div class="image-caption">5</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/84451499.jpg" alt="6" title="">
                </div>
                <div class="image-caption">6</div>
            </figure>]]></content>
    
    <summary type="html">
    
      ocm11g认证考试
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="oracle" scheme="https://aliennever.github.io/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>11gOCM-Skillset5</title>
    <link href="https://aliennever.github.io/2018/11/06/20181106OCM%20Skillset5/"/>
    <id>https://aliennever.github.io/2018/11/06/20181106OCM Skillset5/</id>
    <published>2018-11-06T04:00:00.000Z</published>
    <updated>2018-11-17T12:41:31.849Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Skillset-5"><a href="#Skillset-5" class="headerlink" title="Skillset 5"></a>Skillset 5</h1><h2 id="TASKS"><a href="#TASKS" class="headerlink" title="TASKS:"></a>TASKS:</h2><h3 id="1-PROD2-was-destroyed-again-implied"><a href="#1-PROD2-was-destroyed-again-implied" class="headerlink" title="1. PROD2 was destroyed again (implied)"></a>1. <strong>PROD2 was destroyed again (implied)</strong></h3><h4 id="1-1-The-data-file-that-belongs-to-the-system-tablespace-is-deleted"><a href="#1-1-The-data-file-that-belongs-to-the-system-tablespace-is-deleted" class="headerlink" title="1.1 The data file that belongs to the system tablespace is deleted"></a>1.1 The data file that belongs to the system tablespace is deleted</h4><h4 id="1-2-The-controlfile-is-deleted"><a href="#1-2-The-controlfile-is-deleted" class="headerlink" title="1.2 The controlfile is deleted"></a>1.2 The controlfile is deleted</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">list failure;</div><div class="line">advise failure;</div><div class="line">repair failure;</div><div class="line">or</div><div class="line">tar -xzvf PROD2.tar.gz</div></pre></td></tr></table></figure>
<h3 id="2-Create-Synonym"><a href="#2-Create-Synonym" class="headerlink" title="2. Create Synonym"></a>2. <strong>Create Synonym</strong></h3><h4 id="2-1-Create-a-sh-sales-PROD1-on-the-public-synonyms-in-the-PROD2-requires-that-all-users-can-access"><a href="#2-1-Create-a-sh-sales-PROD1-on-the-public-synonyms-in-the-PROD2-requires-that-all-users-can-access" class="headerlink" title="2.1 Create a sh.sales@PROD1 on the public synonyms in the PROD2, requires that all users can access."></a>2.1 Create a sh.sales@PROD1 on the public synonyms in the PROD2, requires that all users can access.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">create database link prod1 connect to sh identified by sh using &apos;PROD1&apos;;</div><div class="line">create public synonym sales for sh.sales@prod1;</div><div class="line">select count(*) from sales;</div></pre></td></tr></table></figure>
<h3 id="3-Set-Up-and-Configure-Resource-Manager"><a href="#3-Set-Up-and-Configure-Resource-Manager" class="headerlink" title="3. Set Up and Configure Resource Manager"></a>3. <strong>Set Up and Configure Resource Manager</strong></h3><h4 id="3-1-Assign-the-user-SH-as-the-resource-administrator"><a href="#3-1-Assign-the-user-SH-as-the-resource-administrator" class="headerlink" title="3.1 Assign the user SH as the resource administrator;"></a>3.1 Assign the user SH as the resource administrator;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">export ORACLE_SID=PROD1</div><div class="line">sqlplus / as sysdba</div><div class="line">grant administer resource Manager to sh;</div></pre></td></tr></table></figure>
<h4 id="3-2-Create-two-resource-manager-consumer-groups-OLTP-and-DSS-User-comment-which-will-be-used-for"><a href="#3-2-Create-two-resource-manager-consumer-groups-OLTP-and-DSS-User-comment-which-will-be-used-for" class="headerlink" title="3.2 Create two resource manager consumer groups, OLTP and DSS (User comment which will be used for)."></a>3.2 Create two resource manager consumer groups, OLTP and DSS (User comment which will be used for).</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/64994405.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/72125958.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<h4 id="3-3-Create-a-plan-named-WEEKDAYS-with-the-following-derectives-only"><a href="#3-3-Create-a-plan-named-WEEKDAYS-with-the-following-derectives-only" class="headerlink" title="3.3 Create a plan named WEEKDAYS with the following derectives only:"></a>3.3 Create a plan named WEEKDAYS with the following derectives only:</h4><h5 id="3-3-1-For-OLTP-group-we-cannot-allow-more-than-20-active-sessions-If-more-than-20-sessions-the-request-should-be-aborted-if-the-wait-exceeds-60-seconds"><a href="#3-3-1-For-OLTP-group-we-cannot-allow-more-than-20-active-sessions-If-more-than-20-sessions-the-request-should-be-aborted-if-the-wait-exceeds-60-seconds" class="headerlink" title="3.3.1 For OLTP group, we cannot allow more than 20 active sessions. If more than 20 sessions the request should be aborted if the wait exceeds 60 seconds."></a>3.3.1 For OLTP group, we cannot allow more than 20 active sessions. If more than 20 sessions the request should be aborted if the wait exceeds 60 seconds.</h5><h5 id="3-3-2-The-maximum-number-of-active-sessions-for-the-DSS-group-to-5-If-more-than-5-sessions-then-the-request-should-be-aborted-after-120-seconds"><a href="#3-3-2-The-maximum-number-of-active-sessions-for-the-DSS-group-to-5-If-more-than-5-sessions-then-the-request-should-be-aborted-after-120-seconds" class="headerlink" title="3.3.2 The maximum number of active sessions for the DSS group to 5. If more than 5 sessions then the request should be aborted after 120 seconds."></a>3.3.2 The maximum number of active sessions for the DSS group to 5. If more than 5 sessions then the request should be aborted after 120 seconds.</h5><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/5653150.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/28673407.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<h5 id="3-3-3-If-more-than-10000-times-the-I-O-request-and-2500M-load-on-OLTP-switch-to-LOW-GROUP-if-executed-finished-to-cut-back-to-the-original-group-not-estimated"><a href="#3-3-3-If-more-than-10000-times-the-I-O-request-and-2500M-load-on-OLTP-switch-to-LOW-GROUP-if-executed-finished-to-cut-back-to-the-original-group-not-estimated" class="headerlink" title="3.3.3 If more than 10000 times the I/O request and 2500M load on OLTP, switch to LOW_GROUP, if executed finished, to cut back to the original group (not estimated)."></a>3.3.3 If more than 10000 times the I/O request and 2500M load on OLTP, switch to LOW_GROUP, if executed finished, to cut back to the original group (not estimated).</h5><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/64284340.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<h5 id="3-3-4-The-maximum-amount-of-undo-that-the-OLTP-group-can-use-should-be-200M-204800K"><a href="#3-3-4-The-maximum-amount-of-undo-that-the-OLTP-group-can-use-should-be-200M-204800K" class="headerlink" title="3.3.4  The maximum amount of undo that the OLTP group can use should be 200M(204800K);"></a>3.3.4  The maximum amount of undo that the OLTP group can use should be 200M(204800K);</h5><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/45190400.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<h5 id="3-3-5-Set-CPU-ratios-for-OLTP-DSS-and-OTHER-GROUPS-as-50-30-and-20-respectively"><a href="#3-3-5-Set-CPU-ratios-for-OLTP-DSS-and-OTHER-GROUPS-as-50-30-and-20-respectively" class="headerlink" title="3.3.5  Set CPU ratios for OLTP, DSS and OTHER_GROUPS as 50, 30 and 20 respectively."></a>3.3.5  Set CPU ratios for OLTP, DSS and OTHER_GROUPS as 50, 30 and 20 respectively.</h5><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/6525404.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<h5 id="3-3-6-DSS-group-has-parallel-degree-limit-of-20"><a href="#3-3-6-DSS-group-has-parallel-degree-limit-of-20" class="headerlink" title="3.3.6  DSS group has parallel degree limit of 20."></a>3.3.6  DSS group has parallel degree limit of 20.</h5><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/72049083.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<h5 id="3-3-7-The-idle-session-the-longest-120s-in-the-OLTP-if-blocked-above-other-process-80s-to-termination"><a href="#3-3-7-The-idle-session-the-longest-120s-in-the-OLTP-if-blocked-above-other-process-80s-to-termination" class="headerlink" title="3.3.7  The idle session the longest 120s in the OLTP, if blocked above other process 80s, to termination."></a>3.3.7  The idle session the longest 120s in the OLTP, if blocked above other process 80s, to termination.</h5><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/29758732.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<h4 id="3-4-Specify-that-the-WEEKDAYS-plan-be-used-by-the-instance-as-default"><a href="#3-4-Specify-that-the-WEEKDAYS-plan-be-used-by-the-instance-as-default" class="headerlink" title="3.4 Specify that the WEEKDAYS plan be used by the instance as default."></a>3.4 Specify that the WEEKDAYS plan be used by the instance as default.</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/886434.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<h3 id="4-Management-Objects-for-Performance"><a href="#4-Management-Objects-for-Performance" class="headerlink" title="4. Management Objects for Performance"></a>4. <strong>Management Objects for Performance</strong></h3><h4 id="4-1-Our-application-needs-to-access-the-CUST-LAST-NAME-column-in-the-CUSTOMERS-table-in-the-SH-schema-The-problem-is-that-the-users-can-supply-names-without-regard-to-case-The-application-changes-all-the-user-supplied-names-to-uppercase-Analysis-reveals-that-a-normal-index-we-placed-on-the-column-is-not-used-Create-an-index-on-the-aforementioned-column-that-will-be-usable-by-the-application"><a href="#4-1-Our-application-needs-to-access-the-CUST-LAST-NAME-column-in-the-CUSTOMERS-table-in-the-SH-schema-The-problem-is-that-the-users-can-supply-names-without-regard-to-case-The-application-changes-all-the-user-supplied-names-to-uppercase-Analysis-reveals-that-a-normal-index-we-placed-on-the-column-is-not-used-Create-an-index-on-the-aforementioned-column-that-will-be-usable-by-the-application" class="headerlink" title="4.1 Our application needs to access the CUST_LAST_NAME column in the CUSTOMERS table in the SH schema. The problem is that the users can supply names without regard to case. The application changes all the user-supplied names to uppercase. Analysis reveals that a normal index we placed on the column is not used. Create an index on the aforementioned column that will be usable by the application."></a>4.1 Our application needs to access the CUST_LAST_NAME column in the CUSTOMERS table in the SH schema. The problem is that the users can supply names without regard to case. The application changes all the user-supplied names to uppercase. Analysis reveals that a normal index we placed on the column is not used. Create an index on the aforementioned column that will be usable by the application.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">create index cust_up_lastname on sh.customers(upper(CUST_LAST_NAME));</div><div class="line">set autot trace exp</div><div class="line">select * from sh.customers where upper(cust_last_name)=&apos;HAUS&apos;;</div></pre></td></tr></table></figure>
<h4 id="4-2-Turn-on-monitoring-for-all-of-the-indexes-on-the-SALES-table-in-the-OLTP-USER-schema"><a href="#4-2-Turn-on-monitoring-for-all-of-the-indexes-on-the-SALES-table-in-the-OLTP-USER-schema" class="headerlink" title="4.2 Turn on monitoring for all of the indexes on the SALES table in the OLTP_USER schema."></a>4.2 Turn on monitoring for all of the indexes on the SALES table in the OLTP_USER schema.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">conn oltp_user/oltp_user</div><div class="line">select INDEX_NAME from user_indexes where TABLE_NAME=&apos;SALES&apos;;</div><div class="line">alter index OLTP_SALES_PROD_BIX monitoring usage;</div><div class="line">alter index OLTP_SALES_CUST_BIX monitoring usage;</div><div class="line">alter index OLTP_SALES_CHANNEL_BIX monitoring usage;</div><div class="line">select * from v$object_usage;</div></pre></td></tr></table></figure>
<h4 id="4-3-Create-two-new-tables-named-STUDENTS-and-ATTENDEES-in-the-OLTP-USER-schema-This-STUDENTS-table-will-contain-three-columns-STUD-ID-will-be-a-number-and-the-primary-key-FNAME-and-LNAME-will-be-the-other-two-columns-and-may-vary-in-length-with-a-maximun-of-20-characters-ATTENDEES-will-be-an-intersection-table-in-a-many-to-many-relationship-between-the-STUDENTS-and-CLASSES-tables-also-in-the-OLTP-USER-schema-The-ATTENDEES-table-will-contain-the-primary-keys-of-each-of-the-other-tables-as-its-primary-key-Create-the-ATTENDEES-table-so-that-the-primary-key-index-and-the-table-itsellf-are-the-same-object"><a href="#4-3-Create-two-new-tables-named-STUDENTS-and-ATTENDEES-in-the-OLTP-USER-schema-This-STUDENTS-table-will-contain-three-columns-STUD-ID-will-be-a-number-and-the-primary-key-FNAME-and-LNAME-will-be-the-other-two-columns-and-may-vary-in-length-with-a-maximun-of-20-characters-ATTENDEES-will-be-an-intersection-table-in-a-many-to-many-relationship-between-the-STUDENTS-and-CLASSES-tables-also-in-the-OLTP-USER-schema-The-ATTENDEES-table-will-contain-the-primary-keys-of-each-of-the-other-tables-as-its-primary-key-Create-the-ATTENDEES-table-so-that-the-primary-key-index-and-the-table-itsellf-are-the-same-object" class="headerlink" title="4.3 Create two new tables named STUDENTS and ATTENDEES in the OLTP_USER schema. This STUDENTS table will contain three columns.STUD_ID will be a number and the primary key. FNAME and LNAME will be the other two columns and may vary in length with a maximun of 20 characters. ATTENDEES will be an intersection table in a many-to-many relationship between the STUDENTS and CLASSES tables also in the OLTP_USER schema. The ATTENDEES table will contain the primary keys of each of the other tables as its primary key. Create the ATTENDEES table so that the primary key index and the table itsellf are the same object."></a>4.3 Create two new tables named STUDENTS and ATTENDEES in the OLTP_USER schema. This STUDENTS table will contain three columns.STUD_ID will be a number and the primary key. FNAME and LNAME will be the other two columns and may vary in length with a maximun of 20 characters. ATTENDEES will be an intersection table in a many-to-many relationship between the STUDENTS and CLASSES tables also in the OLTP_USER schema. The ATTENDEES table will contain the primary keys of each of the other tables as its primary key. Create the ATTENDEES table so that the primary key index and the table itsellf are the same object.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">create table STUDENTS(</div><div class="line">STUD_ID number  primary key not null,</div><div class="line">FNAME varchar(20),</div><div class="line">Lname varchar(20));</div><div class="line">create table ATTENDEES(</div><div class="line">STUD_ID number not null constraint fk_stud_id references STUDENTS(STUD_ID),</div><div class="line">CLASS_ID number not null  constraint fk_class_id references CLASSES(CLASS_ID),</div><div class="line">constraint pk primary key(STUD_ID,CLASS_ID)</div><div class="line">)organization index;</div></pre></td></tr></table></figure>
<h4 id="4-4-Because-of-the-unevenly-distributed-data-in-the-DEPARTMENT-ID-column-of-the-EMPLOYEES-table-of-the-HR-schema-you-need-to-supply-more-information-to-the-optimizer-to-allow-for-more-efficient-use-of-indexes-Regenerate-statistics-on-the-EMPLOYEES-table-to-solve-this-problem"><a href="#4-4-Because-of-the-unevenly-distributed-data-in-the-DEPARTMENT-ID-column-of-the-EMPLOYEES-table-of-the-HR-schema-you-need-to-supply-more-information-to-the-optimizer-to-allow-for-more-efficient-use-of-indexes-Regenerate-statistics-on-the-EMPLOYEES-table-to-solve-this-problem" class="headerlink" title="4.4 Because of the unevenly distributed data in the DEPARTMENT_ID column of the EMPLOYEES table of the HR schema,you need to supply more information to the optimizer to allow for more efficient use of indexes. Regenerate statistics on the EMPLOYEES table to solve this problem."></a>4.4 Because of the unevenly distributed data in the DEPARTMENT_ID column of the EMPLOYEES table of the HR schema,you need to supply more information to the optimizer to allow for more efficient use of indexes. Regenerate statistics on the EMPLOYEES table to solve this problem.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">conn / as sysdba</div><div class="line">begin</div><div class="line">   DBMS_STATS.GATHER_TABLE_STATS (</div><div class="line">   ownname =&gt;&apos;HR&apos;, </div><div class="line">   tabname =&gt;&apos;EMPLOYEES&apos;, </div><div class="line">   method_opt =&gt; &apos;FOR ALL INDEXED COLUMNS SIZE AUTO&apos;,</div><div class="line">   cascade =&gt;true</div><div class="line">); </div><div class="line">end; </div><div class="line">/</div></pre></td></tr></table></figure>
<h4 id="4-5-Analysis-has-revealed-that-the-COUNTRY-ID-column-of-the-CUSTOMERS-table-of-the-SH-schema-has-very-low-cardinality-This-column-is-never-updated-Create-the-index-that-can-take-advantage-of-the-above-attributes-of-this-column"><a href="#4-5-Analysis-has-revealed-that-the-COUNTRY-ID-column-of-the-CUSTOMERS-table-of-the-SH-schema-has-very-low-cardinality-This-column-is-never-updated-Create-the-index-that-can-take-advantage-of-the-above-attributes-of-this-column" class="headerlink" title="4.5 Analysis has revealed that the COUNTRY_ID column of the CUSTOMERS table of the SH schema has very low cardinality. This column is never updated. Create the index that can take advantage of the above attributes of this column."></a>4.5 Analysis has revealed that the COUNTRY_ID column of the CUSTOMERS table of the SH schema has very low cardinality. This column is never updated. Create the index that can take advantage of the above attributes of this column.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">conn sh/sh</div><div class="line">create bitmap index cust_conun on CUSTOMERS(COUNTRY_ID);</div></pre></td></tr></table></figure>
<h4 id="4-6-create-an-index-on-the-COUNTRY-ID-and-CUST-CITY-column-in-the-CUSTOMERS-table-of-the-SH-schema"><a href="#4-6-create-an-index-on-the-COUNTRY-ID-and-CUST-CITY-column-in-the-CUSTOMERS-table-of-the-SH-schema" class="headerlink" title="4.6 create an index on the COUNTRY_ID and CUST_CITY column in the CUSTOMERS table of the SH schema."></a>4.6 create an index on the COUNTRY_ID and CUST_CITY column in the CUSTOMERS table of the SH schema.</h4><p>The application requires that leading column of this index must be the COUNTRY_ID column. Take advantage of the Oracle feature of indexes that allows the creation of the index to use less space when the leading column is not the most unique.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">create index cust_count_city_i on customers(country_id,cust_city) compress 1;</div></pre></td></tr></table></figure></p>
<h4 id="4-7-Make-certain-that-the-package-named-STANDARD-is-always-kept-in-memory"><a href="#4-7-Make-certain-that-the-package-named-STANDARD-is-always-kept-in-memory" class="headerlink" title="4.7 Make certain that the package named STANDARD is always kept in memory."></a>4.7 Make certain that the package named STANDARD is always kept in memory.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">conn / as sysdba</div><div class="line">begin</div><div class="line">   DBMS_SHARED_POOL.KEEP (</div><div class="line">   name=&gt;&apos;STANDARD&apos; </div><div class="line">); </div><div class="line">end;</div><div class="line">/</div></pre></td></tr></table></figure>
<h4 id="4-8-Analysis-reveals-that-a-3rd-party-application-is-not-using-bind-variables-and-has-skewed-data-In-addition-we-find-shared-pool-latch-contention-Find-the-best-solution-to-reduce-shared-pool-usage"><a href="#4-8-Analysis-reveals-that-a-3rd-party-application-is-not-using-bind-variables-and-has-skewed-data-In-addition-we-find-shared-pool-latch-contention-Find-the-best-solution-to-reduce-shared-pool-usage" class="headerlink" title="4.8 Analysis reveals that a 3rd party application is not using bind variables and has skewed data.In addition, we find shared pool latch contention. Find the best solution to reduce shared pool usage."></a>4.8 Analysis reveals that a 3rd party application is not using bind variables and has skewed data.In addition, we find shared pool latch contention. Find the best solution to reduce shared pool usage.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter system set cursor_sharing=FORCE;</div></pre></td></tr></table></figure>
<h4 id="4-9-A-junior-dba-create-a-table-new-cust-on-tablespace-cust-tbs-But-you-found-it-perform-poorly-and-buffer-busy-wait-is-much-higher-than-other-tables-on-other-tablespaces-and-the-segment-head-contention-occurs-Try-to-resolve-the-problem-but-large-query-should-be-maintained"><a href="#4-9-A-junior-dba-create-a-table-new-cust-on-tablespace-cust-tbs-But-you-found-it-perform-poorly-and-buffer-busy-wait-is-much-higher-than-other-tables-on-other-tablespaces-and-the-segment-head-contention-occurs-Try-to-resolve-the-problem-but-large-query-should-be-maintained" class="headerlink" title="4.9 A junior dba create a table new_cust on tablespace cust_tbs. But you found it perform poorly and buffer busy wait is much higher than other tables on other tablespaces, and the segment head contention occurs. Try to resolve the problem but large query should be maintained."></a>4.9 A junior dba create a table new_cust on tablespace cust_tbs. But you found it perform poorly and buffer busy wait is much higher than other tables on other tablespaces, and the segment head contention occurs. Try to resolve the problem but large query should be maintained.</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/90971975.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/41253065.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/97129304.jpg" alt="3" title="">
                </div>
                <div class="image-caption">3</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/75616313.jpg" alt="4" title="">
                </div>
                <div class="image-caption">4</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/81989068.jpg" alt="5" title="">
                </div>
                <div class="image-caption">5</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/72442348.jpg" alt="6" title="">
                </div>
                <div class="image-caption">6</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/17365808.jpg" alt="7" title="">
                </div>
                <div class="image-caption">7</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/74777792.jpg" alt="8" title="">
                </div>
                <div class="image-caption">8</div>
            </figure>
<h4 id="4-10-The-Product-id-column-of-Product-information-part-table-is-composed-of-sequence-generation-requires-the-created-the-index-of-PROD-IDX-to-improve-the-insertion-performance"><a href="#4-10-The-Product-id-column-of-Product-information-part-table-is-composed-of-sequence-generation-requires-the-created-the-index-of-PROD-IDX-to-improve-the-insertion-performance" class="headerlink" title="4.10 The Product_id column of Product_information_part table is composed of sequence generation, requires the created the index of PROD_IDX, to improve the insertion performance."></a>4.10 The Product_id column of Product_information_part table is composed of sequence generation, requires the created the index of PROD_IDX, to improve the insertion performance.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">conn sh/sh</div><div class="line">CREATE INDEX PROD_IDX ON Product_information_part(Product_id) GLOBAL PARTITION BY HASH (Product_id) PARTITIONS 4;</div></pre></td></tr></table></figure>
<h4 id="4-11-Set-sh-sales-table-not-invalidate-dependent-cursors-when-do-statistics-collection"><a href="#4-11-Set-sh-sales-table-not-invalidate-dependent-cursors-when-do-statistics-collection" class="headerlink" title="4.11 Set sh.sales table not invalidate dependent cursors when do statistics collection."></a>4.11 Set sh.sales table not invalidate dependent cursors when do statistics collection.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">begin</div><div class="line">DBMS_STATS.SET_TABLE_PREFS (</div><div class="line">    ownname     =&gt; &apos;sh&apos;,</div><div class="line">    tabname     =&gt; &apos;sales&apos;,</div><div class="line">    pname       =&gt; &apos;NO_INVALIDATE&apos;,</div><div class="line">    pvalue      =&gt; &apos;true&apos;);  </div><div class="line">end;</div><div class="line">/</div></pre></td></tr></table></figure>
<h3 id="5-Use-Result-Cache"><a href="#5-Use-Result-Cache" class="headerlink" title="5. Use Result Cache"></a>5. <strong>Use Result Cache</strong></h3><h4 id="5-1-Setting-the-cache-15m-maximum"><a href="#5-1-Setting-the-cache-15m-maximum" class="headerlink" title="5.1 Setting the cache 15m maximum."></a>5.1 Setting the cache 15m maximum.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">conn / as sysdba</div><div class="line">alter system set result_cache_max_size=15m;</div></pre></td></tr></table></figure>
<h4 id="5-2-To-provide-a-SQL-script-contains-more-than-2-SQL-statements-the-request-to-amend-the-query-the-use-of-result-cache"><a href="#5-2-To-provide-a-SQL-script-contains-more-than-2-SQL-statements-the-request-to-amend-the-query-the-use-of-result-cache" class="headerlink" title="5.2 To provide a SQL script, contains more than 2 SQL statements, the request to amend the query, the use of result cache."></a>5.2 To provide a SQL script, contains more than 2 SQL statements, the request to amend the query, the use of result cache.</h4><p>select department_id,sum(salary) from employees group by department_id;<br>update employees set salary=salary+10 where department_id=20;<br>commit;<br>select department_id,sum(salary) from employees group by department_id;<br>update employees set salary=salary+10 where department_id=60;<br>commit;<br>select department_id,sum(salary) from employees group by department_id;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">conn hr/hr</div><div class="line">select /*+ result_Cache*/ department_id,sum(salary) from employees group by department_id;</div><div class="line">update employees set salary=salary+10 where department_id=20;</div><div class="line">commit;</div><div class="line">select /*+ result_Cache*/ department_id,sum(salary) from employees group by department_id;</div><div class="line">update employees set salary=salary+10 where department_id=60;</div><div class="line">commit;</div><div class="line">set autot trace exp</div><div class="line">select /*+ result_Cache*/ department_id,sum(salary) from employees group by department_id;</div><div class="line">conn / as sysdba</div><div class="line">select ID,TYPE,STATUS,NAME from v$result_cache_objects;</div></pre></td></tr></table></figure></p>
<h3 id="6-Use-multi-column-statistics"><a href="#6-Use-multi-column-statistics" class="headerlink" title="6. Use multi column statistics"></a>6. <strong>Use multi column statistics</strong></h3><h4 id="6-1-The-SQL-statement-suggesting-that-where-conditional-statements-in-columns-used-together-often-requirements-for-SQL-optimization"><a href="#6-1-The-SQL-statement-suggesting-that-where-conditional-statements-in-columns-used-together-often-requirements-for-SQL-optimization" class="headerlink" title="6.1 The SQL statement suggesting that where conditional statements in columns used together often, requirements for SQL optimization."></a>6.1 The SQL statement suggesting that where conditional statements in columns used together often, requirements for SQL optimization.</h4><h4 id="6-2-The-sample-SQL-is-as-follows"><a href="#6-2-The-sample-SQL-is-as-follows" class="headerlink" title="6.2 The sample SQL is as follows:"></a>6.2 The sample SQL is as follows:</h4><p> SELECT count(*) FROM customers WHERE cust_city= ‘BJ’ and cust_state_province=’CA’ and country_id=52790;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">conn sh/sh</div><div class="line">create index cust_mult_i on customers(cust_city,cust_state_province,country_id);</div></pre></td></tr></table></figure></p>
<h4 id="6-3-Among-them"><a href="#6-3-Among-them" class="headerlink" title="6.3 Among them:"></a>6.3 Among them:</h4><p>cust_city,cust_state_province,country_id in customers are often in where clause together,how to improve performance.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">conn / as sysdba</div><div class="line">begin</div><div class="line">DBMS_STATS.GATHER_TABLE_STATS(</div><div class="line">  ownname =&gt;&apos;SH&apos;,</div><div class="line">  tabname =&gt;&apos;CUSTOMERS&apos;,</div><div class="line">  METHOD_OPT =&gt;&apos;FOR ALL COLUMNS SIZE SKEWONLY FOR COLUMNS (cust_city,CUST_STATE_PROVINCE,COUNTRY_ID) SIZE SKEWONLY&apos;); </div><div class="line">end;</div><div class="line">/</div><div class="line">SELECT SYS.DBMS_STATS.SHOW_EXTENDED_STATS_NAME(&apos;sh&apos;,&apos;customers&apos;,&apos;(cust_city,cust_state_province,country_id)&apos;)col_group_name FROM DUAL;</div></pre></td></tr></table></figure></p>
<h3 id="7-Use-SQL-Performance-Analyze"><a href="#7-Use-SQL-Performance-Analyze" class="headerlink" title="7. Use SQL Performance Analyze"></a>7. <strong>Use SQL Performance Analyze</strong></h3><h4 id="7-1-From-the-10-2-migration-to-the-11g-environment-provides-a-dump-file-the-user-password-apps-Apps1234"><a href="#7-1-From-the-10-2-migration-to-the-11g-environment-provides-a-dump-file-the-user-password-apps-Apps1234" class="headerlink" title="7.1 From the 10.2 migration to the 11g environment, provides a dump file (the user password: apps/Apps1234),"></a>7.1 From the 10.2 migration to the 11g environment, provides a dump file (the user password: apps/Apps1234),</h4><p>Contains the Sql Tuning Set, requires the use of a tool for optimization in STS SQL, and the optimized SQL plan_table write in the execution plan</p>
<h4 id="7-2-Dump-file-location-for-home-oracle-scripts-the-file-appsandstage-dmp"><a href="#7-2-Dump-file-location-for-home-oracle-scripts-the-file-appsandstage-dmp" class="headerlink" title="7.2 Dump file location for: /home/oracle/scripts,the file :appsandstage.dmp."></a>7.2 Dump file location for: /home/oracle/scripts,the file :appsandstage.dmp.</h4><h4 id="7-3-Migration-from-10-2-0-1-to-11-1-0-7"><a href="#7-3-Migration-from-10-2-0-1-to-11-1-0-7" class="headerlink" title="7.3 Migration from 10.2.0.1 to 11.1.0.7"></a>7.3 Migration from 10.2.0.1 to 11.1.0.7</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">create directory TUNE_RESULT AS &apos;/home/oracle/scripts&apos;;</div></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/7698781.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/66365358.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/79877582.jpg" alt="3" title="">
                </div>
                <div class="image-caption">3</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/9401419.jpg" alt="4" title="">
                </div>
                <div class="image-caption">4</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/46467212.jpg" alt="5" title="">
                </div>
                <div class="image-caption">5</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/91261739.jpg" alt="6" title="">
                </div>
                <div class="image-caption">6</div>
            </figure>
<h3 id="8-Use-SQL-Plan-Management-feature"><a href="#8-Use-SQL-Plan-Management-feature" class="headerlink" title="8. Use SQL Plan Management feature"></a>8. <strong>Use SQL Plan Management feature</strong></h3><h4 id="8-1-To-provide-a-SQL-script-requirements-that-Envolve-SQL-Plan-Baseline-SQL-as-follows"><a href="#8-1-To-provide-a-SQL-script-requirements-that-Envolve-SQL-Plan-Baseline-SQL-as-follows" class="headerlink" title="8.1 To provide a SQL script, requirements that Envolve SQL Plan Baseline, SQL as follows:"></a>8.1 To provide a SQL script, requirements that Envolve SQL Plan Baseline, SQL as follows:</h4><p>select last_name from emp where employee_id=100;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">conn hr/hr</div><div class="line">select last_name from emp where employee_id=100;</div></pre></td></tr></table></figure></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/24177024.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/43053879.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/24309147.jpg" alt="3" title="">
                </div>
                <div class="image-caption">3</div>
            </figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">create index id_inx on emp(employee_id);</div><div class="line">select last_name from emp where employee_id=100;</div></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/38722159.jpg" alt="1" title="">
                </div>
                <div class="image-caption">1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/51630681.jpg" alt="2" title="">
                </div>
                <div class="image-caption">2</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-17/51859414.jpg" alt="3" title="">
                </div>
                <div class="image-caption">3</div>
            </figure>
<h4 id="9-Implement-instance-caging"><a href="#9-Implement-instance-caging" class="headerlink" title="9. Implement instance caging"></a>9. <strong>Implement instance caging</strong></h4><p>9.1 This host is only 2 CPU, for PROD1 and PROD2, so to prevent the occurrence of resource competition.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">export ORACLE_SID=PROD1</div><div class="line">sqlplus / as sysdba</div><div class="line">alter system set cpu_count=1;</div><div class="line">export ORACLE_SID=PROD2</div><div class="line">sqlplus / as sysdba</div><div class="line">alter system set cpu_count=1;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      ocm11g认证考试
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="oracle" scheme="https://aliennever.github.io/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>11gOCM-Skillset4</title>
    <link href="https://aliennever.github.io/2018/10/30/20181105OCM%20Skillset4/"/>
    <id>https://aliennever.github.io/2018/10/30/20181105OCM Skillset4/</id>
    <published>2018-10-30T04:00:00.000Z</published>
    <updated>2018-11-06T03:47:25.030Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Skillset-4"><a href="#Skillset-4" class="headerlink" title="Skillset 4"></a>Skillset 4</h1><h2 id="TASKS"><a href="#TASKS" class="headerlink" title="TASKS:"></a>TASKS:</h2><h3 id="1-Create-Additional-Buffer-Cache"><a href="#1-Create-Additional-Buffer-Cache" class="headerlink" title="1. Create Additional Buffer Cache"></a>1. <strong>Create Additional Buffer Cache</strong></h3><h4 id="1-1-set-up-the-db-16k-cache-size-Then-using-the-16K-cache-to-create-tablespace-Sga-16k-size-15m"><a href="#1-1-set-up-the-db-16k-cache-size-Then-using-the-16K-cache-to-create-tablespace-Sga-16k-size-15m" class="headerlink" title="1.1 set up the db_16k_cache_size (Then using the 16K cache to create tablespace) Sga 16k_size 15m"></a>1.1 set up the db_16k_cache_size (Then using the 16K cache to create tablespace) Sga 16k_size 15m</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">alter system set db_16k_cache_size=15m;</div><div class="line">create tablespace tbs_16k datafile &apos;/u01/app/oracle/oradata/PROD1/tbs_16k_02.dbf&apos; size 20m autoextend on blocksize 16k;</div></pre></td></tr></table></figure>
<h3 id="2-Administer-partitioned-tables-and-Manage-encrypted-tablespaces"><a href="#2-Administer-partitioned-tables-and-Manage-encrypted-tablespaces" class="headerlink" title="2.Administer partitioned tables and Manage encrypted tablespaces"></a>2.<strong>Administer partitioned tables and Manage encrypted tablespaces</strong></h3><h4 id="2-1-Create-a-reference-partition-table"><a href="#2-1-Create-a-reference-partition-table" class="headerlink" title="2.1 Create a reference partition table"></a>2.1 Create a reference partition table</h4><h5 id="2-1-1-new-orders-is-range-partition-table-You-need-to-create-table-order-items-using-reference-partition"><a href="#2-1-1-new-orders-is-range-partition-table-You-need-to-create-table-order-items-using-reference-partition" class="headerlink" title="2.1.1. new_orders is range partition table,You need to create table order_items using reference partition"></a>2.1.1. new_orders is range partition table,You need to create table order_items using reference partition</h5><h5 id="2-1-2-The-order-items-table-contains-such-as-the-following"><a href="#2-1-2-The-order-items-table-contains-such-as-the-following" class="headerlink" title="2.1.2. The order_items table contains such as the following:"></a>2.1.2. The order_items table contains such as the following:</h5><p>order_id number(12) not null,<br>line_item_id number(3) not null,<br>product_id number(6) not null,<br>unit_price number(8,2) not null,<br>quantity number(8) not null</p>
<h5 id="2-1-3-The-new-orders-table-partition-using-tablespace-tbs1-and-tbs2-requirements-the-order-items-table-partition-refer-to-new-orders-table-partition-tablespace-consistency"><a href="#2-1-3-The-new-orders-table-partition-using-tablespace-tbs1-and-tbs2-requirements-the-order-items-table-partition-refer-to-new-orders-table-partition-tablespace-consistency" class="headerlink" title="2.1.3. The new_orders table partition using tablespace tbs1 and tbs2, requirements the order_items table partition refer to new_orders table partition tablespace consistency"></a>2.1.3. The new_orders table partition using tablespace tbs1 and tbs2, requirements the order_items table partition refer to new_orders table partition tablespace consistency</h5><h5 id="2-1-4-Execute-the-script-insert-data-into-the-partition-table-as-follows"><a href="#2-1-4-Execute-the-script-insert-data-into-the-partition-table-as-follows" class="headerlink" title="2.1.4. Execute the script, insert data into the partition table, as follows::"></a>2.1.4. Execute the script, insert data into the partition table, as follows::</h5><p>insert into new_orders values(101,to_date(‘2005-02-03’,’yyyy-mm-dd’),’x1’,1001,1,20000,88001,88002);<br>insert into new_orders values(102,to_date(‘2005-05-15’,’yyyy-mm-dd’),’x1’,1002,1,30000,88002,88002);<br>insert into new_orders values(103,to_date(‘2005-09-22’,’yyyy-mm-dd’),’x1’,1003,1,40000,88003,88002);<br>insert into new_orders values(104,to_date(‘2005-12-30’,’yyyy-mm-dd’),’x1’,1004,1,10000,88004,88002);<br>insert into order_items values(101,801,200001,200,100);<br>insert into order_items values(102,802,200002,300,100);<br>insert into order_items values(103,803,200003,400,100);<br>insert into order_items values(104,804,200004,100,100);<br>commit;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">alter user sh identified by sh account unlock;</div><div class="line">CREATE TABLE sh.order_items</div><div class="line">  (order_id number(12) not null,</div><div class="line">   line_item_id number(3) not null,</div><div class="line">   product_id number(6) not null,</div><div class="line">   unit_price number(8,2) not null,</div><div class="line">   quantity number(8) not null, </div><div class="line">   CONSTRAINT order_items_fk</div><div class="line">   FOREIGN KEY(order_id) REFERENCES sh.new_orders(order_id)</div><div class="line">  )</div><div class="line">   PARTITION BY REFERENCE(order_items_fk);</div><div class="line">alter database datafile &apos;/u01/app/oracle/oradata/PROD1/tbs1_01.dbf&apos; autoextend on;</div><div class="line">alter database datafile &apos;/u01/app/oracle/oradata/PROD1/tbs2_01.dbf&apos; autoextend on;</div><div class="line">insert into sh.new_orders values(101,to_date(&apos;2005-02-03&apos;,&apos;yyyy-mm-dd&apos;),&apos;x1&apos;,1001,1,20000,88001,88002); </div><div class="line">insert into sh.new_orders values(102,to_date(&apos;2005-05-15&apos;,&apos;yyyy-mm-dd&apos;),&apos;x1&apos;,1002,1,30000,88002,88002); </div><div class="line">insert into sh.new_orders values(103,to_date(&apos;2005-09-22&apos;,&apos;yyyy-mm-dd&apos;),&apos;x1&apos;,1003,1,40000,88003,88002); </div><div class="line">insert into sh.new_orders values(104,to_date(&apos;2005-12-30&apos;,&apos;yyyy-mm-dd&apos;),&apos;x1&apos;,1004,1,10000,88004,88002); </div><div class="line">insert into sh.order_items values(101,801,200001,200,100);</div><div class="line">insert into sh.order_items values(102,802,200002,300,100);</div><div class="line">insert into sh.order_items values(103,803,200003,400,100);</div><div class="line">insert into sh.order_items values(104,804,200004,100,100);</div><div class="line">commit;</div></pre></td></tr></table></figure></p>
<h4 id="2-2-Create-interval-partition-table"><a href="#2-2-Create-interval-partition-table" class="headerlink" title="2.2 Create interval partition table"></a>2.2 Create interval partition table</h4><h5 id="2-2-1-Execute-the-script-to-create-4-tablespace-the-script-follows"><a href="#2-2-1-Execute-the-script-to-create-4-tablespace-the-script-follows" class="headerlink" title="2.2.1. Execute the script to create 4 tablespace, the script follows::"></a>2.2.1. Execute the script to create 4 tablespace, the script follows::</h5><p>create tablespace SALES_TBS1 datafile ‘/u01/app/oracle/oradata/PROD1/sales_tbs1_01.dbf’ size 10m autoextend on;<br>create tablespace SALES_TBS2 datafile ‘/u01/app/oracle/oradata/PROD1/sales_tbs2_01.dbf’ size 10m autoextend on;<br>create tablespace SALES_TBS3 datafile ‘/u01/app/oracle/oradata/PROD1/sales_tbs3_01.dbf’ size 10m autoextend on;<br>create tablespace SALES_TBS4 datafile ‘/u01/app/oracle/oradata/PROD1/sales_tbs4_01.dbf’ size 10m autoextend on;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">conn / as sysdba</div><div class="line">create tablespace SALES_TBS1 datafile &apos;/u01/app/oracle/oradata/PROD1/sales_tbs1_01.dbf&apos; size 10m autoextend on;</div><div class="line">create tablespace SALES_TBS2 datafile &apos;/u01/app/oracle/oradata/PROD1/sales_tbs2_01.dbf&apos; size 10m autoextend on;</div><div class="line">create tablespace SALES_TBS3 datafile &apos;/u01/app/oracle/oradata/PROD1/sales_tbs3_01.dbf&apos; size 10m autoextend on;</div><div class="line">create tablespace SALES_TBS4 datafile &apos;/u01/app/oracle/oradata/PROD1/sales_tbs4_01.dbf&apos; size 10m autoextend on;</div></pre></td></tr></table></figure></p>
<h5 id="2-2-2-Partition-table-has-4-range-partitioning-respectively-contained-2002-2003-2004-2005-data-and-the-4-partition-tablespace-is-respectively-the-4-tablespace-in-front-of-the-establishment"><a href="#2-2-2-Partition-table-has-4-range-partitioning-respectively-contained-2002-2003-2004-2005-data-and-the-4-partition-tablespace-is-respectively-the-4-tablespace-in-front-of-the-establishment" class="headerlink" title="2.2.2. Partition table has 4 range partitioning, respectively contained 2002,2003,2004,2005 data, and the 4 partition tablespace is respectively the 4 tablespace in front of the establishment;"></a>2.2.2. Partition table has 4 range partitioning, respectively contained 2002,2003,2004,2005 data, and the 4 partition tablespace is respectively the 4 tablespace in front of the establishment;</h5><h5 id="2-2-3-the-partition-is-interval-of-1-years"><a href="#2-2-3-the-partition-is-interval-of-1-years" class="headerlink" title="2.2.3. the partition is interval of 1 years;"></a>2.2.3. the partition is interval of 1 years;</h5><h5 id="2-2-4-The-name-of-the-table-is-newsales-partitioning-key-is-time-id-contains-a-column-as-follows"><a href="#2-2-4-The-name-of-the-table-is-newsales-partitioning-key-is-time-id-contains-a-column-as-follows" class="headerlink" title="2.2.4. The name of the table is newsales, partitioning key is time_id, contains a column as follows:"></a>2.2.4. The name of the table is newsales, partitioning key is time_id, contains a column as follows:</h5><p>prod_id number(6) not null,<br>cust_id number,<br>time_id date,<br>channel_id char(1),<br>promo_id number(6) not null,<br>quantity_sold number(3) not null,<br>amount_sold number(10,2) not null<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE sh.newsales</div><div class="line">(</div><div class="line">prod_id        NUMBER(6) NOT NULL,</div><div class="line">cust_id        NUMBER,</div><div class="line">time_id        DATE,</div><div class="line">channel_id     CHAR(1),</div><div class="line">promo_id       NUMBER(6) NOT NULL,</div><div class="line">quantity_sold  NUMBER(3) NOT NULL,</div><div class="line">amount_sold    NUMBER(10,2) NOT NULL</div><div class="line">)</div><div class="line">PARTITION BY RANGE(time_id)</div><div class="line">INTERVAL(NUMTOYMINTERVAL(1, &apos;YEAR&apos;))</div><div class="line">STORE IN (SALES_TBS1,SALES_TBS2,SALES_TBS3,SALES_TBS4)</div><div class="line">( PARTITION p0 VALUES LESS THAN (TO_DATE(&apos;1-1-2003&apos;, &apos;DD-MM-YYYY&apos;)) tablespace SALES_TBS1,</div><div class="line">  PARTITION p1 VALUES LESS THAN (TO_DATE(&apos;1-1-2004&apos;, &apos;DD-MM-YYYY&apos;)) tablespace SALES_TBS2,</div><div class="line">  PARTITION p2 VALUES LESS THAN (TO_DATE(&apos;1-7-2005&apos;, &apos;DD-MM-YYYY&apos;)) tablespace SALES_TBS3,</div><div class="line">  PARTITION p3 VALUES LESS THAN (TO_DATE(&apos;1-1-2006&apos;, &apos;DD-MM-YYYY&apos;)) tablespace SALES_TBS4);</div></pre></td></tr></table></figure></p>
<h5 id="2-2-5-Execute-the-script-insert-data-into-the-partition-table-scripts-are-as-follows"><a href="#2-2-5-Execute-the-script-insert-data-into-the-partition-table-scripts-are-as-follows" class="headerlink" title="2.2.5. Execute the script, insert data into the partition table, scripts are as follows:"></a>2.2.5. Execute the script, insert data into the partition table, scripts are as follows:</h5><p>insert into sh.newsales values(908001,101,to_date(‘2002-8-10’,’yyyy-mm-dd’),’a’,88001,100,200);<br>insert into sh.newsales values(908002,102,to_date(‘2003-7-10’,’yyyy-mm-dd’),’a’,88002,100,800);<br>insert into sh.newsales values(908003,103,to_date(‘2004-5-30’,’yyyy-mm-dd’),’a’,88003,100,700);<br>insert into sh.newsales values(908004,104,to_date(‘2005-12-10’,’yyyy-mm-dd’),’a’,88004,100,600);<br>insert into sh.newsales values(908005,105,to_date(‘2007-11-14’,’yyyy-mm-dd’),’a’,88005,100,500);<br>commit;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">insert into sh.newsales values(908001,101,to_date(&apos;2002-8-10&apos;,&apos;yyyy-mm-dd&apos;),&apos;a&apos;,88001,100,200); </div><div class="line">insert into sh.newsales values(908002,102,to_date(&apos;2003-7-10&apos;,&apos;yyyy-mm-dd&apos;),&apos;a&apos;,88002,100,800); </div><div class="line">insert into sh.newsales values(908003,103,to_date(&apos;2004-5-30&apos;,&apos;yyyy-mm-dd&apos;),&apos;a&apos;,88003,100,700); </div><div class="line">insert into sh.newsales values(908004,104,to_date(&apos;2005-12-10&apos;,&apos;yyyy-mm-dd&apos;),&apos;a&apos;,88004,100,600); </div><div class="line">insert into sh.newsales values(908005,105,to_date(&apos;2007-11-14&apos;,&apos;yyyy-mm-dd&apos;),&apos;a&apos;,88005,100,500); </div><div class="line">commit;</div><div class="line">conn sh/sh</div><div class="line">set long 10000</div><div class="line">set lines 160</div><div class="line">set pages 500</div><div class="line">select dbms_metadata.get_ddl(&apos;TABLE&apos;,&apos;NEWSALES&apos;) FROM DUAL;</div></pre></td></tr></table></figure></p>
<h4 id="2-3-Create-and-Manage-encrypted-tablespaces"><a href="#2-3-Create-and-Manage-encrypted-tablespaces" class="headerlink" title="2.3 Create and Manage encrypted tablespaces"></a>2.3 Create and Manage encrypted tablespaces</h4><h5 id="2-3-1-Create-the-encrypted-tablespace-in-PROD3"><a href="#2-3-1-Create-the-encrypted-tablespace-in-PROD3" class="headerlink" title="2.3.1 Create the encrypted tablespace in PROD3:"></a>2.3.1 Create the encrypted tablespace in PROD3:</h5><h5 id="2-3-2-Execute-the-given-script-home-oracle-scripts-sec-tbs-sql-which-has-created-the-user-statement-and-temporary-tablespace-name-is-temp"><a href="#2-3-2-Execute-the-given-script-home-oracle-scripts-sec-tbs-sql-which-has-created-the-user-statement-and-temporary-tablespace-name-is-temp" class="headerlink" title="2.3.2 Execute the given script (/home/oracle/scripts/sec_tbs.sql), which has created the user statement, and temporary tablespace name is temp"></a>2.3.2 Execute the given script (/home/oracle/scripts/sec_tbs.sql), which has created the user statement, and temporary tablespace name is temp</h5><h5 id="2-3-3-The-two-table-belongs-to-the-SH-into-the-encryption-tablespace"><a href="#2-3-3-The-two-table-belongs-to-the-SH-into-the-encryption-tablespace" class="headerlink" title="2.3.3 The two table belongs to the SH into the encryption tablespace."></a>2.3.3 The two table belongs to the SH into the encryption tablespace.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">scp /home/oracle/scripts/sec_tbs.sql oracle@edbjr2p2:/home/oracle</div><div class="line">export ORACLE_SID=PROD3</div><div class="line">sqlplus / as sysdba</div><div class="line">select * from v$encryption_wallet;</div><div class="line">mkdir -p /u01/app/oracle/admin/PROD3/wallet</div><div class="line">alter system set encryption key identified by oracle;</div><div class="line">select * from v$encryption_wallet;</div><div class="line">CREATE TABLESPACE secur_tb DATAFILE &apos;$ORACLE_BASE/oradata/PROD3/secur_tb01.dbf&apos; SIZE 50M ENCRYPTION DEFAULT STORAGE(ENCRYPT);</div><div class="line">@/home/oracle/sec_tbs.sql</div><div class="line">alter table sh.SEC_TEST1 move tablespace secur_tb;</div><div class="line">alter table sh.CIH_TEST1 move tablespace secur_tb;</div><div class="line">conn sh/sh</div><div class="line">select segment_name,tablespace_name from user_extents where segment_name in (&apos;SEC_TEST1&apos;,&apos;CIH_TEST1&apos;);</div></pre></td></tr></table></figure>
<h3 id="3-Create-and-manage-LOB"><a href="#3-Create-and-manage-LOB" class="headerlink" title="3. Create and manage LOB"></a>3. <strong>Create and manage LOB</strong></h3><h4 id="3-1-Implement-securefile-LOB"><a href="#3-1-Implement-securefile-LOB" class="headerlink" title="3.1 Implement securefile LOB"></a>3.1 Implement securefile LOB</h4><h5 id="3-1-1-Create-a-tablespace-Use-the-following-specifications"><a href="#3-1-1-Create-a-tablespace-Use-the-following-specifications" class="headerlink" title="3.1.1. Create a tablespace,Use the following specifications:"></a>3.1.1. Create a tablespace,Use the following specifications:</h5><p>File size of 150MB.<br>Initial extent size of 64MB.<br>next extent size of 64MB.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">create tablespace lob_tb datafile &apos;$ORACLE_BASE/oradata/PROD1/lob_tb01.dbf&apos; size 150M autoextend on uniform size 64m;</div></pre></td></tr></table></figure></p>
<h5 id="3-1-2-Create-a-new-table-in-the-HR-schema-in-the-PROD1-database-with-the-following-specifications"><a href="#3-1-2-Create-a-new-table-in-the-HR-schema-in-the-PROD1-database-with-the-following-specifications" class="headerlink" title="3.1.2. Create a new table in the HR schema in the PROD1 database with the following specifications:"></a>3.1.2. Create a new table in the HR schema in the PROD1 database with the following specifications:</h5><p>Table name TEST_SPEC<br>Column names:<br>    ID NUMBER<br>    DOC BLOB<br>LOB Tablespace using created before<br>Use the deduplicate option and compress high option.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">alter system set db_securefile=permitted;</div><div class="line">create table HR.TEST_SPEC(ID NUMBER,DOC BLOB) </div><div class="line">tablespace lob_tb</div><div class="line">LOB(DOC) STORE AS SECUREFILE (</div><div class="line">	COMPRESS HIGH</div><div class="line">    deduplicate</div><div class="line">    CACHE</div><div class="line">    NOLOGGING</div><div class="line">    );</div></pre></td></tr></table></figure></p>
<h5 id="3-1-3-Load-data-into-the-TEST-SPEC-using-the-script-name-of-securelob-sp-sql"><a href="#3-1-3-Load-data-into-the-TEST-SPEC-using-the-script-name-of-securelob-sp-sql" class="headerlink" title="3.1.3. Load data into the TEST_SPEC,using the script name of securelob_sp.sql"></a>3.1.3. Load data into the TEST_SPEC,using the script name of securelob_sp.sql</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">grant create any directory to hr;</div><div class="line">conn hr/hr</div><div class="line">@securelob_sp.sql</div><div class="line">create or replace directory dir_dmp as &apos;/home/oracle/scripts&apos;;</div><div class="line">exec sp_imp_blob;</div><div class="line">select * from TEST_SPEC where rownum&lt;3;</div></pre></td></tr></table></figure>
<h4 id="3-2-Implement-BasicFiles-LOB"><a href="#3-2-Implement-BasicFiles-LOB" class="headerlink" title="3.2 Implement BasicFiles LOB"></a>3.2 Implement BasicFiles LOB</h4><h5 id="3-2-1-Create-a-new-table-in-the-HR-schema-in-the-PROD1-database-with-the-following-specifications"><a href="#3-2-1-Create-a-new-table-in-the-HR-schema-in-the-PROD1-database-with-the-following-specifications" class="headerlink" title="3.2.1 Create a new table in the HR schema in the PROD1 database with the following specifications:"></a>3.2.1 Create a new table in the HR schema in the PROD1 database with the following specifications:</h5><h5 id="3-2-2-Table-name-MAGAZINE-ARTICLES"><a href="#3-2-2-Table-name-MAGAZINE-ARTICLES" class="headerlink" title="3.2.2 Table name MAGAZINE_ARTICLES"></a>3.2.2 Table name MAGAZINE_ARTICLES</h5><p>Tablespace USERS<br>Column names:<br>    AUTHOR VARCHAR2(30)<br>    ARTICLE_NAME VARCHAR2(50)<br>    ARTICLE_DATE DATE<br>    ARTICLE_DATA CLOB</p>
<h5 id="3-2-3-Tablespace-LOB-DATA-with-a-16KB-chunk-size-initial-and-next-extents-each-with-a-size-of-2MB"><a href="#3-2-3-Tablespace-LOB-DATA-with-a-16KB-chunk-size-initial-and-next-extents-each-with-a-size-of-2MB" class="headerlink" title="3.2.3 Tablespace LOB_DATA with a 16KB chunk size,initial and next extents each with a size of 2MB."></a>3.2.3 Tablespace LOB_DATA with a 16KB chunk size,initial and next extents each with a size of 2MB.</h5><h5 id="3-2-4-Use-the-nocache-option-and-disable-storage-in-row"><a href="#3-2-4-Use-the-nocache-option-and-disable-storage-in-row" class="headerlink" title="3.2.4 Use the nocache option and disable storage in row."></a>3.2.4 Use the nocache option and disable storage in row.</h5><h5 id="3-2-5-Use-import-dump-to-populate-the-HR-MAGAZINE-ARTICLES-table-with-data-from-the-exp-mag-dmp-file"><a href="#3-2-5-Use-import-dump-to-populate-the-HR-MAGAZINE-ARTICLES-table-with-data-from-the-exp-mag-dmp-file" class="headerlink" title="3.2.5 Use import dump to populate the HR.MAGAZINE_ARTICLES table with data from the exp_mag.dmp file."></a>3.2.5 Use import dump to populate the HR.MAGAZINE_ARTICLES table with data from the exp_mag.dmp file.</h5><p>(/home/oracle/scripts/exp_mag.dmp)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">create tablespace LOB_DATA datafile &apos;$ORACLE_BASE/oradata/PROD1/lob_data01.dbf&apos; size 50m uniform size 2m;</div><div class="line">create table HR.MAGAZINE_ARTICLES(</div><div class="line">  AUTHOR VARCHAR2(30),</div><div class="line">  ARTICLE_NAME VARCHAR2(50),</div><div class="line">  ARTICLE_DATE DATE,</div><div class="line">  ARTICLE_DATA CLOB</div><div class="line">) lob(ARTICLE_DATA) STORE AS BASICFILE</div><div class="line">( Tablespace LOB_DATA chunk 16k</div><div class="line">storage(initial 2m next 2m)</div><div class="line">nocache</div><div class="line">disable storage in row);</div><div class="line">create directory TUNE_RESULTS as &apos;/home/oracle/scripts&apos;;</div><div class="line">impdp system DIRECTORY=TUNE_RESULTS DUMPFILE=exp_mag.dmp log=imp.log TABLE_EXISTS_ACTION=APPEND</div><div class="line">select count(*) from HR.MAGAZINE_ARTICLES;</div></pre></td></tr></table></figure></p>
<h3 id="4-Implement-fine-grained-access-control-Fine-Grained-Auditing"><a href="#4-Implement-fine-grained-access-control-Fine-Grained-Auditing" class="headerlink" title="4. Implement fine-grained access control (Fine-Grained Auditing)"></a>4. <strong>Implement fine-grained access control (Fine-Grained Auditing)</strong></h3><h4 id="4-1-Set-up-FGA-on-the-SALARY-and-COMMISSION-PCT-columns-of-the-EMPLOYEES-table-in-the-HR-schema-of-the-PROD1"><a href="#4-1-Set-up-FGA-on-the-SALARY-and-COMMISSION-PCT-columns-of-the-EMPLOYEES-table-in-the-HR-schema-of-the-PROD1" class="headerlink" title="4.1 Set up FGA on the SALARY and COMMISSION_PCT columns of the EMPLOYEES table in the HR schema of the PROD1"></a>4.1 Set up FGA on the SALARY and COMMISSION_PCT columns of the EMPLOYEES table in the HR schema of the PROD1</h4><p>database. An audit record should be created if either of these two columns are selected as part of the output of a query or are used in the where condition of a select statement and their values are not null.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">begin</div><div class="line">   DBMS_FGA.ADD_POLICY (</div><div class="line">   object_schema      =&gt;  &apos;HR&apos;, </div><div class="line">   object_name        =&gt;  &apos;EMPLOYEES&apos;, </div><div class="line">   policy_name        =&gt;  &apos;HR_EMP_Policy1&apos;, </div><div class="line">   audit_condition    =&gt;  &apos;(SALARY is not null) and (COMMISSION_PCT is not null)&apos;, </div><div class="line">   audit_column       =&gt;  &apos;SALARY,COMMISSION_PCT&apos;, </div><div class="line">   handler_schema     =&gt;   NULL, </div><div class="line">   handler_module     =&gt;   NULL, </div><div class="line">   enable             =&gt;   TRUE, </div><div class="line">   statement_types    =&gt;  &apos;SELECT&apos;,  </div><div class="line">   audit_column_opts  =&gt;   DBMS_FGA.ANY_COLUMNS); </div><div class="line">end;</div><div class="line">/</div></pre></td></tr></table></figure></p>
<h4 id="4-2-Validate-that-the-FGA-is-taking-place-by-executing-statements-that-should-result-in-auditing-records-being-created-and-by-executing-statements-where-no-auditing-records-will-be-generated-Do-not-delete-your-audit-records"><a href="#4-2-Validate-that-the-FGA-is-taking-place-by-executing-statements-that-should-result-in-auditing-records-being-created-and-by-executing-statements-where-no-auditing-records-will-be-generated-Do-not-delete-your-audit-records" class="headerlink" title="4.2 Validate that the FGA is taking place by executing statements that should result in auditing records being created and by executing statements where no auditing records will be generated. Do not delete your audit records."></a>4.2 Validate that the FGA is taking place by executing statements that should result in auditing records being created and by executing statements where no auditing records will be generated. Do not delete your audit records.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">conn hr/hr</div><div class="line">select * from employees;</div><div class="line">select * from employees where SALARY is not null;</div><div class="line">select * from employees where COMMISSION_PCT is null;</div><div class="line">select * from employees where SALARY is not null and COMMISSION_PCT is null;</div><div class="line">conn / as sysdba</div><div class="line">SELECT DBUID, LSQLTEXT, NTIMESTAMP# FROM SYS.FGA_LOG$;</div></pre></td></tr></table></figure>
<h3 id="5-Administer-flashback-data"><a href="#5-Administer-flashback-data" class="headerlink" title="5. Administer flashback data"></a>5. <strong>Administer flashback data</strong></h3><h4 id="5-1-Create-a-table-named-ORIGINAL-SALARY-in-the-HR-schema-in-the-PROD1-database-that-includes-the-employee-id-commission-pct-and-salary-of-all-records-in-the-HR-EMPLOYEES-table-Note-the-date-and-time-and-then-commit-the-changes"><a href="#5-1-Create-a-table-named-ORIGINAL-SALARY-in-the-HR-schema-in-the-PROD1-database-that-includes-the-employee-id-commission-pct-and-salary-of-all-records-in-the-HR-EMPLOYEES-table-Note-the-date-and-time-and-then-commit-the-changes" class="headerlink" title="5.1  Create a table named ORIGINAL_SALARY in the HR schema in the PROD1 database that includes the employee_id,commission_pct and salary of all records in the HR.EMPLOYEES table.Note the date and time and then commit the changes."></a>5.1  Create a table named ORIGINAL_SALARY in the HR schema in the PROD1 database that includes the employee_id,commission_pct and salary of all records in the HR.EMPLOYEES table.Note the date and time and then commit the changes.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">create table hr.ORIGINAL_SALARY as select employee_id,commission_pct, salary from HR.EMPLOYEES;</div><div class="line">commit;</div><div class="line">select current_date from dual;</div></pre></td></tr></table></figure>
<h4 id="5-2-Delete-all-employees-in-the-HR-ORIGINAL-SALARY-table-whose-HIRE-DATE-is-before-1994-Commit-the-changes"><a href="#5-2-Delete-all-employees-in-the-HR-ORIGINAL-SALARY-table-whose-HIRE-DATE-is-before-1994-Commit-the-changes" class="headerlink" title="5.2  Delete all employees in the HR.ORIGINAL_SALARY table whose HIRE_DATE is before 1994. Commit the changes."></a>5.2  Delete all employees in the HR.ORIGINAL_SALARY table whose HIRE_DATE is before 1994. Commit the changes.</h4><p>Create a view HR.SALARY_VIEW that will show all the original rows before the deletion.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">delete HR.ORIGINAL_SALARY where employee_id in (select employee_id from hr.employees where HIRE_DATE &lt; to_date(&apos;1984-01-01&apos;,&apos;YYYY-MM-DD&apos;));</div><div class="line">commit;</div><div class="line">alter session set nls_date_format=&apos;YYYY-MM-DD HH24:MI:SS&apos;;</div><div class="line">select sysdate from dual;</div><div class="line">SELECT * FROM hr.ORIGINAL_SALARY;</div><div class="line">select versions_startscn,versions_endscn,versions_operation,employee_id from hr.ORIGINAL_SALARY versions between timestamp to_timestamp(&apos;2018-11-02 17:11:00&apos;,&apos;YYYY-MM-DD HH24:MI:SS&apos;) and to_timestamp(&apos;2018-11-02 17:11:01&apos;,&apos;YYYY-MM-DD HH24:MI:SS&apos;);</div><div class="line">create view HR.SALARY_VIEW as select * from HR.ORIGINAL_SALARY as of scn 1216763;</div><div class="line">select * from hr.salary_view;</div></pre></td></tr></table></figure></p>
<h4 id="5-3-A-hr-schema-table-DEPARTMENTS-NEW-was-repeatedly-asked-DROP-return-to-the-specified-data-version-table-include-department-name-column-tablespace-dev-data"><a href="#5-3-A-hr-schema-table-DEPARTMENTS-NEW-was-repeatedly-asked-DROP-return-to-the-specified-data-version-table-include-department-name-column-tablespace-dev-data" class="headerlink" title="5.3  A hr schema table(DEPARTMENTS_NEW) was repeatedly asked DROP, return to the specified data version table include department_name column tablespace:dev_data"></a>5.3  A hr schema table(DEPARTMENTS_NEW) was repeatedly asked DROP, return to the specified data version table include department_name column tablespace:dev_data</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">conn hr/hr</div><div class="line">show recyc</div><div class="line">desc &quot;BIN$eWjjkDs5E5bgU4AoqMCJMw==$0&quot;</div><div class="line">desc &quot;BIN$eWjjkDs7E5bgU4AoqMCJMw==$0&quot;</div><div class="line">desc &quot;BIN$eWjjkDs3E5bgU4AoqMCJMw==$0&quot;</div><div class="line">flashback table &quot;BIN$eWjjkDs3E5bgU4AoqMCJMw==$0&quot; to before drop;</div><div class="line">desc DEPARTMENTS_NEW</div></pre></td></tr></table></figure>
<h3 id="5-4-Flashback-archive"><a href="#5-4-Flashback-archive" class="headerlink" title="5.4  Flashback archive"></a>5.4  Flashback archive</h3><h4 id="5-4-1-Create-a-new-tablespace-name-of-FRATBS-file-size-of-50MB"><a href="#5-4-1-Create-a-new-tablespace-name-of-FRATBS-file-size-of-50MB" class="headerlink" title="5.4.1 Create a new tablespace name of FRATBS, file size of 50MB."></a>5.4.1 Create a new tablespace name of FRATBS, file size of 50MB.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">conn / as sysdba</div><div class="line">create tablespace FRATBS datafile &apos;$ORACLE_BASE/oradata/PROD1/fratbs01.dbf&apos; size 50M;</div></pre></td></tr></table></figure>
<h4 id="5-4-2-Create-Flashback-Data-Archive-name-of-fra1-using-the-tablespace-name-of-FRATBS-The-archive-administrator-name-of-FR-ADMIN"><a href="#5-4-2-Create-Flashback-Data-Archive-name-of-fra1-using-the-tablespace-name-of-FRATBS-The-archive-administrator-name-of-FR-ADMIN" class="headerlink" title="5.4.2 Create Flashback Data Archive name of fra1,using the tablespace name of FRATBS,The archive administrator name of FR_ADMIN."></a>5.4.2 Create Flashback Data Archive name of fra1,using the tablespace name of FRATBS,The archive administrator name of FR_ADMIN.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">create user fr_admin identified by oracle;</div><div class="line">grant connect,resource to fr_admin;</div><div class="line">grant flashback archive administer to fr_admin;</div><div class="line">create Flashback Archive fra1 tablespace FRATBS retention 1 year;</div></pre></td></tr></table></figure>
<h4 id="5-4-3-Enable-Flashback-Data-Archive-for-a-table-name-of-SH-PROMOTIONS-and-includes-data-that-will-be-retained-for-one-years"><a href="#5-4-3-Enable-Flashback-Data-Archive-for-a-table-name-of-SH-PROMOTIONS-and-includes-data-that-will-be-retained-for-one-years" class="headerlink" title="5.4.3 Enable Flashback Data Archive for a table name of SH.PROMOTIONS, and includes data that will be retained for one years."></a>5.4.3 Enable Flashback Data Archive for a table name of SH.PROMOTIONS, and includes data that will be retained for one years.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter table SH.PROMOTIONS flashback archive fra1;</div></pre></td></tr></table></figure>
<h4 id="5-4-4-Examine-the-contents-of-the-table-SH-PROMOTIONS-that-before-existed-20-minutes-to-1-minutes"><a href="#5-4-4-Examine-the-contents-of-the-table-SH-PROMOTIONS-that-before-existed-20-minutes-to-1-minutes" class="headerlink" title="5.4.4 Examine the contents of the table SH.PROMOTIONS that before existed 20 minutes to 1 minutes."></a>5.4.4 Examine the contents of the table SH.PROMOTIONS that before existed 20 minutes to 1 minutes.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">select count(*) from SH.PROMOTIONS versions between timestamp (systimestamp-interval &apos;20&apos; minute) and (systimestamp-interval &apos;1&apos; minute);</div></pre></td></tr></table></figure>
<h4 id="5-4-5-Execute-the-s4-1-sql-script"><a href="#5-4-5-Execute-the-s4-1-sql-script" class="headerlink" title="5.4.5 Execute the s4_1.sql script."></a>5.4.5 Execute the s4_1.sql script.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@/home/oracle/scripts/s4_1.sql</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      ocm11g认证考试
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="oracle" scheme="https://aliennever.github.io/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>11gOCM-Skillset3</title>
    <link href="https://aliennever.github.io/2018/10/29/20181029OCM%20Skillset3/"/>
    <id>https://aliennever.github.io/2018/10/29/20181029OCM Skillset3/</id>
    <published>2018-10-29T04:00:00.000Z</published>
    <updated>2018-11-15T02:14:47.033Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Skillset-3"><a href="#Skillset-3" class="headerlink" title="Skillset 3"></a>Skillset 3</h1><h2 id="TASKS"><a href="#TASKS" class="headerlink" title="TASKS:"></a>TASKS:</h2><h3 id="1-PROD2-is-corrupted-Implicit-subject"><a href="#1-PROD2-is-corrupted-Implicit-subject" class="headerlink" title="1. PROD2 is corrupted(Implicit subject)"></a>1. <strong>PROD2 is corrupted(Implicit subject)</strong></h3><h4 id="1-1-Redo-log-is-deleted"><a href="#1-1-Redo-log-is-deleted" class="headerlink" title="1.1 Redo log is deleted."></a>1.1 Redo log is deleted.</h4><h4 id="1-2-The-datafile-in-the-tablespace-of-users-is-deleted"><a href="#1-2-The-datafile-in-the-tablespace-of-users-is-deleted" class="headerlink" title="1.2 The datafile in the tablespace of users is deleted."></a>1.2 The datafile in the tablespace of users is deleted.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">rman target / catalog rcowner/rc@PROD4</div><div class="line">list failure;</div><div class="line">advise failure;</div><div class="line">repair failure;</div></pre></td></tr></table></figure>
<h3 id="2-Create-DBLINK"><a href="#2-Create-DBLINK" class="headerlink" title="2. Create DBLINK"></a>2. <strong>Create DBLINK</strong></h3><h4 id="2-1-Create-DBLINK-should-query-on-the-PROD2-database-all-the-table-under-the-system-user-in-the-PROD1-Database"><a href="#2-1-Create-DBLINK-should-query-on-the-PROD2-database-all-the-table-under-the-system-user-in-the-PROD1-Database" class="headerlink" title="2.1 Create DBLINK, should query on the PROD2 database all the table under the system user in the PROD1 Database."></a>2.1 Create DBLINK, should query on the PROD2 database all the table under the system user in the PROD1 Database.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">create database link prod2_l connect to system identified by oracle using &apos;prod2&apos;;</div><div class="line">select * from hr.jobs@prod2_l;</div></pre></td></tr></table></figure>
<h3 id="3-Manage-Materialized-Views-to-improve-rewrite-and-refresh-performance"><a href="#3-Manage-Materialized-Views-to-improve-rewrite-and-refresh-performance" class="headerlink" title="3. Manage Materialized Views to improve rewrite and refresh performance"></a>3. <strong>Manage Materialized Views to improve rewrite and refresh performance</strong></h3><h4 id="3-1-Adjust-the-materialized-view-prod-cost-mv-statement-to-support-the-refresh-fast-and-query-rewrite"><a href="#3-1-Adjust-the-materialized-view-prod-cost-mv-statement-to-support-the-refresh-fast-and-query-rewrite" class="headerlink" title="3.1 Adjust the materialized view(prod_cost_mv) statement, to support the refresh fast and query rewrite"></a>3.1 Adjust the materialized view(prod_cost_mv) statement, to support the refresh fast and query rewrite</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">alter user hr identified by hr account unlock;</div><div class="line">select OWNER,MVIEW_NAME from dba_mviews where MVIEW_NAME=&apos;PROD_COST_MV&apos;;</div><div class="line">set long 1000;</div><div class="line">select QUERY from dba_mviews where MVIEW_NAME=&apos;PROD_COST_MV&apos;;</div><div class="line">CREATE DIRECTORY TUNE_RESULTS AS  &apos;/home/oracle/scripts&apos;;</div><div class="line">alter system set query_rewrite_enabled=true;</div></pre></td></tr></table></figure>
<ul>
<li>使用dbms_advisor生成建视图的语句:<br>VARIABLE task_cust_mv VARCHAR2(30);<br>VARIABLE create_mv_ddl VARCHAR2(4000);<br>EXECUTE :task_cust_mv := ‘cust_mv’;<br>EXECUTE :create_mv_ddl := ‘CREATE MATERIALIZED VIEW cust_mv REFRESH FAST DISABLE QUERY REWRITE AS SELECT time_id, prod_subcategory,SUM( unit_cost) AS sum_units FROM sh.costs c, sh.products p WHERE c.prod_id = p.prod_id GROUP BY time_id, prod_subcategory’;<br>EXECUTE DBMS_ADVISOR.TUNE_MVIEW(:task_cust_mv, :create_mv_ddl);<br>set pagesize 100;<br>SELECT STATEMENT FROM DBA_TUNE_MVIEW WHERE TASK_NAME=’cust_mv’;<br>DROP MATERIALIZED VIEW SH.PROD_COST_MV;<br>vi mv_create.sql   修改以上查询结果：表名改为sh.prod_cost_mv  开启查询重写ENABLE QUERY REWRITE<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">CREATE MATERIALIZED VIEW LOG ON</div><div class="line">    &quot;SH&quot;.&quot;COSTS&quot;</div><div class="line">    WITH ROWID, SEQUENCE(&quot;PROD_ID&quot;,&quot;TIME_ID&quot;,&quot;UNIT_COST&quot;)</div><div class="line">    INCLUDING NEW VALUES;</div><div class="line">CREATE MATERIALIZED VIEW LOG ON </div><div class="line">    &quot;SH&quot;.&quot;COSTS&quot; </div><div class="line">    WITH ROWID, SEQUENCE (&quot;PROD_ID&quot;,&quot;TIME_ID&quot;,&quot;UNIT_COST&quot;)  </div><div class="line">    INCLUDING NEW VALUES；</div><div class="line">ALTER MATERIALIZED VIEW LOG FORCE ON</div><div class="line">    &quot;SH&quot;.&quot;COSTS&quot;</div><div class="line">    ADD ROWID, SEQUENCE(&quot;PROD_ID&quot;,&quot;TIME_ID&quot;,&quot;UNIT_COST&quot;)</div><div class="line">    INCLUDING NEW VALUES;</div><div class="line">CREATE MATERIALIZED VIEW LOG ON</div><div class="line">    &quot;SH&quot;.&quot;PRODUCTS&quot;</div><div class="line">    WITH ROWID, SEQUENCE(&quot;PROD_ID&quot;,&quot;PROD_SUBCATEGORY&quot;)</div><div class="line">    INCLUDING NEW VALUES;</div><div class="line">ALTER MATERIALIZED VIEW LOG FORCE ON</div><div class="line">    &quot;SH&quot;.&quot;PRODUCTS&quot;</div><div class="line">    ADD ROWID, SEQUENCE(&quot;PROD_ID&quot;,&quot;PROD_SUBCATEGORY&quot;)</div><div class="line">    INCLUDING NEW VALUES;</div><div class="line">CREATE MATERIALIZED VIEW sh.prod_cost_mv</div><div class="line">    REFRESH FAST WITH ROWID</div><div class="line">    ENABLE QUERY REWRITE</div><div class="line">    AS SELECT SH.PRODUCTS.PROD_SUBCATEGORY C1, SH.COSTS.TIME_ID C2, SUM(&quot;SH&quot;.&quot;COSTS&quot;.&quot;UNIT_COST&quot;)</div><div class="line">       M1, COUNT(&quot;SH&quot;.&quot;COSTS&quot;.&quot;UNIT_COST&quot;) M2, COUNT(*) M3 FROM SH.PRODUCTS,</div><div class="line">       SH.COSTS WHERE SH.COSTS.PROD_ID = SH.PRODUCTS.PROD_ID GROUP BY SH.PRODUCTS.PROD_SUBCATEGORY,</div><div class="line">       SH.COSTS.TIME_ID;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>@mv_create.sql</p>
<ul>
<li><p>查询重写验证：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">conn sh/sh</div><div class="line">explain plan for select c.time_id,p.prod_subcategory,SUM(unit_cost) as sum_units FROM costs c,products p where c.prod_id=p.prod_id group by time_id, prod_subcategory;</div><div class="line">select * from table(dbms_xplan.display);</div></pre></td></tr></table></figure>
</li>
<li><p>快速刷新验证：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">select * from sh.prod_cost_mv where C2=to_date(&apos;1998-01-08,00:00:00&apos;,&apos;yyyy-mm-dd hh24:mi:ss&apos;);</div><div class="line">insert into costs values(18,to_date(&apos;1998-01-08 00:00:00&apos;,&apos;yyyy-mm-dd hh24:mi:ss&apos;),999,3,1149.17,1639.39);</div><div class="line">commit;</div><div class="line">exec dbms_mview.refresh(&apos;PROD_COST_MV&apos;,&apos;F&apos;);</div><div class="line">select * from sh.prod_cost_mv where C2=to_date(&apos;1998-01-08,00:00:00&apos;,&apos;yyyy-mm-dd hh24:mi:ss&apos;);</div><div class="line">delete from costs where prod_id=18 and time_id=to_date(&apos;1998-01-08,00:00:00&apos;,&apos;yyyy-mm-dd hh24:mi:ss&apos;) AND UNIT_PRICE=1639.39;</div><div class="line">commit;</div><div class="line">select * from sh.prod_cost_mv where C2=to_date(&apos;1998-01-08,00:00:00&apos;,&apos;yyyy-mm-dd hh24:mi:ss&apos;);</div><div class="line">exec dbms_mview.refresh(&apos;PROD_COST_MV&apos;,&apos;F&apos;);</div><div class="line">select * from sh.prod_cost_mv where C2=to_date(&apos;1998-01-08,00:00:00&apos;,&apos;yyyy-mm-dd hh24:mi:ss&apos;);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4-Manage-Transport-of-tablespaces-across-platforms"><a href="#4-Manage-Transport-of-tablespaces-across-platforms" class="headerlink" title="4. Manage Transport of tablespaces across platforms"></a>4. <strong>Manage Transport of tablespaces across platforms</strong></h3><h4 id="4-1-Add-a-tablespace-by-using-Transportable-Feature-of-Data-Pump-Import-platform-transportable-tablespace"><a href="#4-1-Add-a-tablespace-by-using-Transportable-Feature-of-Data-Pump-Import-platform-transportable-tablespace" class="headerlink" title="4.1. Add a tablespace by using Transportable Feature of Data Pump Import (platform transportable tablespace)"></a>4.1. Add a tablespace by using Transportable Feature of Data Pump Import (platform transportable tablespace)</h4><h4 id="4-2-A-dump-file-export-from-solaris-platform-and-transfer-tablespace-to-PROD1"><a href="#4-2-A-dump-file-export-from-solaris-platform-and-transfer-tablespace-to-PROD1" class="headerlink" title="4.2. A dump file export from solaris platform and transfer tablespace to PROD1"></a>4.2. A dump file export from solaris platform and transfer tablespace to PROD1</h4><h4 id="4-3-All-dumpfiles-and-datafile-are-under-home-oracle-scripts-directory"><a href="#4-3-All-dumpfiles-and-datafile-are-under-home-oracle-scripts-directory" class="headerlink" title="4.3. All dumpfiles and datafile are under /home/oracle/scripts directory"></a>4.3. All dumpfiles and datafile are under /home/oracle/scripts directory</h4><p>(/home/oacle/scripts/transport_tbs01.dbf,/home/oracle/scripts/EXPDAT_GENERATETTS000021.DMP)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">select PLATFORM_NAME from v$database;</div><div class="line">rman target /  </div><div class="line">CONVERT DATAFILE &apos;/home/oracle/scripts/transport_tbs01.dbf&apos; TO PLATFORM=&quot;Linux IA (32-bit)&quot; FROM PLATFORM=&quot;Solaris[tm] OE (32-bit)&quot; DB_FILE_NAME_CONVERT=&apos;/home/oracle/scripts/&apos;, &apos;/u01/app/oracle/oradata/PROD1/&apos; PARALLELISM=4;</div><div class="line">sqlplus / as sysdba</div><div class="line">select * from dba_directories;</div><div class="line">create or replace directory DATA_PUMP_DIR as &apos;/home/oracle/scripts&apos;;</div><div class="line">create user TRANS_USER identified by oracle;</div><div class="line">grant connect,resource to TRANS_USER;</div><div class="line">impdp system DUMPFILE=EXPDAT_GENERATETTS000021.DMP DIRECTORY=data_pump_dir TRANSPORT_DATAFILES=/u01/app/oracle/oradata/PROD1/transport_tbs01.dbf LOGFILE=tts_import.log</div><div class="line">alter tablespace TRANS_TBS read write;</div><div class="line">select name from v$tablespace;</div><div class="line">conn TRANS_USER/oracle</div><div class="line">select * from tab;</div></pre></td></tr></table></figure></p>
<h3 id="5-Configure-a-schema-to-support-a-star-transformation-query-home-oracle-scripts-star-sql"><a href="#5-Configure-a-schema-to-support-a-star-transformation-query-home-oracle-scripts-star-sql" class="headerlink" title="5. Configure a schema to support a star transformation query (/home/oracle/scripts/star.sql)"></a>5. <strong>Configure a schema to support a star transformation query (/home/oracle/scripts/star.sql)</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">conn / as sysdba</div><div class="line">alter user sh identified by sh account unlock;</div><div class="line">show parameter star</div><div class="line">alter system set star_transformation_enabled = true;</div><div class="line">conn sh/sh</div><div class="line">desc sales</div><div class="line">create bitmap index sales_cust_bix on sales(cust_id) local;</div><div class="line">create bitmap index sales_time_bix on sales(time_id) local;</div><div class="line">create bitmap index sales_chan_bix on sales(channel_id) local;</div><div class="line">set autot trace exp</div><div class="line">@/home/oracle/scripts/star.sql</div><div class="line">set autot off</div></pre></td></tr></table></figure>
<h3 id="6-Administer-external-tables"><a href="#6-Administer-external-tables" class="headerlink" title="6. Administer external tables"></a>6. <strong>Administer external tables</strong></h3><h4 id="6-1-Provides-the-control-file-home-oracle-scripts-prod-master-ctl-and-data-file-home-oracle-scripts-prod-master-dat-gz-requires-that-creation-an-external-table-in-SH"><a href="#6-1-Provides-the-control-file-home-oracle-scripts-prod-master-ctl-and-data-file-home-oracle-scripts-prod-master-dat-gz-requires-that-creation-an-external-table-in-SH" class="headerlink" title="6.1 Provides the control file(/home/oracle/scripts/prod_master.ctl) and data file (/home/oracle/scripts/prod_master.dat.gz),requires that creation an external table in SH"></a>6.1 Provides the control file(/home/oracle/scripts/prod_master.ctl) and data file (/home/oracle/scripts/prod_master.dat.gz),requires that creation an external table in SH</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">conn / as sysdba</div><div class="line">create table sh.prod_master as select * from hr.prod_master;</div><div class="line">vi /home/oracle/scripts/prod_master.ctl:注释掉预处理：PREPROCESSOR,将hr.prod_master修改为sh.prod_master</div><div class="line">sqlldr userid=sh/sh control=/home/oracle/scripts/prod_master.ctl external_table=GENERATE_ONLY log=/home/oracle/scripts/extent_tab.log</div><div class="line">vi /home/oracle/scripts/extent_tab.log:将建表语句保存为cet.sql(vi编辑器下:e cet.sql),表名两边不加引号,表名前增加&apos;SH.&apos;,增加PREPROCESSOR &apos;SYS_SQLLDR_XT_TMPDIR_00000&apos;:&apos;uncompress.sh&apos; 最后加上&apos;;&apos;</div><div class="line">create directory SYS_SQLLDR_XT_TMPDIR_00000 AS &apos;/home/oracle/scripts/&apos;;</div><div class="line">@cet.sql</div><div class="line">select * from sh.SYS_SQLLDR_X_EXT_PROD_MASTER;</div></pre></td></tr></table></figure>
<h3 id="7-Configure-and-use-parallel-EXECution-for-queries"><a href="#7-Configure-and-use-parallel-EXECution-for-queries" class="headerlink" title="7. Configure and use parallel EXECution for queries"></a>7. <strong>Configure and use parallel EXECution for queries</strong></h3><h4 id="7-1-Requirements-for-maximum-parallel-slaves-is-100-Permanent-slave-of-minimum-number-is-10"><a href="#7-1-Requirements-for-maximum-parallel-slaves-is-100-Permanent-slave-of-minimum-number-is-10" class="headerlink" title="7.1. Requirements for maximum parallel slaves is 100, Permanent slave of minimum number is 10%."></a>7.1. Requirements for maximum parallel slaves is 100, Permanent slave of minimum number is 10%.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">alter system set parallel_max_servers=100;</div><div class="line">alter system set parallel_min_percent=10 scope=spfile;</div></pre></td></tr></table></figure>
<h4 id="7-2-Require-all-SQL-using-parallel-cannot-execute-in-parallel-operation-the-operation-was-aborted"><a href="#7-2-Require-all-SQL-using-parallel-cannot-execute-in-parallel-operation-the-operation-was-aborted" class="headerlink" title="7.2. Require all SQL using parallel, cannot execute in parallel operation, the operation was aborted."></a>7.2. Require all SQL using parallel, cannot execute in parallel operation, the operation was aborted.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter system set parallel_degree_policy=limited;</div></pre></td></tr></table></figure>
<h4 id="7-3-Set-the-table-sh-sales-parallel-degree-of-8-to-ensure-that-the-entire-scene-with-the-parallel-degree"><a href="#7-3-Set-the-table-sh-sales-parallel-degree-of-8-to-ensure-that-the-entire-scene-with-the-parallel-degree" class="headerlink" title="7.3. Set the table sh.sales parallel degree of 8, to ensure that the entire scene with the parallel degree."></a>7.3. Set the table sh.sales parallel degree of 8, to ensure that the entire scene with the parallel degree.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">alter table sh.sales parallel 8;</div><div class="line">alter session enable parallel dml;</div></pre></td></tr></table></figure>
<h4 id="7-4-The-running-time-of-less-than-5-seconds-should-not-use-parallel"><a href="#7-4-The-running-time-of-less-than-5-seconds-should-not-use-parallel" class="headerlink" title="7.4. The running time of less than 5 seconds, should not use parallel."></a>7.4. The running time of less than 5 seconds, should not use parallel.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter system set parallel_min_time_threshold=5;</div></pre></td></tr></table></figure>
<h4 id="7-5-Provides-a-script-home-oracle-scripts-parallel-sql-modify-the-script-and-execution-that-using-the-sys-user-the-SQL-statement-which-run-the-parallel-execution-plan-into-the-plan-table"><a href="#7-5-Provides-a-script-home-oracle-scripts-parallel-sql-modify-the-script-and-execution-that-using-the-sys-user-the-SQL-statement-which-run-the-parallel-execution-plan-into-the-plan-table" class="headerlink" title="7.5. Provides a script (/home/oracle/scripts/parallel.sql), modify the script and execution that using the sys user, the SQL statement which run the parallel, execution plan into the plan_table."></a>7.5. Provides a script (/home/oracle/scripts/parallel.sql), modify the script and execution that using the sys user, the SQL statement which run the parallel, execution plan into the plan_table.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@?/rdbms/admin/utlxplan.sql</div><div class="line">vi parallel.sql：</div><div class="line">在最开始添加：</div><div class="line">alter session enable parallel dml</div><div class="line">/</div><div class="line">在update后添加：/*+ parallel*/</div><div class="line">@/home/oracle/scripts/parallel.sql</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      ocm11g认证考试
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="oracle" scheme="https://aliennever.github.io/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>11gOCM-Skillset2</title>
    <link href="https://aliennever.github.io/2018/09/05/20180827OCM%20Skillset2/"/>
    <id>https://aliennever.github.io/2018/09/05/20180827OCM Skillset2/</id>
    <published>2018-09-05T04:00:00.000Z</published>
    <updated>2018-11-14T08:58:24.580Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Skillset-2"><a href="#Skillset-2" class="headerlink" title="Skillset 2"></a>Skillset 2</h1><h2 id="TASKS"><a href="#TASKS" class="headerlink" title="TASKS:"></a>TASKS:</h2><h3 id="1-Register-the-PROD1、PROD2-database-with-the-catalog-on-prod4"><a href="#1-Register-the-PROD1、PROD2-database-with-the-catalog-on-prod4" class="headerlink" title="1. Register the PROD1、PROD2 database with the catalog on prod4"></a>1. <strong>Register the PROD1、PROD2 database with the catalog on prod4</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">export ORACLE_SID=PROD1</div><div class="line">rman target / catalog rcowner/rc@PROD4</div><div class="line">register database;</div><div class="line">report schema;</div><div class="line">export ORACLE_SID=PROD2</div><div class="line">rman target / catalog rcowner/rc@PROD4</div><div class="line">register database;</div><div class="line">report schema;</div></pre></td></tr></table></figure>
<h3 id="2-Use-Recovery-Manager-to-Perform-Database-backups"><a href="#2-Use-Recovery-Manager-to-Perform-Database-backups" class="headerlink" title="2. Use Recovery Manager to Perform Database backups"></a>2. <strong>Use Recovery Manager to Perform Database backups</strong></h3><h4 id="2-1-Perform-a-tablespace-backup-for-database-PROD1-using-fast-recovery-area"><a href="#2-1-Perform-a-tablespace-backup-for-database-PROD1-using-fast-recovery-area" class="headerlink" title="2.1 Perform a tablespace backup for database PROD1 using fast recovery area"></a>2.1 Perform a tablespace backup for database PROD1 using fast recovery area</h4><h5 id="2-1-1-backup-EXAMPLE-tablespace"><a href="#2-1-1-backup-EXAMPLE-tablespace" class="headerlink" title="2.1.1 backup EXAMPLE tablespace"></a>2.1.1 backup EXAMPLE tablespace</h5><h5 id="2-1-2-section-size-30M"><a href="#2-1-2-section-size-30M" class="headerlink" title="2.1.2 section size 30M"></a>2.1.2 section size 30M</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">export ORACLE_SID=PROD1</div><div class="line">sqlplus / as sysdba</div><div class="line">show parameter recovery</div><div class="line">alter system set db_recovery_file_dest=&apos;/u01/app/oracle/fast_recovery_area&apos; scope=spfile;	</div><div class="line">alter system set db_recovery_file_dest_size=4G;</div><div class="line">select ARCHIVER from v$instance;</div><div class="line">shut immediate</div><div class="line">startup mount</div><div class="line">alter database archivelog;</div><div class="line">alter database open;</div><div class="line">rman target / catalog rcowner/rc@PROD4</div><div class="line">backup tablespace example section size 30m;</div></pre></td></tr></table></figure>
<h4 id="2-2-Perform-a-backup-for-database-PROD1"><a href="#2-2-Perform-a-backup-for-database-PROD1" class="headerlink" title="2.2 Perform a backup for database PROD1"></a>2.2 Perform a backup for database PROD1</h4><h5 id="2-2-1-Backup-whole-database"><a href="#2-2-1-Backup-whole-database" class="headerlink" title="2.2.1 Backup whole database"></a>2.2.1 Backup whole database</h5><h5 id="2-2-2-Backup-TAG-is-“Q107”"><a href="#2-2-2-Backup-TAG-is-“Q107”" class="headerlink" title="2.2.2 Backup TAG is “Q107”"></a>2.2.2 Backup TAG is “Q107”</h5><h5 id="2-2-3-Backup-directory-to-“-home-oracle-files”-Implied"><a href="#2-2-3-Backup-directory-to-“-home-oracle-files”-Implied" class="headerlink" title="2.2.3 Backup directory to “/home/oracle/files”(Implied)"></a>2.2.3 Backup directory to “/home/oracle/files”(Implied)</h5><h5 id="2-2-4-Backup-keep-long-time"><a href="#2-2-4-Backup-keep-long-time" class="headerlink" title="2.2.4 Backup keep long time"></a>2.2.4 Backup keep long time</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir -p /home/oracle/files</div><div class="line">rman target / catalog rcowner/rc@PROD4</div><div class="line">backup database plus archivelog format &apos;/home/oracle/files/prod1_full_%u.bak&apos; tag &apos;Q107&apos; keep forever;</div></pre></td></tr></table></figure>
<h4 id="2-3-Perform-a-backup-for-database-PROD2-using-fast-recovery-area"><a href="#2-3-Perform-a-backup-for-database-PROD2-using-fast-recovery-area" class="headerlink" title="2.3 Perform a backup for database PROD2 using fast recovery area"></a>2.3 Perform a backup for database PROD2 using fast recovery area</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">export ORACLE_SID=PROD2</div><div class="line">sqlplus / as sysdba</div><div class="line">show parameter recovery</div><div class="line">alter system set db_recovery_file_dest=&apos;/u01/app/oracle/fast_recovery_area&apos; scope=spfile;	</div><div class="line">alter system set db_recovery_file_dest_size=4G;</div><div class="line">select archiver from v$instance;</div><div class="line">shut immediate</div><div class="line">startup mount</div><div class="line">alter database archivelog;</div><div class="line">alter database open;</div><div class="line">rman target / catalog rcowner/rc@PROD4</div><div class="line">backup database;</div><div class="line">sqlplus / as sysdba</div><div class="line">alter system archive log current;</div></pre></td></tr></table></figure>
<h4 id="2-4-Reduce-Overheads-of-Fast-Incremental-Backups-on-the-PROD1-database"><a href="#2-4-Reduce-Overheads-of-Fast-Incremental-Backups-on-the-PROD1-database" class="headerlink" title="2.4 Reduce Overheads of Fast Incremental Backups on the PROD1 database"></a>2.4 Reduce Overheads of Fast Incremental Backups on the PROD1 database</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter database enable block change tracking using file &apos;/home/oracle/files/bct.f&apos;;</div></pre></td></tr></table></figure>
<h3 id="3-Flashback-Database"><a href="#3-Flashback-Database" class="headerlink" title="3. Flashback Database"></a>3. <strong>Flashback Database</strong></h3><h4 id="3-1-Turn-on-Flashback-Database-for-PROD1-database"><a href="#3-1-Turn-on-Flashback-Database-for-PROD1-database" class="headerlink" title="3.1 Turn on Flashback Database for PROD1 database"></a>3.1 Turn on Flashback Database for PROD1 database</h4><h5 id="3-1-1-Configure-a-flash-recovery-area-of-4GB"><a href="#3-1-1-Configure-a-flash-recovery-area-of-4GB" class="headerlink" title="3.1.1 Configure a flash recovery area of 4GB"></a>3.1.1 Configure a flash recovery area of 4GB</h5><h5 id="3-1-2-Put-your-flash-recovery-area-in-home-oracle-flash-you-may-have-to-create-this-diretory"><a href="#3-1-2-Put-your-flash-recovery-area-in-home-oracle-flash-you-may-have-to-create-this-diretory" class="headerlink" title="3.1.2 Put your flash recovery area in /home/oracle/flash (you may have to create this diretory)"></a>3.1.2 Put your flash recovery area in /home/oracle/flash (you may have to create this diretory)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mkdir -p /home/oracle/flash</div><div class="line">alter system set db_recovery_file_dest=&apos;/home/oracle/flash&apos; scope=spfile;</div><div class="line">alter system set db_recovery_file_dest_size=4g;</div><div class="line">alter database flashback on;</div><div class="line">shutdown immediate</div><div class="line">startup</div></pre></td></tr></table></figure>
<h4 id="3-2-Leave-your-databases-open-for-review"><a href="#3-2-Leave-your-databases-open-for-review" class="headerlink" title="3.2 Leave your databases open for review."></a>3.2 Leave your databases open for review.</h4><h4 id="3-3-Execute-a-script-home-oracle-scripts-s2-1-sql-flash-backup-to-step-of-insert-opration-finish"><a href="#3-3-Execute-a-script-home-oracle-scripts-s2-1-sql-flash-backup-to-step-of-insert-opration-finish" class="headerlink" title="3.3 Execute a script (/home/oracle/scripts/s2_1.sql), flash backup to step of insert opration finish."></a>3.3 Execute a script (/home/oracle/scripts/s2_1.sql), flash backup to step of insert opration finish.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">date</div><div class="line">@/home/oracle/scripts/s2_1.sql</div><div class="line">alter table hr.regions enable row movement;</div><div class="line">alter table hr.locations enable row movement;</div><div class="line">select versions_startscn,versions_endscn,versions_operation,region_id,region_name from hr.regions versions between timestamp to_timestamp(&apos;2018-11-14 16:36:21&apos;,&apos;YYYY-MM-DD HH24:MI:SS&apos;) and to_timestamp(&apos;2018-11-14 16:38:00&apos;,&apos;YYYY-MM-DD HH24:MI:SS&apos;);</div><div class="line">flashback table hr.regions,hr.countries,hr.locations to scn 985839;</div><div class="line">select * from hr.regions;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      ocm11g认证考试
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="oracle" scheme="https://aliennever.github.io/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>11gOCM-Skillset1</title>
    <link href="https://aliennever.github.io/2018/07/03/20180710OCM%20Skillset1/"/>
    <id>https://aliennever.github.io/2018/07/03/20180710OCM Skillset1/</id>
    <published>2018-07-03T04:00:00.000Z</published>
    <updated>2018-11-14T02:59:19.459Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Skillset-1"><a href="#Skillset-1" class="headerlink" title="Skillset 1"></a>Skillset 1</h1><h2 id="NOTE"><a href="#NOTE" class="headerlink" title="NOTE:"></a>NOTE:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Database Server and Management Server, user/pwd: oracle/ocm123</div><div class="line">if need root,use sudo </div><div class="line">oracle doc: /stage/.../English/index.htm</div><div class="line">The root directory must be kept free space 15%</div></pre></td></tr></table></figure>
<h2 id="TASKS"><a href="#TASKS" class="headerlink" title="TASKS:"></a>TASKS:</h2><h3 id="1-Create-Database"><a href="#1-Create-Database" class="headerlink" title="1. Create Database"></a>1. <strong>Create Database</strong></h3><h4 id="1-1-Create-a-database-the-SID-name-is-PROD3-at-Management-Server"><a href="#1-1-Create-a-database-the-SID-name-is-PROD3-at-Management-Server" class="headerlink" title="1.1 Create a database the SID name is PROD3 at Management Server."></a>1.1 Create a database the SID name is PROD3 at Management Server.</h4><ul>
<li><p>设置环境变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">vi .bash_profile</div><div class="line">export ORACLE_BASE=/u01/app/oracle</div><div class="line">export ORACLE_HOME=$ORACLE_BASE/product/11.2.0/db_1</div><div class="line">export PATH=$ORACLE_HOME/bin:/sbin:/user/sbin:$PATH</div><div class="line">source .bash_profile</div></pre></td></tr></table></figure>
</li>
<li><p>创建所需目录:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir -p $ORACLE_BASE/admin/PROD3/adump</div><div class="line">mkdir -p $ORACLE_BASE/oradata/PROD3</div></pre></td></tr></table></figure>
</li>
<li><p>生成密码文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd $ORACLE_HOME/dbs</div><div class="line">orapwd file=orapwPROD3 password=oracle entries=30</div></pre></td></tr></table></figure>
</li>
<li><p>创建pfile参数文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cat init.ora |grep -v ^#|grep -v ^$ &gt; initPROD3.ora</div><div class="line">vi initPROD3.ora</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">db_name=&apos;PROD3&apos;</div><div class="line">memory_target=1G</div><div class="line">processes = 150</div><div class="line">audit_file_dest=&apos;/u01/app/oracle/admin/PROD3/adump&apos;</div><div class="line">audit_trail =&apos;db&apos;</div><div class="line">db_block_size=8192</div><div class="line">db_domain=&apos;&apos;</div><div class="line">db_recovery_file_dest=&apos;/u01/app/oracle/fast_recovery_area&apos;</div><div class="line">db_recovery_file_dest_size=2G</div><div class="line">diagnostic_dest=&apos;/u01/app/oracle&apos;</div><div class="line">dispatchers=&apos;(PROTOCOL=TCP)&apos;</div><div class="line">open_cursors=300</div><div class="line">remote_login_passwordfile=&apos;EXCLUSIVE&apos;</div><div class="line">undo_tablespace=&apos;UNDOTBS1&apos;</div><div class="line">control_files = (/u01/app/oracle/oradata/PROD3/control01.ctl, /u01/app/oracle/oradata/PROD3/control02.ctl)</div><div class="line">compatible =&apos;11.2.0&apos;</div></pre></td></tr></table></figure>
<ul>
<li><p>生成spfile参数文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">export ORACLE_SID=PROD3</div><div class="line">sqlplus / as sysdba</div><div class="line">create spfile from pfile;</div><div class="line">startup nomount;</div></pre></td></tr></table></figure>
</li>
<li><p>执行创建数据库语句:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd </div><div class="line">vi cd.sql</div><div class="line">sqlplus / as sysdba</div><div class="line">@cd.sql</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">CREATE DATABASE PROD3</div><div class="line">   USER SYS IDENTIFIED BY oracle</div><div class="line">   USER SYSTEM IDENTIFIED BY oracle</div><div class="line">   LOGFILE GROUP 1 (&apos;/u01/app/oracle/oradata/PROD3/redo01.log&apos;) SIZE 100M BLOCKSIZE 512,</div><div class="line">           GROUP 2 (&apos;/u01/app/oracle/oradata/PROD3/redo02.log&apos;) SIZE 100M BLOCKSIZE 512,</div><div class="line">           GROUP 3 (&apos;/u01/app/oracle/oradata/PROD3/redo03.log&apos;) SIZE 100M BLOCKSIZE 512</div><div class="line">   MAXLOGFILES 5</div><div class="line">   MAXLOGMEMBERS 5</div><div class="line">   MAXLOGHISTORY 1</div><div class="line">   MAXDATAFILES 100</div><div class="line">   CHARACTER SET AL32UTF8</div><div class="line">   NATIONAL CHARACTER SET AL16UTF16</div><div class="line">   EXTENT MANAGEMENT LOCAL</div><div class="line">   DATAFILE &apos;/u01/app/oracle/oradata/PROD3/system01.dbf&apos; SIZE 325M REUSE</div><div class="line">   SYSAUX DATAFILE &apos;/u01/app/oracle/oradata/PROD3/sysaux01.dbf&apos; SIZE 325M REUSE</div><div class="line">   DEFAULT TABLESPACE users</div><div class="line">      DATAFILE &apos;/u01/app/oracle/oradata/PROD3/users01.dbf&apos;</div><div class="line">      SIZE 100M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED</div><div class="line">   DEFAULT TEMPORARY TABLESPACE temptbs1</div><div class="line">      TEMPFILE &apos;/u01/app/oracle/oradata/PROD3/temp01.dbf&apos;</div><div class="line">      SIZE 20M REUSE</div><div class="line">   UNDO TABLESPACE undotbs1</div><div class="line">      DATAFILE &apos;/u01/app/oracle/oradata/PROD3/undotbs1.dbf&apos;</div><div class="line">      SIZE 200M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;</div></pre></td></tr></table></figure>
<ul>
<li>执行catalog.sql和catproc.sql脚本:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">@?/rdbms/admin/catalog.sql</div><div class="line">@?/rdbms/admin/catproc.sql</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-Undo-Management"><a href="#2-Undo-Management" class="headerlink" title="2. Undo Management"></a>2. <strong>Undo Management</strong></h3><h4 id="2-1-Setup-automatic-undo-management-in-the-PROD1-database-to-support-the-following-requirements"><a href="#2-1-Setup-automatic-undo-management-in-the-PROD1-database-to-support-the-following-requirements" class="headerlink" title="2.1 Setup automatic undo management in the PROD1 database to support the following requirements:"></a>2.1 Setup automatic undo management in the PROD1 database to support the following requirements:</h4><h5 id="2-1-1-Avoid-ORA-01555-Snapshot-too-old-errors-for-queries-running-up-to-90-minutes-on-average"><a href="#2-1-1-Avoid-ORA-01555-Snapshot-too-old-errors-for-queries-running-up-to-90-minutes-on-average" class="headerlink" title="2.1.1 Avoid ORA-01555 Snapshot too old errors for queries running up to 90 minutes on average."></a>2.1.1 Avoid ORA-01555 Snapshot too old errors for queries running up to 90 minutes on average.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter system set undo_retention=5400;</div></pre></td></tr></table></figure>
<h5 id="2-1-2-The-number-or-concurrent-OLTP-users-will-be-approximately-120-during-normal-business-hours"><a href="#2-1-2-The-number-or-concurrent-OLTP-users-will-be-approximately-120-during-normal-business-hours" class="headerlink" title="2.1.2 The number or concurrent OLTP users will be approximately 120 during normal business hours."></a>2.1.2 The number or concurrent OLTP users will be approximately 120 during normal business hours.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter system set processes=140 scope=spfile;</div></pre></td></tr></table></figure>
<h5 id="2-1-3-The-number-or-concurrent-batch-processes-that-will-run-in-the-evenings-and-weekends-will-approximately-12-to-15"><a href="#2-1-3-The-number-or-concurrent-batch-processes-that-will-run-in-the-evenings-and-weekends-will-approximately-12-to-15" class="headerlink" title="2.1.3 The number or concurrent batch processes that will run in the evenings and weekends will approximately 12 to 15."></a>2.1.3 The number or concurrent batch processes that will run in the evenings and weekends will approximately 12 to 15.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter system set job_queue_processes=15;</div></pre></td></tr></table></figure>
<h3 id="3-Server-sid-Network-Configuration"><a href="#3-Server-sid-Network-Configuration" class="headerlink" title="3. Server-sid Network Configuration"></a>3. <strong>Server-sid Network Configuration</strong></h3><h4 id="3-1-Create-a-listener-using-the-default-listener-name"><a href="#3-1-Create-a-listener-using-the-default-listener-name" class="headerlink" title="3.1 Create a listener using the default listener name."></a>3.1 Create a listener using the default listener name.</h4><h4 id="3-2-The-TCP-IP-protocol-will-be-used-for-all-connections-Use-the-machine-name-not-the-IP-address-for-host"><a href="#3-2-The-TCP-IP-protocol-will-be-used-for-all-connections-Use-the-machine-name-not-the-IP-address-for-host" class="headerlink" title="3.2 The TCP/IP protocol will be used for all connections,Use the machine name (not the IP address) for host."></a>3.2 The TCP/IP protocol will be used for all connections,Use the machine name (not the IP address) for host.</h4><h4 id="3-3-This-listener-will-listen-on-the-default-port"><a href="#3-3-This-listener-will-listen-on-the-default-port" class="headerlink" title="3.3 This listener will listen on the default port"></a>3.3 This listener will listen on the default port</h4><h4 id="3-4-Databases-will-be-serviced-by-this-listener"><a href="#3-4-Databases-will-be-serviced-by-this-listener" class="headerlink" title="3.4 Databases will be serviced by this listener."></a>3.4 Databases will be serviced by this listener.</h4><h4 id="3-5-Add-a-second-listener-named-LSNR2-which-will-listen-on-port-1526"><a href="#3-5-Add-a-second-listener-named-LSNR2-which-will-listen-on-port-1526" class="headerlink" title="3.5 Add a second listener,named LSNR2,which will listen on port 1526."></a>3.5 Add a second listener,named LSNR2,which will listen on port 1526.</h4><h4 id="3-6-Set-up-the-PROD1-instance-to-automatically-register-with-the-LSNR2"><a href="#3-6-Set-up-the-PROD1-instance-to-automatically-register-with-the-LSNR2" class="headerlink" title="3.6 Set up the PROD1 instance to automatically register with the LSNR2."></a>3.6 Set up the PROD1 instance to automatically register with the LSNR2.</h4><h4 id="3-7-Start-both-listeners"><a href="#3-7-Start-both-listeners" class="headerlink" title="3.7 Start both listeners."></a>3.7 Start both listeners.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi $ORACLE_HOME/network/admin/listener.ora</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">LISTENER =</div><div class="line">  (DESCRIPTION_LIST =</div><div class="line">    (DESCRIPTION =</div><div class="line">      (ADDRESS = (PROTOCOL = TCP)(HOST = edbjr2p1)(PORT = 1521))</div><div class="line">    )</div><div class="line">  )</div><div class="line">SID_LIST_LISTENER=</div><div class="line">  (SID_LIST=</div><div class="line">    (SID_DESC=</div><div class="line">      (GLOBAL_DBNAME=PROD1.us.example.com)</div><div class="line">      (ORACLE_HOME=/u01/app/oracle/product/11.2.0/dbhome_1)</div><div class="line">      (SID_NAME=PROD1)))</div><div class="line"></div><div class="line">LSNR2 =</div><div class="line">  (DESCRIPTION_LIST =</div><div class="line">    (DESCRIPTION =</div><div class="line">      (ADDRESS = (PROTOCOL = TCP)(HOST = edbjr2p1)(PORT = 1526))</div><div class="line">    )</div><div class="line">  )</div><div class="line">SID_LIST_LSNR2=</div><div class="line">  (SID_LIST=</div><div class="line">    (SID_DESC=</div><div class="line">      (GLOBAL_DBNAME=PROD1.us.example.com)</div><div class="line">      (ORACLE_HOME=/u01/app/oracle/product/11.2.0/dbhome_1)</div><div class="line">      (SID_NAME=PROD1)))</div><div class="line">ADR_BASE_LISTENER =/u01/app/oracle/product/11.2.0/dbhome_1</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">lsnrctl start</div><div class="line">lsnrctl start LSNR2</div><div class="line">alter system set local_listener=&apos;edbjr2p1:1521&apos;,&apos;edbjr2p1:1526&apos;;</div><div class="line">alter system register;</div></pre></td></tr></table></figure>
<h3 id="4-Shared-Server-Configuration"><a href="#4-Shared-Server-Configuration" class="headerlink" title="4. Shared Server Configuration"></a>4. <strong>Shared Server Configuration</strong></h3><h4 id="4-1-Configure-the-PROD1-database-to-support-up-to-300-sessions-reserving-100-for-dedicated-connections"><a href="#4-1-Configure-the-PROD1-database-to-support-up-to-300-sessions-reserving-100-for-dedicated-connections" class="headerlink" title="4.1 Configure the PROD1 database to support up to 300 sessions,reserving 100 for dedicated connections."></a>4.1 Configure the PROD1 database to support up to 300 sessions,reserving 100 for dedicated connections.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">alter system set sessions=300 scope=spfile; </div><div class="line">alter system set shared_server_sessions=200;</div></pre></td></tr></table></figure>
<h4 id="4-2-Configure-the-PROD1-database-to-support"><a href="#4-2-Configure-the-PROD1-database-to-support" class="headerlink" title="4.2 Configure the PROD1 database to support:"></a>4.2 Configure the PROD1 database to support:</h4><h5 id="4-2-1-Dispatchers-tcp-3"><a href="#4-2-1-Dispatchers-tcp-3" class="headerlink" title="4.2.1 Dispatchers tcp 3"></a>4.2.1 Dispatchers tcp 3</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter system set DISPATCHERS = &apos;(PROTOCOL=TCP)(DISPATCHERS=3)&apos;;</div></pre></td></tr></table></figure>
<h5 id="4-2-2-Maximum-of-10-dispatchers"><a href="#4-2-2-Maximum-of-10-dispatchers" class="headerlink" title="4.2.2 Maximum of 10 dispatchers"></a>4.2.2 Maximum of 10 dispatchers</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter system set max_dispatchers=10;</div></pre></td></tr></table></figure>
<h4 id="4-3-Configure-the-PROD1-database-to-support"><a href="#4-3-Configure-the-PROD1-database-to-support" class="headerlink" title="4.3 Configure the PROD1 database to support:"></a>4.3 Configure the PROD1 database to support:</h4><h5 id="4-3-1-Minimum-of-10-shared-server-processes"><a href="#4-3-1-Minimum-of-10-shared-server-processes" class="headerlink" title="4.3.1 Minimum of 10 shared server processes."></a>4.3.1 Minimum of 10 shared server processes.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter system set shared_servers=10;</div></pre></td></tr></table></figure>
<h5 id="4-3-2-Maximum-of-30-shared-server-processes"><a href="#4-3-2-Maximum-of-30-shared-server-processes" class="headerlink" title="4.3.2 Maximum of 30 shared server processes."></a>4.3.2 Maximum of 30 shared server processes.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter system set max_shared_servers=30;</div></pre></td></tr></table></figure>
<h3 id="5-Client-side-Network-configuration"><a href="#5-Client-side-Network-configuration" class="headerlink" title="5. Client-side Network configuration"></a>5. <strong>Client-side Network configuration</strong></h3><h4 id="5-1-Create-the-client-side-network-configuration-files-Providing-connect-descriptors-to-your-databases-using-local-naming-and-easy-connect-methods"><a href="#5-1-Create-the-client-side-network-configuration-files-Providing-connect-descriptors-to-your-databases-using-local-naming-and-easy-connect-methods" class="headerlink" title="5.1 Create the client-side network configuration files Providing connect descriptors to your databases using local naming and easy connect methods:"></a>5.1 Create the client-side network configuration files Providing connect descriptors to your databases using local naming and easy connect methods:</h4><h5 id="5-1-1-The-prod1-alias-should-connect-to-the-PROD1-instance-using-the-default-listener-and-always-use-a-dedicated-server-connection"><a href="#5-1-1-The-prod1-alias-should-connect-to-the-PROD1-instance-using-the-default-listener-and-always-use-a-dedicated-server-connection" class="headerlink" title="5.1.1 The prod1 alias should connect to the PROD1 instance using the default listener and always use a dedicated server connection."></a>5.1.1 The prod1 alias should connect to the PROD1 instance using the default listener and always use a dedicated server connection.</h5><h5 id="5-1-2-The-prod2-alias-should-connect-to-the-PROD2-instance-using-the-default-listener-and-always-use-a-dedicated-server-connection"><a href="#5-1-2-The-prod2-alias-should-connect-to-the-PROD2-instance-using-the-default-listener-and-always-use-a-dedicated-server-connection" class="headerlink" title="5.1.2 The prod2 alias should connect to the PROD2 instance using the default listener and always use a dedicated server connection."></a>5.1.2 The prod2 alias should connect to the PROD2 instance using the default listener and always use a dedicated server connection.</h5><h5 id="5-1-3-The-prod3-alias-should-connect-to-the-PROD3-instance-using-the-default-listener-and-always-use-a-dedicated-server-connection"><a href="#5-1-3-The-prod3-alias-should-connect-to-the-PROD3-instance-using-the-default-listener-and-always-use-a-dedicated-server-connection" class="headerlink" title="5.1.3 The prod3 alias should connect to the PROD3 instance using the default listener and always use a dedicated server connection."></a>5.1.3 The prod3 alias should connect to the PROD3 instance using the default listener and always use a dedicated server connection.</h5><h5 id="5-1-4-The-prod4-alias-should-connect-to-the-PROD4-instance-using-the-default-listener-and-always-use-a-dedicated-server-connection"><a href="#5-1-4-The-prod4-alias-should-connect-to-the-PROD4-instance-using-the-default-listener-and-always-use-a-dedicated-server-connection" class="headerlink" title="5.1.4 The prod4 alias should connect to the PROD4 instance using the default listener and always use a dedicated server connection."></a>5.1.4 The prod4 alias should connect to the PROD4 instance using the default listener and always use a dedicated server connection.</h5><h5 id="5-1-5-The-EMREP-alias-should-connect-to-the-EMREP-instance-using-the-default-listener-and-always-use-a-dedicated-server-connection"><a href="#5-1-5-The-EMREP-alias-should-connect-to-the-EMREP-instance-using-the-default-listener-and-always-use-a-dedicated-server-connection" class="headerlink" title="5.1.5 The EMREP alias should connect to the EMREP instance using the default listener and always use a dedicated server connection."></a>5.1.5 The EMREP alias should connect to the EMREP instance using the default listener and always use a dedicated server connection.</h5><h5 id="5-1-6-The-PROD1-S-alias-should-connect-to-the-PROD1-instance-using-the-LSNR2-listener-and-use-a-shared-server-connection"><a href="#5-1-6-The-PROD1-S-alias-should-connect-to-the-PROD1-instance-using-the-LSNR2-listener-and-use-a-shared-server-connection" class="headerlink" title="5.1.6 The PROD1_S alias should connect to the PROD1 instance using the LSNR2 listener and use a shared server connection."></a>5.1.6 The PROD1_S alias should connect to the PROD1 instance using the LSNR2 listener and use a shared server connection.</h5><h5 id="5-1-7-The-RACDB-alias-using-host-cluster01-scan-example-com-should-connect-to-the-RAC-and-use-a-dedicated-server-connection"><a href="#5-1-7-The-RACDB-alias-using-host-cluster01-scan-example-com-should-connect-to-the-RAC-and-use-a-dedicated-server-connection" class="headerlink" title="5.1.7 The RACDB alias using host cluster01-scan.example.com should connect to the RAC and use a dedicated server connection."></a>5.1.7 The RACDB alias using host cluster01-scan.example.com should connect to the RAC and use a dedicated server connection.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">show parameter service_names</div><div class="line">vi $ORACLE_HOME/network/admin/tnsnames.ora</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">PROD1 =</div><div class="line">  (DESCRIPTION =</div><div class="line">    (ADDRESS_LIST =(ADDRESS = (PROTOCOL = TCP)(HOST = edbjr2p1)(PORT = 1521)))</div><div class="line">    (CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = PROD1)))</div><div class="line">PROD2 =</div><div class="line">  (DESCRIPTION =</div><div class="line">    (ADDRESS_LIST =(ADDRESS = (PROTOCOL = TCP)(HOST = edbjr2p1)(PORT = 1521)))</div><div class="line">    (CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = PROD2)))</div><div class="line">PROD3 =</div><div class="line">  (DESCRIPTION =</div><div class="line">    (ADDRESS_LIST =(ADDRESS = (PROTOCOL = TCP)(HOST = edbjr2p2)(PORT = 1521)))</div><div class="line">    (CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = PROD3)))</div><div class="line">PROD4 =</div><div class="line">  (DESCRIPTION =</div><div class="line">    (ADDRESS_LIST =(ADDRESS = (PROTOCOL = TCP)(HOST = edbjr2p2)(PORT = 1521)))</div><div class="line">    (CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = PROD4)))</div><div class="line">PROD1_S =</div><div class="line">  (DESCRIPTION =</div><div class="line">    (ADDRESS_LIST =(ADDRESS = (PROTOCOL = TCP)(HOST = edbjr2p1)(PORT = 1526)))</div><div class="line">    (CONNECT_DATA =(SERVER = SHARED)(SERVICE_NAME = PROD1)))</div><div class="line">EMREP =</div><div class="line">  (DESCRIPTION =</div><div class="line">    (ADDRESS_LIST =(ADDRESS = (PROTOCOL = TCP)(HOST = edbjr2p2)(PORT = 1521)))</div><div class="line">    (CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = EMREP)))</div><div class="line">RACDB =</div><div class="line">  (DESCRIPTION =</div><div class="line">    (ADDRESS_LIST =(ADDRESS = (PROTOCOL = TCP)(HOST = cluster01-scan.example.com)(PORT = 1521)))</div><div class="line">    (CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = RACDB)))</div></pre></td></tr></table></figure>
<h3 id="6-Tablespace-Creation-and-Configuration"><a href="#6-Tablespace-Creation-and-Configuration" class="headerlink" title="6. Tablespace Creation and Configuration"></a>6. <strong>Tablespace Creation and Configuration</strong></h3><p>Note: tablespaces must be named as specified in each task to receive credit.</p>
<h4 id="6-1-Create-a-temporary-tablespace-group-that-contains-two-temporary-tablespaces-to-support-batch-processing-the-creation-of-large-indexes-and-analyzing-tables-Use-the-following-specifications"><a href="#6-1-Create-a-temporary-tablespace-group-that-contains-two-temporary-tablespaces-to-support-batch-processing-the-creation-of-large-indexes-and-analyzing-tables-Use-the-following-specifications" class="headerlink" title="6.1 Create a temporary tablespace group that contains two temporary tablespaces to support batch processing,the creation of large indexes and analyzing tables,Use the following specifications:"></a>6.1 Create a temporary tablespace group that contains two temporary tablespaces to support batch processing,the creation of large indexes and analyzing tables,Use the following specifications:</h4><h5 id="6-1-1-Temporary-tablespace-group-named-TEMP-GRP-containing-temporary-tablespaces-TEMP1-and-TEMP2"><a href="#6-1-1-Temporary-tablespace-group-named-TEMP-GRP-containing-temporary-tablespaces-TEMP1-and-TEMP2" class="headerlink" title="6.1.1 Temporary tablespace group named TEMP_GRP containing temporary tablespaces TEMP1 and TEMP2."></a>6.1.1 Temporary tablespace group named TEMP_GRP containing temporary tablespaces TEMP1 and TEMP2.</h5><h5 id="6-1-2-Make-TEMP-GRP-the-default-temporary-tablespace-for-all-new-users"><a href="#6-1-2-Make-TEMP-GRP-the-default-temporary-tablespace-for-all-new-users" class="headerlink" title="6.1.2 Make TEMP_GRP the default temporary tablespace for all new users."></a>6.1.2 Make TEMP_GRP the default temporary tablespace for all new users.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">create temporary tablespace TEMP1 tempfile &apos;/u01/app/oracle/oradata/PROD1/temp1.dbf&apos; size 50m tablespace group TEMP_GRP;</div><div class="line">create temporary tablespace TEMP2 tempfile &apos;/u01/app/oracle/oradata/PROD1/temp2.dbf&apos; size 50m tablespace group TEMP_GRP;</div><div class="line">alter database default temporary tablespace TEMP_GRP;</div><div class="line">select * from DATABASE_PROPERTIES;</div><div class="line">select name from v$tablespace;</div></pre></td></tr></table></figure>
<h4 id="6-2-Create-a-permanent-tablespace-to-store-sample-test-data-Use-the-following-specifications"><a href="#6-2-Create-a-permanent-tablespace-to-store-sample-test-data-Use-the-following-specifications" class="headerlink" title="6.2 Create a permanent tablespace to store sample test data. Use the following specifications:"></a>6.2 Create a permanent tablespace to store sample test data. Use the following specifications:</h4><h5 id="6-2-1-Tablespace-name-of-EXAMPLE"><a href="#6-2-1-Tablespace-name-of-EXAMPLE" class="headerlink" title="6.2.1 Tablespace name of EXAMPLE."></a>6.2.1 Tablespace name of EXAMPLE.</h5><h5 id="6-2-2-Initial-datafile-size-of-500MB-with-the-file-expected-to-grow-to-2GB"><a href="#6-2-2-Initial-datafile-size-of-500MB-with-the-file-expected-to-grow-to-2GB" class="headerlink" title="6.2.2 Initial datafile size of 500MB with the file expected to grow to 2GB."></a>6.2.2 Initial datafile size of 500MB with the file expected to grow to 2GB.</h5><h5 id="6-2-3-Initial-extent-size-of-1MB"><a href="#6-2-3-Initial-extent-size-of-1MB" class="headerlink" title="6.2.3 Initial extent size of 1MB."></a>6.2.3 Initial extent size of 1MB.</h5><h5 id="6-2-4-next-extent-size-of-1MB"><a href="#6-2-4-next-extent-size-of-1MB" class="headerlink" title="6.2.4 next extent size of 1MB."></a>6.2.4 next extent size of 1MB.</h5><h5 id="6-2-5-segment-space-management-freelist"><a href="#6-2-5-segment-space-management-freelist" class="headerlink" title="6.2.5 segment space management freelist"></a>6.2.5 segment space management freelist</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">create  tablespace EXAMPLE1 datafile &apos;/u01/app/oracle/oradata/PROD1/example.dbf&apos; size 500m autoextend on next 1m maxsize 2g extent management local uniform size 1m segment space management manual;</div><div class="line">select tablespace_name,next_extent,initial_extent from dba_tablespaces;</div></pre></td></tr></table></figure>
<h4 id="6-3-Create-a-permanent-tablespace-to-store-indexes-Use-the-following-specifications"><a href="#6-3-Create-a-permanent-tablespace-to-store-indexes-Use-the-following-specifications" class="headerlink" title="6.3 Create a permanent tablespace to store indexes,Use the following specifications:"></a>6.3 Create a permanent tablespace to store indexes,Use the following specifications:</h4><h5 id="6-3-1-Tablespace-name-of-INDX"><a href="#6-3-1-Tablespace-name-of-INDX" class="headerlink" title="6.3.1 Tablespace name of INDX"></a>6.3.1 Tablespace name of INDX</h5><h5 id="6-3-2-File-size-of-40MB"><a href="#6-3-2-File-size-of-40MB" class="headerlink" title="6.3.2 File size of 40MB"></a>6.3.2 File size of 40MB</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">create tablespace INDX datafile &apos;/u01/app/oracle/oradata/PROD1/indx.dbf&apos; size 40m autoextend on;</div></pre></td></tr></table></figure>
<h4 id="6-4-Create-a-permanent-tablespace-to-store-data-collected-from-the-various-Oracle-tools-Use-the-following-Specification"><a href="#6-4-Create-a-permanent-tablespace-to-store-data-collected-from-the-various-Oracle-tools-Use-the-following-Specification" class="headerlink" title="6.4 Create a permanent tablespace to store data collected from the various Oracle tools. Use the following Specification:"></a>6.4 Create a permanent tablespace to store data collected from the various Oracle tools. Use the following Specification:</h4><h5 id="6-4-1-Tablespace-name-of-TOOLS"><a href="#6-4-1-Tablespace-name-of-TOOLS" class="headerlink" title="6.4.1 Tablespace name of TOOLS."></a>6.4.1 Tablespace name of TOOLS.</h5><h5 id="6-4-2-File-size-of-10MB"><a href="#6-4-2-File-size-of-10MB" class="headerlink" title="6.4.2 File size of 10MB."></a>6.4.2 File size of 10MB.</h5><h5 id="6-4-3-Initial-extent-size-of-4MB"><a href="#6-4-3-Initial-extent-size-of-4MB" class="headerlink" title="6.4.3 Initial extent size of 4MB."></a>6.4.3 Initial extent size of 4MB.</h5><h5 id="6-4-4-Next-extent-size-of-4MB"><a href="#6-4-4-Next-extent-size-of-4MB" class="headerlink" title="6.4.4 Next extent size of 4MB."></a>6.4.4 Next extent size of 4MB.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">create tablespace TOOLS datafile &apos;/u01/app/oracle/oradata/PROD1/tools.dbf&apos; size 10m autoextend on next 4m extent management local uniform size 4m;</div></pre></td></tr></table></figure>
<h4 id="6-5-Create-a-permanent-tablespace-to-store-sample-test-data-Use-the-following-specification"><a href="#6-5-Create-a-permanent-tablespace-to-store-sample-test-data-Use-the-following-specification" class="headerlink" title="6.5 Create a permanent tablespace to store sample test data. Use the following specification:"></a>6.5 Create a permanent tablespace to store sample test data. Use the following specification:</h4><h5 id="6-5-1-Tablespace-name-of-TEST"><a href="#6-5-1-Tablespace-name-of-TEST" class="headerlink" title="6.5.1 Tablespace name of TEST."></a>6.5.1 Tablespace name of TEST.</h5><h5 id="6-5-2-Initial-datafile-size-of-400MB-with-the-file-expected-to-grow-to-4TB"><a href="#6-5-2-Initial-datafile-size-of-400MB-with-the-file-expected-to-grow-to-4TB" class="headerlink" title="6.5.2 Initial datafile size of 400MB with the file expected to grow to 4TB."></a>6.5.2 Initial datafile size of 400MB with the file expected to grow to 4TB.</h5><h5 id="6-5-3-Initial-extent-size-of-10MB"><a href="#6-5-3-Initial-extent-size-of-10MB" class="headerlink" title="6.5.3 Initial extent size of 10MB."></a>6.5.3 Initial extent size of 10MB.</h5><h5 id="6-5-4-Next-extent-size-of-10MB"><a href="#6-5-4-Next-extent-size-of-10MB" class="headerlink" title="6.5.4 Next extent size of 10MB."></a>6.5.4 Next extent size of 10MB.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">create bigfile tablespace TEST datafile &apos;/u01/app/oracle/oradata/PROD1/test.dbf&apos; size 400m autoextend on next 10m maxsize 4t extent management local uniform size 10m;</div></pre></td></tr></table></figure>
<h4 id="6-6-Create-and-manage-database-configuration-files-Triplex-the-controlfile-to-minimize-recovery-in-case-of-disk-drive-failure"><a href="#6-6-Create-and-manage-database-configuration-files-Triplex-the-controlfile-to-minimize-recovery-in-case-of-disk-drive-failure" class="headerlink" title="6.6 Create and manage database configuration files. Triplex the controlfile to minimize recovery in case of disk drive failure."></a>6.6 Create and manage database configuration files. Triplex the controlfile to minimize recovery in case of disk drive failure.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">show parameter control</div><div class="line">alter system set control_files=&apos;/u01/app/oracle/oradata/PROD1/control01.ctl&apos;,&apos;/u01/app/oracle/oradata/PROD1/control02.ctl&apos;,&apos;/u01/app/oracle/oradata/disk/PROD1/control03.ctl&apos; scope=spfile;</div><div class="line">shut immediate</div><div class="line">mkdir -p $ORACLE_BASE/oradata/disk/PROD1</div><div class="line">cp $ORACLE_BASE/oradata/PROD1/control01.ctl  $ORACLE_BASE/oradata/disk/PROD1/control03.ctl</div><div class="line">sqlplus / as sysdba</div><div class="line">startup</div><div class="line">show parameter control</div></pre></td></tr></table></figure>
<h3 id="7-Schema-statistics-and-Parameter-File-Configuration"><a href="#7-Schema-statistics-and-Parameter-File-Configuration" class="headerlink" title="7. Schema statistics and Parameter File Configuration"></a>7. <strong>Schema statistics and Parameter File Configuration</strong></h3><h4 id="7-1-Compute-statistics-for-the-HR-schemas-in-the-database-with-cost-based-optimization"><a href="#7-1-Compute-statistics-for-the-HR-schemas-in-the-database-with-cost-based-optimization" class="headerlink" title="7.1 Compute statistics for the HR schemas in the database with cost based optimization."></a>7.1 Compute statistics for the HR schemas in the database with cost based optimization.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EXEC DBMS_STATS.GATHER_SCHEMA_STATS(ownname=&gt;&apos;hr&apos;)</div></pre></td></tr></table></figure>
<h4 id="7-2-Investigate-the-parameter-file-for-reasonable-sizes-for-each-parameter-listed-Add-additional-parameters-as-you-deem-necessary-to-support-an-PL-SQL-file-I-O-optimal-database-environment-Add-the-following-OS-directory-’-home-oracle’-’-home-oracle-temp’-’-home-oracle-scripts’"><a href="#7-2-Investigate-the-parameter-file-for-reasonable-sizes-for-each-parameter-listed-Add-additional-parameters-as-you-deem-necessary-to-support-an-PL-SQL-file-I-O-optimal-database-environment-Add-the-following-OS-directory-’-home-oracle’-’-home-oracle-temp’-’-home-oracle-scripts’" class="headerlink" title="7.2 Investigate the parameter file for reasonable sizes for each parameter listed. Add additional parameters as you deem necessary to support an PL/SQL file I/O optimal database environment. Add the following OS directory:’/home/oracle’,’/home/oracle/temp’,’/home/oracle/scripts’."></a>7.2 Investigate the parameter file for reasonable sizes for each parameter listed. Add additional parameters as you deem necessary to support an PL/SQL file I/O optimal database environment. Add the following OS directory:’/home/oracle’,’/home/oracle/temp’,’/home/oracle/scripts’.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir -p /home/oracle/scripts</div><div class="line">alter system set utl_file_dir=&apos;/home/oracle/&apos;,&apos;/home/oracle/temp&apos;,&apos;/home/oracle/scripts&apos; scope=spfile;</div></pre></td></tr></table></figure>
<h3 id="8-Backup-the-database-to-prepare-for-complete-recovery-under-all-circumstances"><a href="#8-Backup-the-database-to-prepare-for-complete-recovery-under-all-circumstances" class="headerlink" title="8. Backup the database to prepare for complete recovery under all circumstances"></a>8. <strong>Backup the database to prepare for complete recovery under all circumstances</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">export ORACLE_SID=PROD1</div><div class="line">sqlplus / as sysdba</div><div class="line">shut immediate</div><div class="line">export ORACLE_SID=PROD2</div><div class="line">sqlplus / as sysdba</div><div class="line">shut immediate</div><div class="line">tar -czvf PROD1.tar.gz PROD1</div><div class="line">tar -czvf PROD2.tar.gz PROD2</div></pre></td></tr></table></figure>
<h3 id="9-Create-and-Manage-a-tablespace-that-uses-NFS-mounted-file-system-file"><a href="#9-Create-and-Manage-a-tablespace-that-uses-NFS-mounted-file-system-file" class="headerlink" title="9. Create and Manage a tablespace that uses NFS mounted file system file"></a>9. <strong>Create and Manage a tablespace that uses NFS mounted file system file</strong></h3><h4 id="9-1-Create-Database-Server-Directory-u02-oradata-prod1-Mapping-to-Management-Server-NFS-NFS-Server-network-Path-vol-oradata"><a href="#9-1-Create-Database-Server-Directory-u02-oradata-prod1-Mapping-to-Management-Server-NFS-NFS-Server-network-Path-vol-oradata" class="headerlink" title="9.1 Create Database Server Directory /u02/oradata/prod1,Mapping to Management Server NFS,NFS Server network Path: /vol/oradata"></a>9.1 Create Database Server Directory /u02/oradata/prod1,Mapping to Management Server NFS,NFS Server network Path: /vol/oradata</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">mkdir -p  /u02/oradata/prod1</div><div class="line">vi $ORACLE_HOME/dbs/oranfstab</div><div class="line">server: edbjr2p2</div><div class="line">path: 192.168.233.129</div><div class="line">export: /vol/oradata</div><div class="line">mount: /u02/oradata/prod1</div><div class="line">cd $ORACLE_HOME/rdbms/lib/    </div><div class="line">make -f ins_rdbms.mk dnfs_on</div></pre></td></tr></table></figure>
<h4 id="9-2-Create-a-tablespace-named-test-tbs-on-NFS-and-check-it-worked"><a href="#9-2-Create-a-tablespace-named-test-tbs-on-NFS-and-check-it-worked" class="headerlink" title="9.2 Create a tablespace named test_tbs on NFS and check it worked."></a>9.2 Create a tablespace named test_tbs on NFS and check it worked.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">create tablespace test_tbs datafile &apos;/u02/oradata/prod1/dnfs01.dbf&apos; size 5m autoextend off;</div><div class="line">select * from v$dnfs_servers;</div><div class="line">select * from v$dnfs_files;</div><div class="line">select * from v$dnfs_channels;</div></pre></td></tr></table></figure>
<h3 id="10-Use-Opatch-to-install-patch-on-PROD4"><a href="#10-Use-Opatch-to-install-patch-on-PROD4" class="headerlink" title="10. Use Opatch to install patch on PROD4"></a>10. <strong>Use Opatch to install patch on PROD4</strong></h3><h4 id="10-1-Apply-patch-on-PROD4"><a href="#10-1-Apply-patch-on-PROD4" class="headerlink" title="10.1 Apply patch on PROD4"></a>10.1 Apply patch on PROD4</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">export PATH=$PATH:/u01/app/oracle/product/11.2.0/db_1/OPatch</div><div class="line">unzip p12834800_112030_LINUX.zip </div><div class="line">cd 12834800/</div><div class="line">opatch lsinventory</div><div class="line">opatch apply  online -connectString PROD4:sys:oracle</div></pre></td></tr></table></figure>
<h3 id="11-Use-Grid-Infrastructure-to-manage-oracle-databases-and-other-resources"><a href="#11-Use-Grid-Infrastructure-to-manage-oracle-databases-and-other-resources" class="headerlink" title="11. Use Grid Infrastructure to manage oracle databases and other resources"></a>11. <strong>Use Grid Infrastructure to manage oracle databases and other resources</strong></h3><h4 id="11-1-Register-PROD4-EMREP-to-Grid-Infrastructure"><a href="#11-1-Register-PROD4-EMREP-to-Grid-Infrastructure" class="headerlink" title="11.1 Register PROD4,EMREP to Grid Infrastructure"></a>11.1 Register PROD4,EMREP to Grid Infrastructure</h4><h4 id="11-2-Register-ASM-Listener-to-Grid-Infrastructure"><a href="#11-2-Register-ASM-Listener-to-Grid-Infrastructure" class="headerlink" title="11.2 Register ASM,Listener to Grid Infrastructure"></a>11.2 Register ASM,Listener to Grid Infrastructure</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">cd /u01/app/11.2.0/grid/bin</div><div class="line">./crs_stat -t</div><div class="line">./crsctl start has     </div><div class="line">./srvctl add database -d PROD4 -o $ORACLE_HOME</div><div class="line">./srvctl add database -d EMREP -o $ORACLE_HOME</div><div class="line">lsnrctl stop</div><div class="line">./srvctl add listener</div><div class="line">./srvctl add asm</div><div class="line">./crs_stat -t</div><div class="line">./srvctl start database -d prod4</div><div class="line">./srvctl start database -d emrep</div><div class="line">./srvctl start asm</div><div class="line">./srvctl start listener</div><div class="line">./crs_stat -t</div></pre></td></tr></table></figure>
<h4 id="11-3-Create-ASM-diskgroup-DATA-use-ASMDISK1-4-normal-FRA-use-ASMDISK5-8-extermal"><a href="#11-3-Create-ASM-diskgroup-DATA-use-ASMDISK1-4-normal-FRA-use-ASMDISK5-8-extermal" class="headerlink" title="11.3 Create ASM diskgroup: DATA use ASMDISK1-4,normal; FRA use ASMDISK5-8,extermal."></a>11.3 Create ASM diskgroup: DATA use ASMDISK1-4,normal; FRA use ASMDISK5-8,extermal.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /u01/app/11.2.0/grid/bin/</div><div class="line">./asmca</div></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-14/67723751.jpg" alt="1-11-1" title="">
                </div>
                <div class="image-caption">1-11-1</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://phef16524.bkt.clouddn.com//18-11-14/47041457.jpg" alt="1-11-2" title="">
                </div>
                <div class="image-caption">1-11-2</div>
            </figure>
<h3 id="12-Use-Enterprise-Manager-Configuration-Assistant-EMCA-utility-ImplSkillsetIEd-subject"><a href="#12-Use-Enterprise-Manager-Configuration-Assistant-EMCA-utility-ImplSkillsetIEd-subject" class="headerlink" title="12. Use Enterprise Manager Configuration Assistant(EMCA) utility (ImplSkillsetIEd subject)"></a>12. <strong>Use Enterprise Manager Configuration Assistant(EMCA) utility (ImplSkillsetIEd subject)</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">alter user DBSNMP identified by oracle account unlock;</div><div class="line">alter user SYSMAN identified by oracle account unlock;</div><div class="line">emca -config dbcontrol db -repos recreate</div><div class="line">emctl status dbconsole</div><div class="line">emctl start dbconsole</div><div class="line">cat $ORACLE_HOME/install/portlist.ini</div><div class="line">https://localhost:1158/em/</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      ocm11g认证考试
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="oracle" scheme="https://aliennever.github.io/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>Weblogic安装补丁</title>
    <link href="https://aliennever.github.io/2018/04/20/20180420-Weblogic%E5%AE%89%E8%A3%85%E8%A1%A5%E4%B8%81/"/>
    <id>https://aliennever.github.io/2018/04/20/20180420-Weblogic安装补丁/</id>
    <published>2018-04-20T04:00:00.000Z</published>
    <updated>2018-09-05T02:13:05.222Z</updated>
    
    <content type="html"><![CDATA[<ol>
<li>停止打PSU补丁的服务器上的所有weblogic服务</li>
<li><p>查看当前weblogic是打过PSU补丁：</p>
<ul>
<li>进入D:\Oracle\Middleware\wlserver_10.3\server\bin目录：</li>
<li>执行setWLSEnv.cmd(Linux下执行setWLSEnv.sh，设置环境变量)</li>
<li>执行java weblogic.version:<figure class="highlight plain"><figcaption><span>weblogic.version</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">WebLogic Server 10.3.6.0.180417 PSU Patch for BUG27395085 THU FEB 21 18:34:42 IS T 2018</div><div class="line"></div><div class="line">WebLogic Server 10.3.6.0  Tue Nov 15 08:52:36 PST 2011 1441050</div><div class="line"></div><div class="line">Use &apos;weblogic.version -verbose&apos; to get subsystem information</div><div class="line"></div><div class="line">Use &apos;weblogic.utils.Versions&apos; to get version information for all modules</div></pre></td></tr></table></figure>
</li>
</ul>
<p>若没打补丁则第一部分只有最后一行，上面可见已打过PSU补丁</p>
<ul>
<li>查看详细信息，可看到已达补丁ID<br>D:\Oracle\Middleware\utils\bsu&gt;bsu.cmd -prod_dir=D:\Oracle\Middleware\wlserver_10.3 -status=applied -verbose -view<br>linux:<br>./bsu.sh -prod_dir=/home/weblogic/Oracle/Middleware/wlserver_10.3 -status=applied -verbose -view<figure class="highlight plain"><figcaption><span>-prod_dir=D:\Oracle\Middleware\wlserver_10.3 -status=applied -verbose -view</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"> 四月 20, 2018 11:30:36 上午 java.util.prefs.WindowsPreferences &lt;init&gt;</div><div class="line"> WARNING: Could not open/create prefs root node Software\JavaSoft\Prefs at root 0</div><div class="line"> x80000002. Windows RegCreateKeyEx(...) returned error code 5.</div><div class="line"> ProductName:       WebLogic Server</div><div class="line"> ProductVersion:    10.3 MP6</div><div class="line"> Components:        </div><div class="line">               WebLogic Server/Core Application Server,WebLogic Server/Admi</div><div class="line">               nistration Console,WebLogic Server/Configuration Wizard and</div><div class="line">               Upgrade Framework,WebLogic Server/Web 2.0 HTTP Pub-Sub Serve</div><div class="line">               r,WebLogic Server/WebLogic SCA,WebLogic Server/WebLogic JDBC</div><div class="line">                Drivers,WebLogic Server/Third Party JDBC Drivers,WebLogic S</div><div class="line">               erver/WebLogic Server Clients,WebLogic Server/WebLogic Web S</div><div class="line">               erver Plugins,WebLogic Server/UDDI and Xquery Support,WebLog</div><div class="line">               ic Server/Evaluation Database,WebLogic Server/Workshop Code</div><div class="line">               Completion Support</div><div class="line">BEAHome:           D:\Oracle\Middleware</div><div class="line">ProductHome:       D:\Oracle\Middleware\wlserver_10.3</div><div class="line">PatchSystemDir:    D:\Oracle\Middleware\utils\bsu</div><div class="line">PatchDir:          D:\Oracle\Middleware\patch_wls1036</div><div class="line">Profile:           Default</div><div class="line">DownloadDir:       D:\Oracle\Middleware\utils\bsu\cache_dir</div><div class="line">JavaVersion:       1.6.0_29</div><div class="line">JavaVendor:        Sun</div><div class="line"></div><div class="line"></div><div class="line">Patch ID:          GFWX</div><div class="line">PatchContainer:    GFWX.jar</div><div class="line">Checksum:          -2141599595</div><div class="line">Severity:          optional</div><div class="line">Category:          General</div><div class="line">CR/BUG:            27395085</div><div class="line">Restart:           true</div><div class="line">Description:       WLS PATCH SET UPDATE 10.3.6.0.180417</div><div class="line">WLS PATCH SET UPDATE 10.3.6.0.180417</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>卸载已打过的PSU补丁，如没有打过PSU则忽略该步骤：</p>
<ul>
<li>D:\Oracle\Middleware\utils\bsu&gt;bsr.cmd -remove -patchlist=ZLNA -prod_dir=D:\Oracle\Middleware\wlserver_10.3</li>
</ul>
</li>
<li>官网下载最新的PSU，查看weblogic的安装目录D:\Oracle\Middleware\utils\bsu是否有cache_dir目录，无则新建目录cache_dir<br>将下载的PSU解压到cache_dir中</li>
<li>修改bsu.cmd(linux下为bsu.sh)的内存大小，建议为1g，默认不修改会报错无法执行PSU脚本<br>MEM_ARGS=-Xms1024m -Xmx1024m</li>
<li><p>进入D:\Oracle\Middleware\utils\bsu目录下执行操作<br>D:\Oracle\Middleware\utils\bsujava -jar patch-client.jar -install -patch_download_dir=D:\Oracle\Middleware\utils\bsu\cache_dir -patchlist=GFWX(cache_dir中jar包名) -prod_dir=D:\Oracle\Middleware\wlserver_10.3<br>Linux：<br>./bsu.sh -install -patch_download_dir=/home/weblogic/Oracle/Middleware/utils/bsu/cache_dir -patchlist=GFWX -prod_dir=/home/weblogic/Oracle/Middleware/wlserver_10.3</p>
 <figure class="highlight plain"><figcaption><span>for conflicts..</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">No conflict(s) detected</div><div class="line">Installing Patch ID: GFWX..</div><div class="line">Result: Success</div></pre></td></tr></table></figure>
</li>
<li><p>启动weblogic服务验证</p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      weblogic学习
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="weblogic" scheme="https://aliennever.github.io/tags/weblogic/"/>
    
  </entry>
  
  <entry>
    <title>Oracle11g最小静默安装</title>
    <link href="https://aliennever.github.io/2018/03/05/20180305-Oracle11g%E6%9C%80%E5%B0%8F%E9%9D%99%E9%BB%98%E5%AE%89%E8%A3%85/"/>
    <id>https://aliennever.github.io/2018/03/05/20180305-Oracle11g最小静默安装/</id>
    <published>2018-03-05T04:00:00.000Z</published>
    <updated>2018-03-12T00:50:46.290Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h1><hr>
<ol>
<li>软件环境：<ul>
<li>VM虚拟机：redhat Linux </li>
<li>oracle11g安装包</li>
<li>单机环境需要准备所需依赖包packages</li>
</ul>
</li>
<li>单机环境安装net-tools和unzip：<ul>
<li>配置本地yum源<ol>
<li>打开VMware,在CD/DVD设置选项中，将Redhat7镜像文件放入CD/DVD中</li>
<li>将虚拟光驱挂载到 /mnt 文件夹下 （确保虚拟光驱处于链接状态）<code>mount /dev/sr0 /mnt</code></li>
<li>/mnt/Packages下安装net-tools和unzip包 <code>rpm -ivh net-tools</code></li>
</ol>
</li>
</ul>
</li>
<li><p>若修改主机名则在在/etc/hosts文件中添加主机名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">vi /etc/sysconfig/network</div><div class="line">HOSTNAME=Alien</div><div class="line">vi /etc/hosts</div><div class="line">127.0.0.1      localhost.localdomain localhost linuxhostname Alien</div></pre></td></tr></table></figure>
</li>
<li><p>修改内核参数文件/etc/sysctl.conf:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">fs.aio-max-nr = 1048576</div><div class="line">fs.file-max = 6815744</div><div class="line">kernel.shmall = 2097152</div><div class="line">kernel.shmmax = 536870912</div><div class="line">kernel.shmmni = 4096</div><div class="line">kernel.sem = 250 32000 100 128</div><div class="line">net.ipv4.ip_local_port_range = 9000 65500</div><div class="line">net.core.rmem_default = 262144</div><div class="line">net.core.rmem_max = 4194304</div><div class="line">net.core.wmem_default = 262144</div><div class="line">net.core.wmem_max = 1048586</div></pre></td></tr></table></figure>
</li>
<li><p>修改用户的限制文件/etc/security/limits.conf:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">oracle    soft    nproc    2047</div><div class="line">oracle    hard    nproc    16384</div><div class="line">oracle    soft    nofile    1024</div><div class="line">oracle    hard    nofile    65536</div><div class="line">oracle    soft    stack    10240</div></pre></td></tr></table></figure>
</li>
<li><p>单机环境通过FTP工具上传并安装依赖包packages <code>rpm -Uvh * --nodeps</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y install binutils compat-libcap1 compat-libstdc++-33  elfutils-libelf elfutils-libelf-devel gcc gcc-c++ glibc glibc-common glibc-devel glibc-headers ksh libaio libaio-devel libgcc libstdc++ libstdc++-devel libXi libXtst make sysstat unixODBC unixODBC-devel</div></pre></td></tr></table></figure>
</li>
<li><p>创建Oracle用户和相应的属组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">groupadd oinstall</div><div class="line">groupadd dba</div><div class="line">useradd -g oinstall -G dba oracle</div><div class="line">passwd oracle</div></pre></td></tr></table></figure>
</li>
<li><p>切换到oracle用户创建目录修改属组和权限</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir -p /home/oracle/oracle11g/base         #基目录</div><div class="line">mkdir -p /home/oracle/oracle11g/base/home    #家目录</div><div class="line">mkdir -p /home/oracle/oracle11g/oraInventory    #清单目录</div></pre></td></tr></table></figure>
</li>
<li><p>配置oracle用户的环境变量，编辑  ~/.bash_profile：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">export ORACLE_BASE=/home/oracle/oracle11g/base</div><div class="line">export ORACLE_HOME=$ORACLE_BASE/home </div><div class="line">export ORACLE_SID=orcl</div><div class="line">export PATH=$ORACLE_HOME/bin:$PATH:$HOME/bin </div><div class="line">export TNS_ADMIN=$ORACLE_HOME/network/admin </div><div class="line">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ORACLE_HOME/lib</div></pre></td></tr></table></figure>
</li>
<li><p>上传oracle11g安装包并解压</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">unzip p13390677_112040_Linux-x86-64_1of7.zip </div><div class="line">unzip p13390677_112040_Linux-x86-64_2of7.zip</div></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h1 id="安装数据库"><a href="#安装数据库" class="headerlink" title="安装数据库"></a>安装数据库</h1><hr>
<ol>
<li><p>修改静默安装响应文件/home/oracle/database/response/db_install.rsp:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">oracle.install.option=INSTALL_DB_SWONLY </div><div class="line">ORACLE_HOSTNAME=Alien</div><div class="line">UNIX_GROUP_NAME=oinstall</div><div class="line">INVENTORY_LOCATION=/home/oracle/oracle11g/oraInventory</div><div class="line">SELECTED_LANGUAGES=en,zh_CN</div><div class="line">ORACLE_HOME=/home/oracle/oracle11g/base/home</div><div class="line">ORACLE_BASE=/home/oracle/oracle11g/base</div><div class="line">oracle.install.db.InstallEdition=EE</div><div class="line">oracle.install.db.isCustomInstall=false</div><div class="line">oracle.install.db.DBA_GROUP=dba</div><div class="line">oracle.install.db.OPER_GROUP=oinstall</div><div class="line">DECLINE_SECURITY_UPDATES=true</div></pre></td></tr></table></figure>
</li>
<li><p>启动静默安装程序<br><code>./runInstaller -silent -ignorePrereq -responseFile /home/oracle/database/response/db_install.rsp</code></p>
</li>
<li><p>配置oracle监听<br><code>./netca /silent /responsefile /home/oracle/database/response/netca.rsp</code></p>
<ul>
<li><p>若启动报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Oracle Net Services 配置:</div><div class="line"> An unexpected error has been detected by HotSpot Virtual Machine:</div><div class="line"> SIGSEGV (0xb) at pc=0x00007f2ad35f0b9d, pid=22693, tid=139822952867648</div><div class="line"> Java VM: Java HotSpot(TM) 64-Bit Server VM (1.5.0_17-b03 mixed mode)</div><div class="line"> Problematic frame:</div><div class="line"> C  [libclntsh.so.11.1+0x62ab9d]  snlinGetAddrInfo+0x1b1</div><div class="line"> An error report file with more information is saved as hs_err_pid22693.log</div><div class="line"> If you would like to submit a bug report, please visit:</div><div class="line"> http://java.sun.com/webapps/bugreport/crash.jsp</div><div class="line"> ./netca: 行 178: 22693 已放弃          $JRE $JRE_OPTIONS -classpath $CLASSPATH oracle.net.ca.NetCA $*</div></pre></td></tr></table></figure>
</li>
<li><p>尝试修改主机名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">vi /etc/sysconfig/network</div><div class="line">HOSTNAME=Alien</div><div class="line">vi /etc/hosts</div><div class="line">127.0.0.1      localhost.localdomain localhost linuxhostname Alien</div></pre></td></tr></table></figure>
</li>
<li><p>查看监听器状态：<code>lsnrctl status</code></p>
</li>
</ul>
</li>
<li><p>静默创建数据库:<br><code>./dbca -silent -responseFile /home/oracle/database/response/dbca.rsp</code><br>建库后实例检查：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ps -ef | grep ora_ | grep -v grep | wc -l</div><div class="line">ps -ef | grep ora_ | grep -v grep</div></pre></td></tr></table></figure></li>
</ol>
]]></content>
    
    <summary type="html">
    
      oracle学习
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="oracle" scheme="https://aliennever.github.io/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>Linux虚拟机安装</title>
    <link href="https://aliennever.github.io/2018/03/01/20180301-Linux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85/"/>
    <id>https://aliennever.github.io/2018/03/01/20180301-Linux虚拟机安装/</id>
    <published>2018-03-01T04:00:00.000Z</published>
    <updated>2018-07-03T08:37:49.427Z</updated>
    
    <content type="html"><![CDATA[<h1 id="系统安装："><a href="#系统安装：" class="headerlink" title="系统安装："></a>系统安装：</h1><hr>
<ul>
<li>最小化安装：<ol>
<li>打开VMware，新建虚拟机&gt;典型配置&gt;稍后安装操作系统&gt;Linux&gt;选择存储文件夹&gt;设置虚拟机磁盘容量&gt;完成</li>
<li>CD/DVD选择Linux系统镜像文件&gt;开启虚拟机&gt;Install Linux&gt;安装语言选择简体中文&gt;设定时间、配置分区(规划可以如下图)、配置网络&gt;网络和主机名选择连接&gt;设置root用户密码<br><img src="http://wx4.sinaimg.cn/mw690/5a56e9c9ly1foxb7ijnx6j20m80gljsw.jpg" alt="系统分区"></li>
</ol>
</li>
</ul>
<h1 id="安装桌面环境："><a href="#安装桌面环境：" class="headerlink" title="安装桌面环境："></a>安装桌面环境：</h1><hr>
<ol>
<li>打开VMware,在CD/DVD设置选项中，将Redhat7镜像文件放入CD/DVD中</li>
<li><p>root用户下将虚拟光驱挂载到 /mnt 文件夹下 （确保虚拟光驱处于链接状态）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# mount /dev/sr0 /mnt</div><div class="line">mount: /dev/sr0 is write-protected, mounting read-only</div></pre></td></tr></table></figure>
</li>
<li><p>配置光盘为本地yum源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# vi /etc/yum.repos.d/local.repo</div><div class="line">[local]</div><div class="line">name=local</div><div class="line">baseurl=file:///mnt</div><div class="line">enabled=1</div><div class="line">gpgcheck=0</div></pre></td></tr></table></figure>
</li>
<li><p>查看组yum包\安装桌面环境组件\切换到图形化界面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# yum grouplist</div><div class="line">[root@localhost ~]# yum groupinstall -y &quot;Server with GUI&quot;</div><div class="line">[root@localhost ~]# startx</div></pre></td></tr></table></figure>
</li>
<li><p>默认启动模式查看与切换</p>
<ul>
<li>查看当前启动模式： <code>systemctl get-default</code></li>
<li>桌面启动：<code>systemctl set-default graphical.target</code></li>
<li>命令行启动：<code>systemctl set-default multi-user.target</code></li>
</ul>
</li>
</ol>
<h1 id="安装VMware-tools"><a href="#安装VMware-tools" class="headerlink" title="安装VMware tools:"></a>安装VMware tools:</h1><hr>
<ol>
<li>虚拟机 &gt;&gt;客户机 &gt;&gt; 安装/升级 VMware Tools</li>
<li><p>挂载解压资源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost /]# cd /media/</div><div class="line">[root@localhost media]# mount /dev/cdrom /media</div><div class="line">  mount: /dev/sr0 is write-protected, mounting read-only</div><div class="line">[root@localhost media]# cp VMwareTools-10.0.10-4301679.tar.gz /tmp</div><div class="line">[root@localhost media]# cd /tmp</div><div class="line">[root@localhost tmp]# chmod +x VMwareTools-10.0.10-4301679.tar.gz</div><div class="line">[root@localhost tmp]# tar zxf VMwareTools-10.0.10-4301679.tar.gz</div></pre></td></tr></table></figure>
</li>
<li><p>安装并卸载CD-ROM</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost tmp]# cd vmware-tools-distrib/</div><div class="line">[root@localhost vmware-tools-distrib]# ./vmware-install.pl</div><div class="line">[root@localhost vmware-tools-distrib]# cd /</div><div class="line">[root@localhost /]# umount /media</div></pre></td></tr></table></figure></li>
</ol>
]]></content>
    
    <summary type="html">
    
      Linux学习
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Linux" scheme="https://aliennever.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>weblogic集群配置</title>
    <link href="https://aliennever.github.io/2018/02/26/20180226-weblogic%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/"/>
    <id>https://aliennever.github.io/2018/02/26/20180226-weblogic集群配置/</id>
    <published>2018-02-26T04:00:00.000Z</published>
    <updated>2018-03-01T00:45:24.984Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、相关概念"><a href="#一、相关概念" class="headerlink" title="一、相关概念"></a>一、相关概念</h1><hr>
<ul>
<li><p>服务器(Server):</p>
<ol>
<li>AdminServer：主要用于管理，包括应用部署，动态创建server，以及各种服务配置.所以集群环境下不会将应用、数据源等服务部署到AdminServer上面，因为AdminServer仅仅是充当管理者角色而已。运维过程中，还起到监控其它服务器状态的作用。</li>
<li>PorxyServer：主要受理各种外部请求，做负载均衡，将具体工作交给具体的服务器。所以集群环境下，也不会将应用部署到ProxyServer上。除weblogic自带负载均衡方式外，也可用Apache\Nginx软负载或者F5硬负载等方式部署。</li>
<li>Server: 实际处理业务请求的服务器，把前段代理服务器上接受到的任务进行实际处理，处理完了反馈给客户端。</li>
</ol>
<p>AdminServer只负责管理、ProxyServer负责受理分配、而普通的Server就负责处理业务请求。</p>
</li>
<li><p>集群(cluster):<br>控制台里面配置的集群，仅仅用于设置server之间的多播通信。server之间使用多播通信，互相告诉自己状态是否可用。</p>
</li>
<li><p>计算机(machine):<br>可选配置：控制台里面配置的计算机，仅仅用于配置“节点管理器”信息（地址、端口）。然后根据配置信息向节点管理器发送操作命令。</p>
</li>
<li><p>节点管理器(nodemanager):<br>可选服务：节点管理器在集群架构中，不是必须的。它的作用是用来管理server的生命周期，如果没有使用节点管理器，那么集群中的所有server的启动、关闭等常用的操作，必须通过运行startManagedWebLogic.cmd\stopManagedWebloigc.cmd脚本来完成(脚本路径：D:\Oracle\Middleware\user_projects\domains\base_domain\bin)。例如启动server1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">startManagedWebLogic server1 127.0.0.1:7001</div><div class="line">server1 启动的受管服务器的名称   </div><div class="line">address 该域的管理服务器的IP地址   </div><div class="line">port    该域的管理服务器的监听端口</div></pre></td></tr></table></figure>
<p>所以有些集群环境下，你能看到有多少个server，就有多少个启动脚本，实际上就是执行上面这个命令。如果集群中的server分布在多台主机上面，那每次启动服务非常不方便，所以这时候，节点管理器就派上用场了，节点管理器负责管理本机server的启动、关闭等生命周期。</p>
</li>
</ul>
<hr>
<h1 id="二、单机单域集群部署实例"><a href="#二、单机单域集群部署实例" class="headerlink" title="二、单机单域集群部署实例:"></a>二、单机单域集群部署实例:</h1><hr>
<ul>
<li>部署规划：</li>
</ul>
<table>
<thead>
<tr>
<th>运行Server</th>
<th>主机Ip</th>
<th>访问port</th>
</tr>
</thead>
<tbody>
<tr>
<td>AdminServer</td>
<td>172.16.92.41</td>
<td>7001</td>
</tr>
<tr>
<td>PorxyServer</td>
<td>172.16.92.41</td>
<td>17000</td>
</tr>
<tr>
<td>Server1</td>
<td>172.16.92.41</td>
<td>17001</td>
</tr>
<tr>
<td>Server2</td>
<td>172.16.92.41</td>
<td>17002</td>
</tr>
</tbody>
</table>
<p>  其中AdminServer是总控制端，ProxyServer为负载分发代理服务器，server1、server2是集群中的两个服务节点。</p>
<ul>
<li>创建服务器\集群\计算机:<ol>
<li>登录weblogic控制台:<br>通过域目录下startWebLogic脚本启动weblogic服务，浏览器localhost:7001/console进入weblogic控制台。</li>
<li>建立服务器(Sever):<br>域结构&gt;环境&gt;服务器：分别输入ip\port建立Server1\Server2\PorxyServer</li>
<li>建立集群(cluster)<br>域结构&gt;环境&gt;集群：建立Cluster1，消息传送模式选多点传送，传送地址和端口默认。建好后点击Cluster1超链接&gt;服务器选项卡将Sever1\Sever2加入到集群中。</li>
<li>建立计算机(machine):<br>域结构&gt;环境&gt;计算机：建立Machine1,默认配置，建好后点击Machine1超链接&gt;服务器选项卡将Sever1\Sever2\PorxyServer加入到集群中。</li>
</ol>
</li>
<li><p>部署服务：<br>域结构&gt;部署：分别选择相应的项目路径部署Proxy项目和MyProject项目，MyProject项目为自建测试项目(若有数据源需要在域结构&gt;服务&gt;数据源中配置数据源)，Proxy项目为weblogic自带负载分发项目，只在WEB-INF目录下包含web.xml和weblogic.xml，相应代码如下：</p>
<ul>
<li><p>web.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">  xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;</div><div class="line">  xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</div><div class="line">  id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;</div><div class="line">  &lt;display-name&gt;WeblogicProxy&lt;/display-name&gt;</div><div class="line">  &lt;!-- 配置web的servlet，拦截所有的请求，proxy内部会检测server的状态、负载情况，然后根据算法再将请求转发给具体的server处理 --&gt;</div><div class="line">  &lt;servlet&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;servlet-class&gt;weblogic.servlet.proxy.HttpClusterServlet&lt;/servlet-class&gt;</div><div class="line">    &lt;init-param&gt;</div><div class="line">      &lt;param-name&gt;WebLogicCluster&lt;/param-name&gt;</div><div class="line">      &lt;param-value&gt;172.16.92.41:17001|172.16.92.41:17002&lt;/param-value&gt;</div><div class="line">    &lt;/init-param&gt;</div><div class="line">    &lt;init-param&gt;</div><div class="line">      &lt;param-name&gt;DebugConfigInfo&lt;/param-name&gt;</div><div class="line">      &lt;param-value&gt;ON&lt;/param-value&gt;</div><div class="line">    &lt;/init-param&gt;</div><div class="line">    &lt;init-param&gt;</div><div class="line">      &lt;param-name&gt;verbose&lt;/param-name&gt;</div><div class="line">      &lt;param-value&gt;true&lt;/param-value&gt;</div><div class="line">    &lt;/init-param&gt;</div><div class="line">  &lt;/servlet&gt;</div><div class="line"></div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;/&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.jspx&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.htm&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.jpd&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.jcx&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.dtf&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">  &lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;HttpClusterServlet&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;*.jws&lt;/url-pattern&gt;</div><div class="line">  &lt;/servlet-mapping&gt;</div><div class="line">&lt;/web-app&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>weblogic.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;wls:weblogic-web-app xmlns:wls=&quot;http://xmlns.oracle.com/weblogic/weblogic-web-app&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.3/weblogic-web-app.xsd&quot;&gt;</div><div class="line">    &lt;wls:weblogic-version&gt;10.3.6&lt;/wls:weblogic-version&gt;</div><div class="line">    &lt;wls:context-root&gt;/&lt;/wls:context-root&gt;</div><div class="line">&lt;/wls:weblogic-web-app&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>启动服务器节点</p>
<ol>
<li>修改D:\Oracle\Middleware\wlserver_10.3\common\nodemanager目录下nodemanager.properties 字段，将默认的ListenAddress=localhost</li>
<li>D:\Oracle\Middleware\wlserver_10.3\server\bin目录下的脚本installNodeMgrSvc.cmd，然后在计算机&gt;管理&gt;服务启动Oracle WebLogic NodeManager (D_Oracle_Middleware_wlserver_10.3)服务</li>
<li>进入weblogic控制台界面，选择服务器&gt;控制选项卡，勾选对应的托管服务器，就可以进行启动关闭等操作。</li>
</ol>
</li>
</ul>
<hr>
<h1 id="三、双机集群部署实例："><a href="#三、双机集群部署实例：" class="headerlink" title="三、双机集群部署实例："></a>三、双机集群部署实例：</h1><hr>
<ul>
<li>前期注意：<ol>
<li>集群中的所有Server必须位于同一网段，并且必须是IP广播(UDP)可到达的;</li>
<li>集群中的所有Server必须使用相同的版本,包括 Service Pack;</li>
<li>集群中的Server必须使用永久的静态IP地址。动态IP 地址分配不能用于集群环境。如果服务器位于防火墙后面，而客户机位于防火墙外面，那么服务器必须有公共的静态IP地址，只有这样，客户端才能访问服务器;</li>
</ol>
</li>
<li>部署规划：</li>
</ul>
<table>
<thead>
<tr>
<th>运行Server</th>
<th>主机Ip</th>
<th>访问port</th>
</tr>
</thead>
<tbody>
<tr>
<td>AdminServer</td>
<td>172.16.92.41</td>
<td>7001</td>
</tr>
<tr>
<td>ProxyServer</td>
<td>172.16.92.41</td>
<td>17000</td>
</tr>
<tr>
<td>Server1</td>
<td>172.16.92.41</td>
<td>17001</td>
</tr>
<tr>
<td>Server2</td>
<td>172.16.92.42</td>
<td>17001</td>
</tr>
</tbody>
</table>
<ul>
<li>创建域：<ul>
<li>172.16.92.41:</li>
</ul>
<ol>
<li>启动weblogic配置向导，创建weblogic域，选择可选配置选项卡选择’管理服务器’和’受管理服务器，集群和计算机’两个选项，依照上述规划进行建立。</li>
<li>启动weblogic控制台，登录管理服务，安装部署应用及代理服务.配置Jndi数据源。<br>以上步骤注意地址一定输入准确的IP地址不要使用localhost！<br>管理服务AdminServer监听地址为空！<br>若本机有虚拟网卡需要禁用！</li>
</ol>
<ul>
<li>172.16.92.42：<br>启动weblogic配置向导，创建weblogic域，选择可选配置选项卡选择’管理服务器’和’受管理服务器，集群和计算机’两个选项，管理服务器IP选择172.16.92.41服务器名建立要与172.16.92.41上建立的相匹配(即Server2)，集群和计算机不用配置。</li>
</ul>
</li>
<li>部署服务：<br>分别选择相应的项目路径部署Proxy项目和MyProject项目，程序中调用Jndi时也需要使用准确的IP地址！</li>
</ul>
]]></content>
    
    <summary type="html">
    
      weblgoic学习
    
    </summary>
    
      <category term="学习笔记" scheme="https://aliennever.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="weblogic" scheme="https://aliennever.github.io/tags/weblogic/"/>
    
  </entry>
  
</feed>
