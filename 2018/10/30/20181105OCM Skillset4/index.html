<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>11gOCM-Skillset4 | Alien | 有梦不觉人生寒,有爱不觉天涯远</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="oracle">
    <meta name="description" content="ocm11g认证考试">
<meta name="keywords" content="oracle">
<meta property="og:type" content="article">
<meta property="og:title" content="11gOCM-Skillset4">
<meta property="og:url" content="https://aliennever.github.io/2018/10/30/20181105OCM Skillset4/index.html">
<meta property="og:site_name" content="Alien">
<meta property="og:description" content="ocm11g认证考试">
<meta property="og:updated_time" content="2018-11-06T03:47:25.030Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="11gOCM-Skillset4">
<meta name="twitter:description" content="ocm11g认证考试">
    
        <link rel="alternate" type="application/atom+xml" title="Alien" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/Alien.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">LG</h5>
          <a href="mailto:76229074@qq.com" title="76229074@qq.com" class="mail">76229074@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/AlienNever" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://weibo.com/u/1515645385" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">11gOCM-Skillset4</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">11gOCM-Skillset4</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-10-30T04:00:00.000Z" itemprop="datePublished" class="page-time">
  2018-10-30
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/学习笔记/">学习笔记</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Skillset-4"><span class="post-toc-number">1.</span> <span class="post-toc-text">Skillset 4</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#TASKS"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">TASKS:</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-Create-Additional-Buffer-Cache"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">1. Create Additional Buffer Cache</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-1-set-up-the-db-16k-cache-size-Then-using-the-16K-cache-to-create-tablespace-Sga-16k-size-15m"><span class="post-toc-number">1.1.1.1.</span> <span class="post-toc-text">1.1 set up the db_16k_cache_size (Then using the 16K cache to create tablespace) Sga 16k_size 15m</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-Administer-partitioned-tables-and-Manage-encrypted-tablespaces"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">2.Administer partitioned tables and Manage encrypted tablespaces</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-1-Create-a-reference-partition-table"><span class="post-toc-number">1.1.2.1.</span> <span class="post-toc-text">2.1 Create a reference partition table</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-1-1-new-orders-is-range-partition-table-You-need-to-create-table-order-items-using-reference-partition"><span class="post-toc-number">1.1.2.1.1.</span> <span class="post-toc-text">2.1.1. new_orders is range partition table,You need to create table order_items using reference partition</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-1-2-The-order-items-table-contains-such-as-the-following"><span class="post-toc-number">1.1.2.1.2.</span> <span class="post-toc-text">2.1.2. The order_items table contains such as the following:</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-1-3-The-new-orders-table-partition-using-tablespace-tbs1-and-tbs2-requirements-the-order-items-table-partition-refer-to-new-orders-table-partition-tablespace-consistency"><span class="post-toc-number">1.1.2.1.3.</span> <span class="post-toc-text">2.1.3. The new_orders table partition using tablespace tbs1 and tbs2, requirements the order_items table partition refer to new_orders table partition tablespace consistency</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-1-4-Execute-the-script-insert-data-into-the-partition-table-as-follows"><span class="post-toc-number">1.1.2.1.4.</span> <span class="post-toc-text">2.1.4. Execute the script, insert data into the partition table, as follows::</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-2-Create-interval-partition-table"><span class="post-toc-number">1.1.2.2.</span> <span class="post-toc-text">2.2 Create interval partition table</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-2-1-Execute-the-script-to-create-4-tablespace-the-script-follows"><span class="post-toc-number">1.1.2.2.1.</span> <span class="post-toc-text">2.2.1. Execute the script to create 4 tablespace, the script follows::</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-2-2-Partition-table-has-4-range-partitioning-respectively-contained-2002-2003-2004-2005-data-and-the-4-partition-tablespace-is-respectively-the-4-tablespace-in-front-of-the-establishment"><span class="post-toc-number">1.1.2.2.2.</span> <span class="post-toc-text">2.2.2. Partition table has 4 range partitioning, respectively contained 2002,2003,2004,2005 data, and the 4 partition tablespace is respectively the 4 tablespace in front of the establishment;</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-2-3-the-partition-is-interval-of-1-years"><span class="post-toc-number">1.1.2.2.3.</span> <span class="post-toc-text">2.2.3. the partition is interval of 1 years;</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-2-4-The-name-of-the-table-is-newsales-partitioning-key-is-time-id-contains-a-column-as-follows"><span class="post-toc-number">1.1.2.2.4.</span> <span class="post-toc-text">2.2.4. The name of the table is newsales, partitioning key is time_id, contains a column as follows:</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-2-5-Execute-the-script-insert-data-into-the-partition-table-scripts-are-as-follows"><span class="post-toc-number">1.1.2.2.5.</span> <span class="post-toc-text">2.2.5. Execute the script, insert data into the partition table, scripts are as follows:</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-3-Create-and-Manage-encrypted-tablespaces"><span class="post-toc-number">1.1.2.3.</span> <span class="post-toc-text">2.3 Create and Manage encrypted tablespaces</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-3-1-Create-the-encrypted-tablespace-in-PROD3"><span class="post-toc-number">1.1.2.3.1.</span> <span class="post-toc-text">2.3.1 Create the encrypted tablespace in PROD3:</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-3-2-Execute-the-given-script-home-oracle-scripts-sec-tbs-sql-which-has-created-the-user-statement-and-temporary-tablespace-name-is-temp"><span class="post-toc-number">1.1.2.3.2.</span> <span class="post-toc-text">2.3.2 Execute the given script (/home/oracle/scripts/sec_tbs.sql), which has created the user statement, and temporary tablespace name is temp</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-3-3-The-two-table-belongs-to-the-SH-into-the-encryption-tablespace"><span class="post-toc-number">1.1.2.3.3.</span> <span class="post-toc-text">2.3.3 The two table belongs to the SH into the encryption tablespace.</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-Create-and-manage-LOB"><span class="post-toc-number">1.1.3.</span> <span class="post-toc-text">3. Create and manage LOB</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-1-Implement-securefile-LOB"><span class="post-toc-number">1.1.3.1.</span> <span class="post-toc-text">3.1 Implement securefile LOB</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-1-1-Create-a-tablespace-Use-the-following-specifications"><span class="post-toc-number">1.1.3.1.1.</span> <span class="post-toc-text">3.1.1. Create a tablespace,Use the following specifications:</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-1-2-Create-a-new-table-in-the-HR-schema-in-the-PROD1-database-with-the-following-specifications"><span class="post-toc-number">1.1.3.1.2.</span> <span class="post-toc-text">3.1.2. Create a new table in the HR schema in the PROD1 database with the following specifications:</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-1-3-Load-data-into-the-TEST-SPEC-using-the-script-name-of-securelob-sp-sql"><span class="post-toc-number">1.1.3.1.3.</span> <span class="post-toc-text">3.1.3. Load data into the TEST_SPEC,using the script name of securelob_sp.sql</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-2-Implement-BasicFiles-LOB"><span class="post-toc-number">1.1.3.2.</span> <span class="post-toc-text">3.2 Implement BasicFiles LOB</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-2-1-Create-a-new-table-in-the-HR-schema-in-the-PROD1-database-with-the-following-specifications"><span class="post-toc-number">1.1.3.2.1.</span> <span class="post-toc-text">3.2.1 Create a new table in the HR schema in the PROD1 database with the following specifications:</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-2-2-Table-name-MAGAZINE-ARTICLES"><span class="post-toc-number">1.1.3.2.2.</span> <span class="post-toc-text">3.2.2 Table name MAGAZINE_ARTICLES</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-2-3-Tablespace-LOB-DATA-with-a-16KB-chunk-size-initial-and-next-extents-each-with-a-size-of-2MB"><span class="post-toc-number">1.1.3.2.3.</span> <span class="post-toc-text">3.2.3 Tablespace LOB_DATA with a 16KB chunk size,initial and next extents each with a size of 2MB.</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-2-4-Use-the-nocache-option-and-disable-storage-in-row"><span class="post-toc-number">1.1.3.2.4.</span> <span class="post-toc-text">3.2.4 Use the nocache option and disable storage in row.</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-2-5-Use-import-dump-to-populate-the-HR-MAGAZINE-ARTICLES-table-with-data-from-the-exp-mag-dmp-file"><span class="post-toc-number">1.1.3.2.5.</span> <span class="post-toc-text">3.2.5 Use import dump to populate the HR.MAGAZINE_ARTICLES table with data from the exp_mag.dmp file.</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-Implement-fine-grained-access-control-Fine-Grained-Auditing"><span class="post-toc-number">1.1.4.</span> <span class="post-toc-text">4. Implement fine-grained access control (Fine-Grained Auditing)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-1-Set-up-FGA-on-the-SALARY-and-COMMISSION-PCT-columns-of-the-EMPLOYEES-table-in-the-HR-schema-of-the-PROD1"><span class="post-toc-number">1.1.4.1.</span> <span class="post-toc-text">4.1 Set up FGA on the SALARY and COMMISSION_PCT columns of the EMPLOYEES table in the HR schema of the PROD1</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-2-Validate-that-the-FGA-is-taking-place-by-executing-statements-that-should-result-in-auditing-records-being-created-and-by-executing-statements-where-no-auditing-records-will-be-generated-Do-not-delete-your-audit-records"><span class="post-toc-number">1.1.4.2.</span> <span class="post-toc-text">4.2 Validate that the FGA is taking place by executing statements that should result in auditing records being created and by executing statements where no auditing records will be generated. Do not delete your audit records.</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-Administer-flashback-data"><span class="post-toc-number">1.1.5.</span> <span class="post-toc-text">5. Administer flashback data</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-1-Create-a-table-named-ORIGINAL-SALARY-in-the-HR-schema-in-the-PROD1-database-that-includes-the-employee-id-commission-pct-and-salary-of-all-records-in-the-HR-EMPLOYEES-table-Note-the-date-and-time-and-then-commit-the-changes"><span class="post-toc-number">1.1.5.1.</span> <span class="post-toc-text">5.1  Create a table named ORIGINAL_SALARY in the HR schema in the PROD1 database that includes the employee_id,commission_pct and salary of all records in the HR.EMPLOYEES table.Note the date and time and then commit the changes.</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-2-Delete-all-employees-in-the-HR-ORIGINAL-SALARY-table-whose-HIRE-DATE-is-before-1994-Commit-the-changes"><span class="post-toc-number">1.1.5.2.</span> <span class="post-toc-text">5.2  Delete all employees in the HR.ORIGINAL_SALARY table whose HIRE_DATE is before 1994. Commit the changes.</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-3-A-hr-schema-table-DEPARTMENTS-NEW-was-repeatedly-asked-DROP-return-to-the-specified-data-version-table-include-department-name-column-tablespace-dev-data"><span class="post-toc-number">1.1.5.3.</span> <span class="post-toc-text">5.3  A hr schema table(DEPARTMENTS_NEW) was repeatedly asked DROP, return to the specified data version table include department_name column tablespace:dev_data</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-Flashback-archive"><span class="post-toc-number">1.1.6.</span> <span class="post-toc-text">5.4  Flashback archive</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-4-1-Create-a-new-tablespace-name-of-FRATBS-file-size-of-50MB"><span class="post-toc-number">1.1.6.1.</span> <span class="post-toc-text">5.4.1 Create a new tablespace name of FRATBS, file size of 50MB.</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-4-2-Create-Flashback-Data-Archive-name-of-fra1-using-the-tablespace-name-of-FRATBS-The-archive-administrator-name-of-FR-ADMIN"><span class="post-toc-number">1.1.6.2.</span> <span class="post-toc-text">5.4.2 Create Flashback Data Archive name of fra1,using the tablespace name of FRATBS,The archive administrator name of FR_ADMIN.</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-4-3-Enable-Flashback-Data-Archive-for-a-table-name-of-SH-PROMOTIONS-and-includes-data-that-will-be-retained-for-one-years"><span class="post-toc-number">1.1.6.3.</span> <span class="post-toc-text">5.4.3 Enable Flashback Data Archive for a table name of SH.PROMOTIONS, and includes data that will be retained for one years.</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-4-4-Examine-the-contents-of-the-table-SH-PROMOTIONS-that-before-existed-20-minutes-to-1-minutes"><span class="post-toc-number">1.1.6.4.</span> <span class="post-toc-text">5.4.4 Examine the contents of the table SH.PROMOTIONS that before existed 20 minutes to 1 minutes.</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-4-5-Execute-the-s4-1-sql-script"><span class="post-toc-number">1.1.6.5.</span> <span class="post-toc-text">5.4.5 Execute the s4_1.sql script.</span></a></li></ol></li></ol></li></ol></li></ol>
        </nav>
    </aside>
    
<article id="post-20181105OCM Skillset4"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">11gOCM-Skillset4</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-10-30 12:00:00" datetime="2018-10-30T04:00:00.000Z"  itemprop="datePublished">2018-10-30</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/学习笔记/">学习笔记</a></li></ul>



            

            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Skillset-4"><a href="#Skillset-4" class="headerlink" title="Skillset 4"></a>Skillset 4</h1><h2 id="TASKS"><a href="#TASKS" class="headerlink" title="TASKS:"></a>TASKS:</h2><h3 id="1-Create-Additional-Buffer-Cache"><a href="#1-Create-Additional-Buffer-Cache" class="headerlink" title="1. Create Additional Buffer Cache"></a>1. <strong>Create Additional Buffer Cache</strong></h3><h4 id="1-1-set-up-the-db-16k-cache-size-Then-using-the-16K-cache-to-create-tablespace-Sga-16k-size-15m"><a href="#1-1-set-up-the-db-16k-cache-size-Then-using-the-16K-cache-to-create-tablespace-Sga-16k-size-15m" class="headerlink" title="1.1 set up the db_16k_cache_size (Then using the 16K cache to create tablespace) Sga 16k_size 15m"></a>1.1 set up the db_16k_cache_size (Then using the 16K cache to create tablespace) Sga 16k_size 15m</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">alter system set db_16k_cache_size=15m;</div><div class="line">create tablespace tbs_16k datafile &apos;/u01/app/oracle/oradata/PROD1/tbs_16k_02.dbf&apos; size 20m autoextend on blocksize 16k;</div></pre></td></tr></table></figure>
<h3 id="2-Administer-partitioned-tables-and-Manage-encrypted-tablespaces"><a href="#2-Administer-partitioned-tables-and-Manage-encrypted-tablespaces" class="headerlink" title="2.Administer partitioned tables and Manage encrypted tablespaces"></a>2.<strong>Administer partitioned tables and Manage encrypted tablespaces</strong></h3><h4 id="2-1-Create-a-reference-partition-table"><a href="#2-1-Create-a-reference-partition-table" class="headerlink" title="2.1 Create a reference partition table"></a>2.1 Create a reference partition table</h4><h5 id="2-1-1-new-orders-is-range-partition-table-You-need-to-create-table-order-items-using-reference-partition"><a href="#2-1-1-new-orders-is-range-partition-table-You-need-to-create-table-order-items-using-reference-partition" class="headerlink" title="2.1.1. new_orders is range partition table,You need to create table order_items using reference partition"></a>2.1.1. new_orders is range partition table,You need to create table order_items using reference partition</h5><h5 id="2-1-2-The-order-items-table-contains-such-as-the-following"><a href="#2-1-2-The-order-items-table-contains-such-as-the-following" class="headerlink" title="2.1.2. The order_items table contains such as the following:"></a>2.1.2. The order_items table contains such as the following:</h5><p>order_id number(12) not null,<br>line_item_id number(3) not null,<br>product_id number(6) not null,<br>unit_price number(8,2) not null,<br>quantity number(8) not null</p>
<h5 id="2-1-3-The-new-orders-table-partition-using-tablespace-tbs1-and-tbs2-requirements-the-order-items-table-partition-refer-to-new-orders-table-partition-tablespace-consistency"><a href="#2-1-3-The-new-orders-table-partition-using-tablespace-tbs1-and-tbs2-requirements-the-order-items-table-partition-refer-to-new-orders-table-partition-tablespace-consistency" class="headerlink" title="2.1.3. The new_orders table partition using tablespace tbs1 and tbs2, requirements the order_items table partition refer to new_orders table partition tablespace consistency"></a>2.1.3. The new_orders table partition using tablespace tbs1 and tbs2, requirements the order_items table partition refer to new_orders table partition tablespace consistency</h5><h5 id="2-1-4-Execute-the-script-insert-data-into-the-partition-table-as-follows"><a href="#2-1-4-Execute-the-script-insert-data-into-the-partition-table-as-follows" class="headerlink" title="2.1.4. Execute the script, insert data into the partition table, as follows::"></a>2.1.4. Execute the script, insert data into the partition table, as follows::</h5><p>insert into new_orders values(101,to_date(‘2005-02-03’,’yyyy-mm-dd’),’x1’,1001,1,20000,88001,88002);<br>insert into new_orders values(102,to_date(‘2005-05-15’,’yyyy-mm-dd’),’x1’,1002,1,30000,88002,88002);<br>insert into new_orders values(103,to_date(‘2005-09-22’,’yyyy-mm-dd’),’x1’,1003,1,40000,88003,88002);<br>insert into new_orders values(104,to_date(‘2005-12-30’,’yyyy-mm-dd’),’x1’,1004,1,10000,88004,88002);<br>insert into order_items values(101,801,200001,200,100);<br>insert into order_items values(102,802,200002,300,100);<br>insert into order_items values(103,803,200003,400,100);<br>insert into order_items values(104,804,200004,100,100);<br>commit;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">alter user sh identified by sh account unlock;</div><div class="line">CREATE TABLE sh.order_items</div><div class="line">  (order_id number(12) not null,</div><div class="line">   line_item_id number(3) not null,</div><div class="line">   product_id number(6) not null,</div><div class="line">   unit_price number(8,2) not null,</div><div class="line">   quantity number(8) not null, </div><div class="line">   CONSTRAINT order_items_fk</div><div class="line">   FOREIGN KEY(order_id) REFERENCES sh.new_orders(order_id)</div><div class="line">  )</div><div class="line">   PARTITION BY REFERENCE(order_items_fk);</div><div class="line">alter database datafile &apos;/u01/app/oracle/oradata/PROD1/tbs1_01.dbf&apos; autoextend on;</div><div class="line">alter database datafile &apos;/u01/app/oracle/oradata/PROD1/tbs2_01.dbf&apos; autoextend on;</div><div class="line">insert into sh.new_orders values(101,to_date(&apos;2005-02-03&apos;,&apos;yyyy-mm-dd&apos;),&apos;x1&apos;,1001,1,20000,88001,88002); </div><div class="line">insert into sh.new_orders values(102,to_date(&apos;2005-05-15&apos;,&apos;yyyy-mm-dd&apos;),&apos;x1&apos;,1002,1,30000,88002,88002); </div><div class="line">insert into sh.new_orders values(103,to_date(&apos;2005-09-22&apos;,&apos;yyyy-mm-dd&apos;),&apos;x1&apos;,1003,1,40000,88003,88002); </div><div class="line">insert into sh.new_orders values(104,to_date(&apos;2005-12-30&apos;,&apos;yyyy-mm-dd&apos;),&apos;x1&apos;,1004,1,10000,88004,88002); </div><div class="line">insert into sh.order_items values(101,801,200001,200,100);</div><div class="line">insert into sh.order_items values(102,802,200002,300,100);</div><div class="line">insert into sh.order_items values(103,803,200003,400,100);</div><div class="line">insert into sh.order_items values(104,804,200004,100,100);</div><div class="line">commit;</div></pre></td></tr></table></figure></p>
<h4 id="2-2-Create-interval-partition-table"><a href="#2-2-Create-interval-partition-table" class="headerlink" title="2.2 Create interval partition table"></a>2.2 Create interval partition table</h4><h5 id="2-2-1-Execute-the-script-to-create-4-tablespace-the-script-follows"><a href="#2-2-1-Execute-the-script-to-create-4-tablespace-the-script-follows" class="headerlink" title="2.2.1. Execute the script to create 4 tablespace, the script follows::"></a>2.2.1. Execute the script to create 4 tablespace, the script follows::</h5><p>create tablespace SALES_TBS1 datafile ‘/u01/app/oracle/oradata/PROD1/sales_tbs1_01.dbf’ size 10m autoextend on;<br>create tablespace SALES_TBS2 datafile ‘/u01/app/oracle/oradata/PROD1/sales_tbs2_01.dbf’ size 10m autoextend on;<br>create tablespace SALES_TBS3 datafile ‘/u01/app/oracle/oradata/PROD1/sales_tbs3_01.dbf’ size 10m autoextend on;<br>create tablespace SALES_TBS4 datafile ‘/u01/app/oracle/oradata/PROD1/sales_tbs4_01.dbf’ size 10m autoextend on;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">conn / as sysdba</div><div class="line">create tablespace SALES_TBS1 datafile &apos;/u01/app/oracle/oradata/PROD1/sales_tbs1_01.dbf&apos; size 10m autoextend on;</div><div class="line">create tablespace SALES_TBS2 datafile &apos;/u01/app/oracle/oradata/PROD1/sales_tbs2_01.dbf&apos; size 10m autoextend on;</div><div class="line">create tablespace SALES_TBS3 datafile &apos;/u01/app/oracle/oradata/PROD1/sales_tbs3_01.dbf&apos; size 10m autoextend on;</div><div class="line">create tablespace SALES_TBS4 datafile &apos;/u01/app/oracle/oradata/PROD1/sales_tbs4_01.dbf&apos; size 10m autoextend on;</div></pre></td></tr></table></figure></p>
<h5 id="2-2-2-Partition-table-has-4-range-partitioning-respectively-contained-2002-2003-2004-2005-data-and-the-4-partition-tablespace-is-respectively-the-4-tablespace-in-front-of-the-establishment"><a href="#2-2-2-Partition-table-has-4-range-partitioning-respectively-contained-2002-2003-2004-2005-data-and-the-4-partition-tablespace-is-respectively-the-4-tablespace-in-front-of-the-establishment" class="headerlink" title="2.2.2. Partition table has 4 range partitioning, respectively contained 2002,2003,2004,2005 data, and the 4 partition tablespace is respectively the 4 tablespace in front of the establishment;"></a>2.2.2. Partition table has 4 range partitioning, respectively contained 2002,2003,2004,2005 data, and the 4 partition tablespace is respectively the 4 tablespace in front of the establishment;</h5><h5 id="2-2-3-the-partition-is-interval-of-1-years"><a href="#2-2-3-the-partition-is-interval-of-1-years" class="headerlink" title="2.2.3. the partition is interval of 1 years;"></a>2.2.3. the partition is interval of 1 years;</h5><h5 id="2-2-4-The-name-of-the-table-is-newsales-partitioning-key-is-time-id-contains-a-column-as-follows"><a href="#2-2-4-The-name-of-the-table-is-newsales-partitioning-key-is-time-id-contains-a-column-as-follows" class="headerlink" title="2.2.4. The name of the table is newsales, partitioning key is time_id, contains a column as follows:"></a>2.2.4. The name of the table is newsales, partitioning key is time_id, contains a column as follows:</h5><p>prod_id number(6) not null,<br>cust_id number,<br>time_id date,<br>channel_id char(1),<br>promo_id number(6) not null,<br>quantity_sold number(3) not null,<br>amount_sold number(10,2) not null<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE sh.newsales</div><div class="line">(</div><div class="line">prod_id        NUMBER(6) NOT NULL,</div><div class="line">cust_id        NUMBER,</div><div class="line">time_id        DATE,</div><div class="line">channel_id     CHAR(1),</div><div class="line">promo_id       NUMBER(6) NOT NULL,</div><div class="line">quantity_sold  NUMBER(3) NOT NULL,</div><div class="line">amount_sold    NUMBER(10,2) NOT NULL</div><div class="line">)</div><div class="line">PARTITION BY RANGE(time_id)</div><div class="line">INTERVAL(NUMTOYMINTERVAL(1, &apos;YEAR&apos;))</div><div class="line">STORE IN (SALES_TBS1,SALES_TBS2,SALES_TBS3,SALES_TBS4)</div><div class="line">( PARTITION p0 VALUES LESS THAN (TO_DATE(&apos;1-1-2003&apos;, &apos;DD-MM-YYYY&apos;)) tablespace SALES_TBS1,</div><div class="line">  PARTITION p1 VALUES LESS THAN (TO_DATE(&apos;1-1-2004&apos;, &apos;DD-MM-YYYY&apos;)) tablespace SALES_TBS2,</div><div class="line">  PARTITION p2 VALUES LESS THAN (TO_DATE(&apos;1-7-2005&apos;, &apos;DD-MM-YYYY&apos;)) tablespace SALES_TBS3,</div><div class="line">  PARTITION p3 VALUES LESS THAN (TO_DATE(&apos;1-1-2006&apos;, &apos;DD-MM-YYYY&apos;)) tablespace SALES_TBS4);</div></pre></td></tr></table></figure></p>
<h5 id="2-2-5-Execute-the-script-insert-data-into-the-partition-table-scripts-are-as-follows"><a href="#2-2-5-Execute-the-script-insert-data-into-the-partition-table-scripts-are-as-follows" class="headerlink" title="2.2.5. Execute the script, insert data into the partition table, scripts are as follows:"></a>2.2.5. Execute the script, insert data into the partition table, scripts are as follows:</h5><p>insert into sh.newsales values(908001,101,to_date(‘2002-8-10’,’yyyy-mm-dd’),’a’,88001,100,200);<br>insert into sh.newsales values(908002,102,to_date(‘2003-7-10’,’yyyy-mm-dd’),’a’,88002,100,800);<br>insert into sh.newsales values(908003,103,to_date(‘2004-5-30’,’yyyy-mm-dd’),’a’,88003,100,700);<br>insert into sh.newsales values(908004,104,to_date(‘2005-12-10’,’yyyy-mm-dd’),’a’,88004,100,600);<br>insert into sh.newsales values(908005,105,to_date(‘2007-11-14’,’yyyy-mm-dd’),’a’,88005,100,500);<br>commit;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">insert into sh.newsales values(908001,101,to_date(&apos;2002-8-10&apos;,&apos;yyyy-mm-dd&apos;),&apos;a&apos;,88001,100,200); </div><div class="line">insert into sh.newsales values(908002,102,to_date(&apos;2003-7-10&apos;,&apos;yyyy-mm-dd&apos;),&apos;a&apos;,88002,100,800); </div><div class="line">insert into sh.newsales values(908003,103,to_date(&apos;2004-5-30&apos;,&apos;yyyy-mm-dd&apos;),&apos;a&apos;,88003,100,700); </div><div class="line">insert into sh.newsales values(908004,104,to_date(&apos;2005-12-10&apos;,&apos;yyyy-mm-dd&apos;),&apos;a&apos;,88004,100,600); </div><div class="line">insert into sh.newsales values(908005,105,to_date(&apos;2007-11-14&apos;,&apos;yyyy-mm-dd&apos;),&apos;a&apos;,88005,100,500); </div><div class="line">commit;</div><div class="line">conn sh/sh</div><div class="line">set long 10000</div><div class="line">set lines 160</div><div class="line">set pages 500</div><div class="line">select dbms_metadata.get_ddl(&apos;TABLE&apos;,&apos;NEWSALES&apos;) FROM DUAL;</div></pre></td></tr></table></figure></p>
<h4 id="2-3-Create-and-Manage-encrypted-tablespaces"><a href="#2-3-Create-and-Manage-encrypted-tablespaces" class="headerlink" title="2.3 Create and Manage encrypted tablespaces"></a>2.3 Create and Manage encrypted tablespaces</h4><h5 id="2-3-1-Create-the-encrypted-tablespace-in-PROD3"><a href="#2-3-1-Create-the-encrypted-tablespace-in-PROD3" class="headerlink" title="2.3.1 Create the encrypted tablespace in PROD3:"></a>2.3.1 Create the encrypted tablespace in PROD3:</h5><h5 id="2-3-2-Execute-the-given-script-home-oracle-scripts-sec-tbs-sql-which-has-created-the-user-statement-and-temporary-tablespace-name-is-temp"><a href="#2-3-2-Execute-the-given-script-home-oracle-scripts-sec-tbs-sql-which-has-created-the-user-statement-and-temporary-tablespace-name-is-temp" class="headerlink" title="2.3.2 Execute the given script (/home/oracle/scripts/sec_tbs.sql), which has created the user statement, and temporary tablespace name is temp"></a>2.3.2 Execute the given script (/home/oracle/scripts/sec_tbs.sql), which has created the user statement, and temporary tablespace name is temp</h5><h5 id="2-3-3-The-two-table-belongs-to-the-SH-into-the-encryption-tablespace"><a href="#2-3-3-The-two-table-belongs-to-the-SH-into-the-encryption-tablespace" class="headerlink" title="2.3.3 The two table belongs to the SH into the encryption tablespace."></a>2.3.3 The two table belongs to the SH into the encryption tablespace.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">scp /home/oracle/scripts/sec_tbs.sql oracle@edbjr2p2:/home/oracle</div><div class="line">export ORACLE_SID=PROD3</div><div class="line">sqlplus / as sysdba</div><div class="line">select * from v$encryption_wallet;</div><div class="line">mkdir -p /u01/app/oracle/admin/PROD3/wallet</div><div class="line">alter system set encryption key identified by oracle;</div><div class="line">select * from v$encryption_wallet;</div><div class="line">CREATE TABLESPACE secur_tb DATAFILE &apos;$ORACLE_BASE/oradata/PROD3/secur_tb01.dbf&apos; SIZE 50M ENCRYPTION DEFAULT STORAGE(ENCRYPT);</div><div class="line">@/home/oracle/sec_tbs.sql</div><div class="line">alter table sh.SEC_TEST1 move tablespace secur_tb;</div><div class="line">alter table sh.CIH_TEST1 move tablespace secur_tb;</div><div class="line">conn sh/sh</div><div class="line">select segment_name,tablespace_name from user_extents where segment_name in (&apos;SEC_TEST1&apos;,&apos;CIH_TEST1&apos;);</div></pre></td></tr></table></figure>
<h3 id="3-Create-and-manage-LOB"><a href="#3-Create-and-manage-LOB" class="headerlink" title="3. Create and manage LOB"></a>3. <strong>Create and manage LOB</strong></h3><h4 id="3-1-Implement-securefile-LOB"><a href="#3-1-Implement-securefile-LOB" class="headerlink" title="3.1 Implement securefile LOB"></a>3.1 Implement securefile LOB</h4><h5 id="3-1-1-Create-a-tablespace-Use-the-following-specifications"><a href="#3-1-1-Create-a-tablespace-Use-the-following-specifications" class="headerlink" title="3.1.1. Create a tablespace,Use the following specifications:"></a>3.1.1. Create a tablespace,Use the following specifications:</h5><p>File size of 150MB.<br>Initial extent size of 64MB.<br>next extent size of 64MB.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">create tablespace lob_tb datafile &apos;$ORACLE_BASE/oradata/PROD1/lob_tb01.dbf&apos; size 150M autoextend on uniform size 64m;</div></pre></td></tr></table></figure></p>
<h5 id="3-1-2-Create-a-new-table-in-the-HR-schema-in-the-PROD1-database-with-the-following-specifications"><a href="#3-1-2-Create-a-new-table-in-the-HR-schema-in-the-PROD1-database-with-the-following-specifications" class="headerlink" title="3.1.2. Create a new table in the HR schema in the PROD1 database with the following specifications:"></a>3.1.2. Create a new table in the HR schema in the PROD1 database with the following specifications:</h5><p>Table name TEST_SPEC<br>Column names:<br>    ID NUMBER<br>    DOC BLOB<br>LOB Tablespace using created before<br>Use the deduplicate option and compress high option.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">alter system set db_securefile=permitted;</div><div class="line">create table HR.TEST_SPEC(ID NUMBER,DOC BLOB) </div><div class="line">tablespace lob_tb</div><div class="line">LOB(DOC) STORE AS SECUREFILE (</div><div class="line">	COMPRESS HIGH</div><div class="line">    deduplicate</div><div class="line">    CACHE</div><div class="line">    NOLOGGING</div><div class="line">    );</div></pre></td></tr></table></figure></p>
<h5 id="3-1-3-Load-data-into-the-TEST-SPEC-using-the-script-name-of-securelob-sp-sql"><a href="#3-1-3-Load-data-into-the-TEST-SPEC-using-the-script-name-of-securelob-sp-sql" class="headerlink" title="3.1.3. Load data into the TEST_SPEC,using the script name of securelob_sp.sql"></a>3.1.3. Load data into the TEST_SPEC,using the script name of securelob_sp.sql</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">grant create any directory to hr;</div><div class="line">conn hr/hr</div><div class="line">@securelob_sp.sql</div><div class="line">create or replace directory dir_dmp as &apos;/home/oracle/scripts&apos;;</div><div class="line">exec sp_imp_blob;</div><div class="line">select * from TEST_SPEC where rownum&lt;3;</div></pre></td></tr></table></figure>
<h4 id="3-2-Implement-BasicFiles-LOB"><a href="#3-2-Implement-BasicFiles-LOB" class="headerlink" title="3.2 Implement BasicFiles LOB"></a>3.2 Implement BasicFiles LOB</h4><h5 id="3-2-1-Create-a-new-table-in-the-HR-schema-in-the-PROD1-database-with-the-following-specifications"><a href="#3-2-1-Create-a-new-table-in-the-HR-schema-in-the-PROD1-database-with-the-following-specifications" class="headerlink" title="3.2.1 Create a new table in the HR schema in the PROD1 database with the following specifications:"></a>3.2.1 Create a new table in the HR schema in the PROD1 database with the following specifications:</h5><h5 id="3-2-2-Table-name-MAGAZINE-ARTICLES"><a href="#3-2-2-Table-name-MAGAZINE-ARTICLES" class="headerlink" title="3.2.2 Table name MAGAZINE_ARTICLES"></a>3.2.2 Table name MAGAZINE_ARTICLES</h5><p>Tablespace USERS<br>Column names:<br>    AUTHOR VARCHAR2(30)<br>    ARTICLE_NAME VARCHAR2(50)<br>    ARTICLE_DATE DATE<br>    ARTICLE_DATA CLOB</p>
<h5 id="3-2-3-Tablespace-LOB-DATA-with-a-16KB-chunk-size-initial-and-next-extents-each-with-a-size-of-2MB"><a href="#3-2-3-Tablespace-LOB-DATA-with-a-16KB-chunk-size-initial-and-next-extents-each-with-a-size-of-2MB" class="headerlink" title="3.2.3 Tablespace LOB_DATA with a 16KB chunk size,initial and next extents each with a size of 2MB."></a>3.2.3 Tablespace LOB_DATA with a 16KB chunk size,initial and next extents each with a size of 2MB.</h5><h5 id="3-2-4-Use-the-nocache-option-and-disable-storage-in-row"><a href="#3-2-4-Use-the-nocache-option-and-disable-storage-in-row" class="headerlink" title="3.2.4 Use the nocache option and disable storage in row."></a>3.2.4 Use the nocache option and disable storage in row.</h5><h5 id="3-2-5-Use-import-dump-to-populate-the-HR-MAGAZINE-ARTICLES-table-with-data-from-the-exp-mag-dmp-file"><a href="#3-2-5-Use-import-dump-to-populate-the-HR-MAGAZINE-ARTICLES-table-with-data-from-the-exp-mag-dmp-file" class="headerlink" title="3.2.5 Use import dump to populate the HR.MAGAZINE_ARTICLES table with data from the exp_mag.dmp file."></a>3.2.5 Use import dump to populate the HR.MAGAZINE_ARTICLES table with data from the exp_mag.dmp file.</h5><p>(/home/oracle/scripts/exp_mag.dmp)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">create tablespace LOB_DATA datafile &apos;$ORACLE_BASE/oradata/PROD1/lob_data01.dbf&apos; size 50m uniform size 2m;</div><div class="line">create table HR.MAGAZINE_ARTICLES(</div><div class="line">  AUTHOR VARCHAR2(30),</div><div class="line">  ARTICLE_NAME VARCHAR2(50),</div><div class="line">  ARTICLE_DATE DATE,</div><div class="line">  ARTICLE_DATA CLOB</div><div class="line">) lob(ARTICLE_DATA) STORE AS BASICFILE</div><div class="line">( Tablespace LOB_DATA chunk 16k</div><div class="line">storage(initial 2m next 2m)</div><div class="line">nocache</div><div class="line">disable storage in row);</div><div class="line">create directory TUNE_RESULTS as &apos;/home/oracle/scripts&apos;;</div><div class="line">impdp system DIRECTORY=TUNE_RESULTS DUMPFILE=exp_mag.dmp log=imp.log TABLE_EXISTS_ACTION=APPEND</div><div class="line">select count(*) from HR.MAGAZINE_ARTICLES;</div></pre></td></tr></table></figure></p>
<h3 id="4-Implement-fine-grained-access-control-Fine-Grained-Auditing"><a href="#4-Implement-fine-grained-access-control-Fine-Grained-Auditing" class="headerlink" title="4. Implement fine-grained access control (Fine-Grained Auditing)"></a>4. <strong>Implement fine-grained access control (Fine-Grained Auditing)</strong></h3><h4 id="4-1-Set-up-FGA-on-the-SALARY-and-COMMISSION-PCT-columns-of-the-EMPLOYEES-table-in-the-HR-schema-of-the-PROD1"><a href="#4-1-Set-up-FGA-on-the-SALARY-and-COMMISSION-PCT-columns-of-the-EMPLOYEES-table-in-the-HR-schema-of-the-PROD1" class="headerlink" title="4.1 Set up FGA on the SALARY and COMMISSION_PCT columns of the EMPLOYEES table in the HR schema of the PROD1"></a>4.1 Set up FGA on the SALARY and COMMISSION_PCT columns of the EMPLOYEES table in the HR schema of the PROD1</h4><p>database. An audit record should be created if either of these two columns are selected as part of the output of a query or are used in the where condition of a select statement and their values are not null.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">begin</div><div class="line">   DBMS_FGA.ADD_POLICY (</div><div class="line">   object_schema      =&gt;  &apos;HR&apos;, </div><div class="line">   object_name        =&gt;  &apos;EMPLOYEES&apos;, </div><div class="line">   policy_name        =&gt;  &apos;HR_EMP_Policy1&apos;, </div><div class="line">   audit_condition    =&gt;  &apos;(SALARY is not null) and (COMMISSION_PCT is not null)&apos;, </div><div class="line">   audit_column       =&gt;  &apos;SALARY,COMMISSION_PCT&apos;, </div><div class="line">   handler_schema     =&gt;   NULL, </div><div class="line">   handler_module     =&gt;   NULL, </div><div class="line">   enable             =&gt;   TRUE, </div><div class="line">   statement_types    =&gt;  &apos;SELECT&apos;,  </div><div class="line">   audit_column_opts  =&gt;   DBMS_FGA.ANY_COLUMNS); </div><div class="line">end;</div><div class="line">/</div></pre></td></tr></table></figure></p>
<h4 id="4-2-Validate-that-the-FGA-is-taking-place-by-executing-statements-that-should-result-in-auditing-records-being-created-and-by-executing-statements-where-no-auditing-records-will-be-generated-Do-not-delete-your-audit-records"><a href="#4-2-Validate-that-the-FGA-is-taking-place-by-executing-statements-that-should-result-in-auditing-records-being-created-and-by-executing-statements-where-no-auditing-records-will-be-generated-Do-not-delete-your-audit-records" class="headerlink" title="4.2 Validate that the FGA is taking place by executing statements that should result in auditing records being created and by executing statements where no auditing records will be generated. Do not delete your audit records."></a>4.2 Validate that the FGA is taking place by executing statements that should result in auditing records being created and by executing statements where no auditing records will be generated. Do not delete your audit records.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">conn hr/hr</div><div class="line">select * from employees;</div><div class="line">select * from employees where SALARY is not null;</div><div class="line">select * from employees where COMMISSION_PCT is null;</div><div class="line">select * from employees where SALARY is not null and COMMISSION_PCT is null;</div><div class="line">conn / as sysdba</div><div class="line">SELECT DBUID, LSQLTEXT, NTIMESTAMP# FROM SYS.FGA_LOG$;</div></pre></td></tr></table></figure>
<h3 id="5-Administer-flashback-data"><a href="#5-Administer-flashback-data" class="headerlink" title="5. Administer flashback data"></a>5. <strong>Administer flashback data</strong></h3><h4 id="5-1-Create-a-table-named-ORIGINAL-SALARY-in-the-HR-schema-in-the-PROD1-database-that-includes-the-employee-id-commission-pct-and-salary-of-all-records-in-the-HR-EMPLOYEES-table-Note-the-date-and-time-and-then-commit-the-changes"><a href="#5-1-Create-a-table-named-ORIGINAL-SALARY-in-the-HR-schema-in-the-PROD1-database-that-includes-the-employee-id-commission-pct-and-salary-of-all-records-in-the-HR-EMPLOYEES-table-Note-the-date-and-time-and-then-commit-the-changes" class="headerlink" title="5.1  Create a table named ORIGINAL_SALARY in the HR schema in the PROD1 database that includes the employee_id,commission_pct and salary of all records in the HR.EMPLOYEES table.Note the date and time and then commit the changes."></a>5.1  Create a table named ORIGINAL_SALARY in the HR schema in the PROD1 database that includes the employee_id,commission_pct and salary of all records in the HR.EMPLOYEES table.Note the date and time and then commit the changes.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">create table hr.ORIGINAL_SALARY as select employee_id,commission_pct, salary from HR.EMPLOYEES;</div><div class="line">commit;</div><div class="line">select current_date from dual;</div></pre></td></tr></table></figure>
<h4 id="5-2-Delete-all-employees-in-the-HR-ORIGINAL-SALARY-table-whose-HIRE-DATE-is-before-1994-Commit-the-changes"><a href="#5-2-Delete-all-employees-in-the-HR-ORIGINAL-SALARY-table-whose-HIRE-DATE-is-before-1994-Commit-the-changes" class="headerlink" title="5.2  Delete all employees in the HR.ORIGINAL_SALARY table whose HIRE_DATE is before 1994. Commit the changes."></a>5.2  Delete all employees in the HR.ORIGINAL_SALARY table whose HIRE_DATE is before 1994. Commit the changes.</h4><p>Create a view HR.SALARY_VIEW that will show all the original rows before the deletion.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">delete HR.ORIGINAL_SALARY where employee_id in (select employee_id from hr.employees where HIRE_DATE &lt; to_date(&apos;1984-01-01&apos;,&apos;YYYY-MM-DD&apos;));</div><div class="line">commit;</div><div class="line">alter session set nls_date_format=&apos;YYYY-MM-DD HH24:MI:SS&apos;;</div><div class="line">select sysdate from dual;</div><div class="line">SELECT * FROM hr.ORIGINAL_SALARY;</div><div class="line">select versions_startscn,versions_endscn,versions_operation,employee_id from hr.ORIGINAL_SALARY versions between timestamp to_timestamp(&apos;2018-11-02 17:11:00&apos;,&apos;YYYY-MM-DD HH24:MI:SS&apos;) and to_timestamp(&apos;2018-11-02 17:11:01&apos;,&apos;YYYY-MM-DD HH24:MI:SS&apos;);</div><div class="line">create view HR.SALARY_VIEW as select * from HR.ORIGINAL_SALARY as of scn 1216763;</div><div class="line">select * from hr.salary_view;</div></pre></td></tr></table></figure></p>
<h4 id="5-3-A-hr-schema-table-DEPARTMENTS-NEW-was-repeatedly-asked-DROP-return-to-the-specified-data-version-table-include-department-name-column-tablespace-dev-data"><a href="#5-3-A-hr-schema-table-DEPARTMENTS-NEW-was-repeatedly-asked-DROP-return-to-the-specified-data-version-table-include-department-name-column-tablespace-dev-data" class="headerlink" title="5.3  A hr schema table(DEPARTMENTS_NEW) was repeatedly asked DROP, return to the specified data version table include department_name column tablespace:dev_data"></a>5.3  A hr schema table(DEPARTMENTS_NEW) was repeatedly asked DROP, return to the specified data version table include department_name column tablespace:dev_data</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">conn hr/hr</div><div class="line">show recyc</div><div class="line">desc &quot;BIN$eWjjkDs5E5bgU4AoqMCJMw==$0&quot;</div><div class="line">desc &quot;BIN$eWjjkDs7E5bgU4AoqMCJMw==$0&quot;</div><div class="line">desc &quot;BIN$eWjjkDs3E5bgU4AoqMCJMw==$0&quot;</div><div class="line">flashback table &quot;BIN$eWjjkDs3E5bgU4AoqMCJMw==$0&quot; to before drop;</div><div class="line">desc DEPARTMENTS_NEW</div></pre></td></tr></table></figure>
<h3 id="5-4-Flashback-archive"><a href="#5-4-Flashback-archive" class="headerlink" title="5.4  Flashback archive"></a>5.4  Flashback archive</h3><h4 id="5-4-1-Create-a-new-tablespace-name-of-FRATBS-file-size-of-50MB"><a href="#5-4-1-Create-a-new-tablespace-name-of-FRATBS-file-size-of-50MB" class="headerlink" title="5.4.1 Create a new tablespace name of FRATBS, file size of 50MB."></a>5.4.1 Create a new tablespace name of FRATBS, file size of 50MB.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">conn / as sysdba</div><div class="line">create tablespace FRATBS datafile &apos;$ORACLE_BASE/oradata/PROD1/fratbs01.dbf&apos; size 50M;</div></pre></td></tr></table></figure>
<h4 id="5-4-2-Create-Flashback-Data-Archive-name-of-fra1-using-the-tablespace-name-of-FRATBS-The-archive-administrator-name-of-FR-ADMIN"><a href="#5-4-2-Create-Flashback-Data-Archive-name-of-fra1-using-the-tablespace-name-of-FRATBS-The-archive-administrator-name-of-FR-ADMIN" class="headerlink" title="5.4.2 Create Flashback Data Archive name of fra1,using the tablespace name of FRATBS,The archive administrator name of FR_ADMIN."></a>5.4.2 Create Flashback Data Archive name of fra1,using the tablespace name of FRATBS,The archive administrator name of FR_ADMIN.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">create user fr_admin identified by oracle;</div><div class="line">grant connect,resource to fr_admin;</div><div class="line">grant flashback archive administer to fr_admin;</div><div class="line">create Flashback Archive fra1 tablespace FRATBS retention 1 year;</div></pre></td></tr></table></figure>
<h4 id="5-4-3-Enable-Flashback-Data-Archive-for-a-table-name-of-SH-PROMOTIONS-and-includes-data-that-will-be-retained-for-one-years"><a href="#5-4-3-Enable-Flashback-Data-Archive-for-a-table-name-of-SH-PROMOTIONS-and-includes-data-that-will-be-retained-for-one-years" class="headerlink" title="5.4.3 Enable Flashback Data Archive for a table name of SH.PROMOTIONS, and includes data that will be retained for one years."></a>5.4.3 Enable Flashback Data Archive for a table name of SH.PROMOTIONS, and includes data that will be retained for one years.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter table SH.PROMOTIONS flashback archive fra1;</div></pre></td></tr></table></figure>
<h4 id="5-4-4-Examine-the-contents-of-the-table-SH-PROMOTIONS-that-before-existed-20-minutes-to-1-minutes"><a href="#5-4-4-Examine-the-contents-of-the-table-SH-PROMOTIONS-that-before-existed-20-minutes-to-1-minutes" class="headerlink" title="5.4.4 Examine the contents of the table SH.PROMOTIONS that before existed 20 minutes to 1 minutes."></a>5.4.4 Examine the contents of the table SH.PROMOTIONS that before existed 20 minutes to 1 minutes.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">select count(*) from SH.PROMOTIONS versions between timestamp (systimestamp-interval &apos;20&apos; minute) and (systimestamp-interval &apos;1&apos; minute);</div></pre></td></tr></table></figure>
<h4 id="5-4-5-Execute-the-s4-1-sql-script"><a href="#5-4-5-Execute-the-s4-1-sql-script" class="headerlink" title="5.4.5 Execute the s4_1.sql script."></a>5.4.5 Execute the s4_1.sql script.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@/home/oracle/scripts/s4_1.sql</div></pre></td></tr></table></figure>
        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2018-11-06T03:47:25.030Z" itemprop="dateUpdated">2018-11-06 11:47:25</time>
</span><br>


        
    </div>
    <footer>
        <a href="https://aliennever.github.io">
            <img src="/img/Alien.jpg" alt="LG">
            LG
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/oracle/">oracle</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://aliennever.github.io/2018/10/30/20181105OCM Skillset4/&title=《11gOCM-Skillset4》 — Alien&pic=https://aliennever.github.io/img/Alien.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://aliennever.github.io/2018/10/30/20181105OCM Skillset4/&title=《11gOCM-Skillset4》 — Alien&source=终有一天，大器晚成" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://aliennever.github.io/2018/10/30/20181105OCM Skillset4/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《11gOCM-Skillset4》 — Alien&url=https://aliennever.github.io/2018/10/30/20181105OCM Skillset4/&via=https://aliennever.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://aliennever.github.io/2018/10/30/20181105OCM Skillset4/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/10/29/20181029OCM Skillset3/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">11gOCM-Skillset3</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/11/06/20181113OCM Skillset6/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">11gOCM-Skillset6</h4>
      </a>
    </div>
  
</nav>



    










</article>



</div>

        <footer class="footer">

</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://aliennever.github.io/2018/10/30/20181105OCM Skillset4/&title=《11gOCM-Skillset4》 — Alien&pic=https://aliennever.github.io/img/Alien.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://aliennever.github.io/2018/10/30/20181105OCM Skillset4/&title=《11gOCM-Skillset4》 — Alien&source=终有一天，大器晚成" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://aliennever.github.io/2018/10/30/20181105OCM Skillset4/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《11gOCM-Skillset4》 — Alien&url=https://aliennever.github.io/2018/10/30/20181105OCM Skillset4/&via=https://aliennever.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://aliennever.github.io/2018/10/30/20181105OCM Skillset4/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKklEQVR42u3aS27cMBAFQN//0hMgqwCJNe91ywGGKq4MDSyxuGiwP19f8Xr9Xsnz1x/ru+ftr7ctDAyMj2W8Ltff221/zb94/bY3VAwMjAcwroPpJrAmG00O6M2eMTAwMEZXt2Tr10eDgYGBMQu4s9B5fRwzMAYGxtMYyWUuCbUbwH/KxTEwMD6Qcdcl7yf+/sH+BgYGxocwXou1KdUlIbjYCQYGxtGM9tqXlMbuKt7lR4aBgXE2I3l1MjaRFO827c83b8DAwDiasUlW9+Wzm4ctMDAwDmVs0sg8gF7z8qD/7RMMDIzHMDbjF3mtvr1WRsEdAwPjaMasiNYWzu46iOKLGBgYxzHaK2CboG5CMwYGBkZ7/WpL9m16nLcw//F1DAyMQxmz4v6soDZrdkYHhIGBcTQjb162W8wZbbiPrBgYGAcxohC2GOTah9RiQgQDA+NQRl5Ey/9rs9pQjoGBgdGWwDZjE3lp703RDQMD41DGLKXcNzXby2jUHMXAwDiU0YbRPEBvEua6aoiBgfEARpvQXgfT5CsJu2ipYmBgHM3IN1EUv24K08NhCwwMjIMYs8J93kPMw+6s0IaBgfEERjsGkX++LZzNklgMDIznMGYtgVmi214Z62ELDAyMoxltwas9guFlLudhYGBgBAMT7XDGpjFQ5NAYGBgPY8zC5X5QdfgZDAyM4xjt9W4/eNpWAYvpNgwMjOMY+6C8Hw7L25+rlBgDA+PzGL8A4wWyUAfVOkkAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };



</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>










</body>
</html>
